# ğŸ“… NGÃ€Y 11: useState - React State Management Fundamentals

## ğŸ¯ Má»¥c tiÃªu há»c táº­p (5 phÃºt)

Sau bÃ i há»c nÃ y, báº¡n sáº½:

- [ ] **Hiá»ƒu sÃ¢u** useState hook lÃ  gÃ¬ vÃ  táº¡i sao cáº§n thiáº¿t
- [ ] **Sá»­ dá»¥ng Ä‘Æ°á»£c** useState Ä‘á»ƒ quáº£n lÃ½ component state
- [ ] **PhÃ¢n biá»‡t Ä‘Æ°á»£c** state vs props, stateful vs stateless components
- [ ] **Implement Ä‘Æ°á»£c** controlled components Ä‘Ãºng cÃ¡ch
- [ ] **Debug Ä‘Æ°á»£c** common useState mistakes vÃ  re-render issues
- [ ] **Refactor Ä‘Æ°á»£c** project NgÃ y 10 tá»« DOM manipulation sang state-driven

---

## ğŸ¤” Kiá»ƒm tra Ä‘áº§u vÃ o (5 phÃºt)

Tráº£ lá»i 3 cÃ¢u há»i nÃ y trÆ°á»›c khi báº¯t Ä‘áº§u:

**1. NgÃ y 10 - Project Issues:**

- Báº¡n cÃ³ nhá»› nhá»¯ng "hacks" chÃºng ta dÃ¹ng Ä‘á»ƒ filter/search khÃ´ng?
- Táº¡i sao pháº£i dÃ¹ng `document.getElementById()` vÃ  DOM manipulation?
- Code cÃ³ dá»… maintain khÃ´ng? Dá»… debug khÃ´ng?

**2. Props Flow:**

- Props flow theo direction nÃ o? (parent â†’ child hay child â†’ parent?)
- Props cÃ³ thá»ƒ modify Ä‘Æ°á»£c khÃ´ng?
- LÃ m sao child component "communicate" vá»›i parent?

**3. Form Handling:**

- Controlled vs Uncontrolled component khÃ¡c nhau tháº¿ nÃ o?
- Value cá»§a input Ä‘Æ°á»£c quáº£n lÃ½ á»Ÿ Ä‘Ã¢u trong controlled component?

<details>
<summary>ğŸ’¡ Xem Ä‘Ã¡p Ã¡n</summary>
detai
1. **Project Issues:**
   - DÃ¹ng custom events, DOM queries, manual style updates
   - VÃ¬ khÃ´ng cÃ³ cÃ¡ch lÆ°u trá»¯ data reactively
   - Ráº¥t khÃ³ maintain vÃ  debug!

2. **Props Flow:**
   - Props: parent â†’ child (one-way data flow)
   - Props lÃ  read-only, KHÃ”NG modify Ä‘Æ°á»£c
   - Child gá»i callback function Ä‘Æ°á»£c truyá»n qua props

3. **Form Handling:**
   - Controlled: React quáº£n lÃ½ value
   - Uncontrolled: DOM quáº£n lÃ½ value
   - Controlled: value Ä‘Æ°á»£c lÆ°u trong React state

</details>

---

## ğŸ“– PHáº¦N 1: GIá»šI THIá»†U KHÃI NIá»†M (40 phÃºt)

### 1.1 Váº¥n Äá» Thá»±c Táº¿ - The Pain of No State

HÃ£y nhá»› láº¡i project ngÃ y 10:

```jsx
// âŒ NgÃ y 10: The "Hacky" Way
function App() {
  // "State" stored in regular variables
  let currentFilters = {
    category: 'all',
    searchQuery: '',
  };

  const updateDisplay = () => {
    // Manual DOM manipulation
    const container = document.getElementById('products');
    container.innerHTML = '...'; // Re-render manually

    // Dispatch custom event
    window.dispatchEvent(new CustomEvent('update'));
  };

  return <div>...</div>;
}
```

**âŒ Problems:**

1. **No reactivity** - Thay Ä‘á»•i variable khÃ´ng trigger re-render
2. **Manual DOM updates** - Pháº£i tá»± update UI
3. **Hard to debug** - State scattered everywhere
4. **Not scalable** - CÃ ng nhiá»u features, cÃ ng messy
5. **Against React philosophy** - Imperative thay vÃ¬ declarative

---

### 1.2 Giáº£i PhÃ¡p - useState Hook

```jsx
// âœ… The React Way vá»›i useState
import { useState } from 'react';

function App() {
  // Declare state vá»›i useState
  const [category, setCategory] = useState('all');
  const [searchQuery, setSearchQuery] = useState('');

  // Filter products dá»±a trÃªn state
  const filteredProducts = products.filter((p) => {
    const matchCategory = category === 'all' || p.category === category;
    const matchSearch = p.name
      .toLowerCase()
      .includes(searchQuery.toLowerCase());
    return matchCategory && matchSearch;
  });

  // Update state â†’ React tá»± Ä‘á»™ng re-render!
  const handleCategoryChange = (newCategory) => {
    setCategory(newCategory); // â† Magic happens here!
  };

  return (
    <div>
      <button onClick={() => handleCategoryChange('laptop')}>Laptops</button>
      {/* React tá»± Ä‘á»™ng render láº¡i vá»›i filteredProducts má»›i */}
      <ProductGrid products={filteredProducts} />
    </div>
  );
}
```

**âœ… Benefits:**

1. **Automatic re-renders** - Change state â†’ UI updates
2. **Declarative** - Describe what UI should look like
3. **Easy to debug** - State in one place
4. **Scalable** - Add more state easily
5. **The React Way** - Follows framework philosophy

---

### 1.3 Mental Model - How useState Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENT LIFECYCLE vá»›i useState                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  1. INITIAL RENDER                                  â”‚
â”‚     const [count, setCount] = useState(0)          â”‚
â”‚     â†’ count = 0                                     â”‚
â”‚     â†’ Component renders vá»›i count = 0              â”‚
â”‚                                                     â”‚
â”‚  2. USER INTERACTION                                â”‚
â”‚     <button onClick={() => setCount(1)}>           â”‚
â”‚     â†’ setCount(1) called                           â”‚
â”‚                                                     â”‚
â”‚  3. STATE UPDATE                                    â”‚
â”‚     â†’ React schedules re-render                    â”‚
â”‚     â†’ Component function runs again                â”‚
â”‚                                                     â”‚
â”‚  4. RE-RENDER                                       â”‚
â”‚     const [count, setCount] = useState(0)          â”‚
â”‚     â†’ count = 1 (NOT 0!)                           â”‚
â”‚     â†’ Component renders vá»›i count = 1              â”‚
â”‚                                                     â”‚
â”‚  5. REPEAT                                          â”‚
â”‚     â†’ Every setCount() â†’ Re-render cycle           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”‘ Key Insights:**

1. **useState returns array:** `[currentValue, setterFunction]`
2. **Initial value only used once:** On first render
3. **setState triggers re-render:** Asynchronously
4. **Component function re-runs:** With new state value
5. **State persists between renders:** React remembers it

---

### 1.4 Anatomy of useState

```jsx
import { useState } from 'react';

function Counter() {
  // â”Œâ”€â”€â”€ Current state value
  // â”‚      â”Œâ”€â”€â”€ Function to update state
  // â”‚      â”‚           â”Œâ”€â”€â”€ Initial value (only used on mount)
  // â†“      â†“           â†“
  const [count, setCount] = useState(0);
  //     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
  //    Array destructuring

  // âœ… Reading state
  console.log(count); // Current value

  // âœ… Updating state
  setCount(5); // Set to specific value
  setCount(count + 1); // Based on current value (careful!)
  setCount((prev) => prev + 1); // Function form (safer!)

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}
```

**ğŸ“ Naming Convention:**

```jsx
// âœ… GOOD: Descriptive names
const [isOpen, setIsOpen] = useState(false);
const [userName, setUserName] = useState('');
const [products, setProducts] = useState([]);

// âŒ BAD: Generic names
const [state, setState] = useState(false);
const [data, setData] = useState('');
const [items, setItems] = useState([]);

// âœ… PATTERN: [noun, setNoun] or [isAdjective, setIsAdjective]
const [email, setEmail] = useState('');
const [isLoading, setIsLoading] = useState(false);
const [hasError, setHasError] = useState(false);
```

---

### 1.5 Hiá»ƒu Láº§m Phá»• Biáº¿n

#### âŒ Hiá»ƒu láº§m 1: "setState updates immediately"

```jsx
function Counter() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
    console.log(count); // âŒ Still 0, not 1!
    // setState is ASYNCHRONOUS!
  };

  return <button onClick={handleClick}>Count: {count}</button>;
}

// âœ… CORRECT: State updates in next render
function Counter() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
    // To see new value, use useEffect or check in next render
  };

  // This console.log sees the updated value
  console.log('Current count:', count);

  return <button onClick={handleClick}>Count: {count}</button>;
}
```

---

#### âŒ Hiá»ƒu láº§m 2: "Multiple setState calls update multiple times"

```jsx
function Counter() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1); // count = 0, so 0 + 1 = 1
    setCount(count + 1); // count still 0, so 0 + 1 = 1
    setCount(count + 1); // count still 0, so 0 + 1 = 1
    // Result: count = 1 (NOT 3!)
  };

  return <button onClick={handleClick}>Count: {count}</button>;
}

// âœ… CORRECT: Use function form for updates based on previous state
function Counter() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount((prev) => prev + 1); // prev = 0, result = 1
    setCount((prev) => prev + 1); // prev = 1, result = 2
    setCount((prev) => prev + 1); // prev = 2, result = 3
    // Result: count = 3 âœ…
  };

  return <button onClick={handleClick}>Count: {count}</button>;
}
```

**ğŸ”‘ Rule:** Use function form when new state depends on previous state!

---

#### âŒ Hiá»ƒu láº§m 3: "Can modify state directly"

```jsx
function TodoList() {
  const [todos, setTodos] = useState([]);

  const addTodo = (text) => {
    // âŒ WRONG: Mutating state directly
    todos.push({ id: Date.now(), text });
    setTodos(todos); // React won't detect change!
  };

  return <div>...</div>;
}

// âœ… CORRECT: Create new array/object
function TodoList() {
  const [todos, setTodos] = useState([]);

  const addTodo = (text) => {
    // âœ… Create new array with spread operator
    setTodos([...todos, { id: Date.now(), text }]);

    // OR using concat (also creates new array)
    setTodos(todos.concat({ id: Date.now(), text }));
  };

  return <div>...</div>;
}
```

**ğŸ”‘ Rule:** State is IMMUTABLE. Always create new values, never mutate!

---

#### âŒ Hiá»ƒu láº§m 4: "useState only for primitives"

```jsx
// âœ… useState works with ANY data type!

// Primitives
const [count, setCount] = useState(0);
const [name, setName] = useState('');
const [isOpen, setIsOpen] = useState(false);

// Objects
const [user, setUser] = useState({ name: '', email: '' });

// Arrays
const [items, setItems] = useState([]);

// Complex nested structures
const [formData, setFormData] = useState({
  personal: { name: '', age: 0 },
  contact: { email: '', phone: '' },
  preferences: [],
});

// Functions (use function form to avoid immediate execution)
const [callback, setCallback] = useState(() => () => console.log('Hello'));

// Null/undefined
const [data, setData] = useState(null);
```

---

## ğŸ’» PHáº¦N 2: LIVE CODING (60 phÃºt)

### Demo 1: Counter - The "Hello World" of State â­

```jsx
/**
 * Simple counter Ä‘á»ƒ hiá»ƒu useState basics
 * Concepts: Basic state, event handlers, re-rendering
 */
import { useState } from 'react';

function Counter() {
  // Declare state
  const [count, setCount] = useState(0);

  // Event handlers
  const increment = () => {
    setCount(count + 1);
  };

  const decrement = () => {
    setCount(count - 1);
  };

  const reset = () => {
    setCount(0);
  };

  // Component re-renders every time count changes
  console.log('Counter rendered with count:', count);

  return (
    <div style={{ textAlign: 'center', padding: '20px' }}>
      <h2>Counter Demo</h2>

      {/* Display current state */}
      <div
        style={{
          fontSize: '48px',
          fontWeight: 'bold',
          margin: '20px 0',
          color: count > 0 ? 'green' : count < 0 ? 'red' : 'black',
        }}
      >
        {count}
      </div>

      {/* Buttons to update state */}
      <div style={{ display: 'flex', gap: '10px', justifyContent: 'center' }}>
        <button onClick={decrement}>-</button>
        <button onClick={reset}>Reset</button>
        <button onClick={increment}>+</button>
      </div>

      {/* Conditional rendering based on state */}
      {count === 0 && <p>Start counting!</p>}
      {count > 0 && <p>Positive: {count}</p>}
      {count < 0 && <p>Negative: {count}</p>}
      {count >= 10 && <p>ğŸ‰ Double digits!</p>}
    </div>
  );
}

export default Counter;
```

**ğŸ” Key Learnings:**

- `useState(0)` - Initial value
- `setCount()` - Triggers re-render
- Component function runs again with new count
- Conditional rendering based on state

---

### Demo 2: Controlled Form - The Right Way â­â­

```jsx
/**
 * Controlled form inputs vá»›i useState
 * Concepts: Controlled components, form handling, validation
 */
import { useState } from 'react';

function LoginForm() {
  // Separate state for each input
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [errors, setErrors] = useState({});

  // Validation function
  const validate = () => {
    const newErrors = {};

    if (!email) {
      newErrors.email = 'Email is required';
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      newErrors.email = 'Invalid email format';
    }

    if (!password) {
      newErrors.password = 'Password is required';
    } else if (password.length < 8) {
      newErrors.password = 'Password must be at least 8 characters';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  // Submit handler
  const handleSubmit = (e) => {
    e.preventDefault();

    if (validate()) {
      console.log('âœ… Form submitted:', { email, password });

      // Reset form
      setEmail('');
      setPassword('');
      setErrors({});
    }
  };

  // Input handlers
  const handleEmailChange = (e) => {
    setEmail(e.target.value);
    // Clear error when user types
    if (errors.email) {
      setErrors({ ...errors, email: '' });
    }
  };

  const handlePasswordChange = (e) => {
    setPassword(e.target.value);
    if (errors.password) {
      setErrors({ ...errors, password: '' });
    }
  };

  return (
    <form
      onSubmit={handleSubmit}
      style={{ maxWidth: '400px', margin: '0 auto' }}
    >
      <h2>Login</h2>

      {/* Email Input - CONTROLLED */}
      <div style={{ marginBottom: '20px' }}>
        <label
          htmlFor='email'
          style={{ display: 'block', marginBottom: '5px' }}
        >
          Email:
        </label>
        <input
          type='email'
          id='email'
          value={email} // â† Controlled by state
          onChange={handleEmailChange} // â† Update state on change
          style={{
            width: '100%',
            padding: '10px',
            border: errors.email ? '2px solid red' : '1px solid #ccc',
            borderRadius: '4px',
          }}
        />
        {errors.email && (
          <span style={{ color: 'red', fontSize: '14px' }}>{errors.email}</span>
        )}
        {/* Real-time feedback */}
        {email && !errors.email && (
          <span style={{ color: 'green', fontSize: '14px' }}>âœ“ Valid</span>
        )}
      </div>

      {/* Password Input - CONTROLLED */}
      <div style={{ marginBottom: '20px' }}>
        <label
          htmlFor='password'
          style={{ display: 'block', marginBottom: '5px' }}
        >
          Password:
        </label>
        <div style={{ position: 'relative' }}>
          <input
            type={showPassword ? 'text' : 'password'} // â† Dynamic type based on state
            id='password'
            value={password} // â† Controlled by state
            onChange={handlePasswordChange}
            style={{
              width: '100%',
              padding: '10px',
              paddingRight: '40px',
              border: errors.password ? '2px solid red' : '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
          {/* Toggle password visibility */}
          <button
            type='button'
            onClick={() => setShowPassword(!showPassword)}
            style={{
              position: 'absolute',
              right: '10px',
              top: '50%',
              transform: 'translateY(-50%)',
              background: 'none',
              border: 'none',
              cursor: 'pointer',
            }}
          >
            {showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸'}
          </button>
        </div>
        {errors.password && (
          <span style={{ color: 'red', fontSize: '14px' }}>
            {errors.password}
          </span>
        )}
        {/* Password strength indicator */}
        {password && (
          <div style={{ marginTop: '5px' }}>
            <div
              style={{
                height: '4px',
                backgroundColor: '#e0e0e0',
                borderRadius: '2px',
                overflow: 'hidden',
              }}
            >
              <div
                style={{
                  height: '100%',
                  width: `${Math.min((password.length / 12) * 100, 100)}%`,
                  backgroundColor:
                    password.length < 8
                      ? 'red'
                      : password.length < 12
                        ? 'orange'
                        : 'green',
                  transition: 'all 0.3s',
                }}
              />
            </div>
            <span style={{ fontSize: '12px', color: '#666' }}>
              Strength:{' '}
              {password.length < 8
                ? 'Weak'
                : password.length < 12
                  ? 'Medium'
                  : 'Strong'}
            </span>
          </div>
        )}
      </div>

      {/* Submit Button - Disabled based on state */}
      <button
        type='submit'
        disabled={!email || !password} // â† Dynamic disabled state
        style={{
          width: '100%',
          padding: '12px',
          backgroundColor: !email || !password ? '#ccc' : '#007bff',
          color: 'white',
          border: 'none',
          borderRadius: '4px',
          cursor: !email || !password ? 'not-allowed' : 'pointer',
          fontSize: '16px',
        }}
      >
        Login
      </button>

      {/* Debug: Show current state */}
      <details style={{ marginTop: '20px', fontSize: '12px', color: '#666' }}>
        <summary>Debug State</summary>
        <pre>
          {JSON.stringify({ email, password, showPassword, errors }, null, 2)}
        </pre>
      </details>
    </form>
  );
}

export default LoginForm;
```

**ğŸ” Key Patterns:**

```jsx
// âœ… Controlled Component Pattern
<input
  value={state}           // State controls value
  onChange={(e) => setState(e.target.value)}  // Update state on change
/>

// âœ… Clear Error on Type Pattern
const handleChange = (e) => {
  setValue(e.target.value);
  if (errors.field) {
    setErrors({ ...errors, field: '' });
  }
};

// âœ… Disable Button Based on State
<button disabled={!isValid}>Submit</button>

// âœ… Conditional Input Type
<input type={showPassword ? 'text' : 'password'} />
```

---

### Demo 3: Todo List - State with Arrays â­â­â­

```jsx
/**
 * Todo list application
 * Concepts: Array state, CRUD operations, unique keys
 */
import { useState } from 'react';

function TodoList() {
  const [todos, setTodos] = useState([]);
  const [inputValue, setInputValue] = useState('');
  const [filter, setFilter] = useState('all'); // 'all', 'active', 'completed'

  // Add todo
  const addTodo = () => {
    if (inputValue.trim() === '') return;

    const newTodo = {
      id: Date.now(), // Simple unique ID
      text: inputValue,
      completed: false,
      createdAt: new Date().toISOString(),
    };

    // âœ… Create new array (immutability)
    setTodos([...todos, newTodo]);
    setInputValue(''); // Clear input
  };

  // Toggle todo completion
  const toggleTodo = (id) => {
    setTodos(
      todos.map((todo) =>
        todo.id === id
          ? { ...todo, completed: !todo.completed } // âœ… Create new object
          : todo,
      ),
    );
  };

  // Delete todo
  const deleteTodo = (id) => {
    setTodos(todos.filter((todo) => todo.id !== id));
  };

  // Edit todo
  const editTodo = (id, newText) => {
    setTodos(
      todos.map((todo) => (todo.id === id ? { ...todo, text: newText } : todo)),
    );
  };

  // Clear completed
  const clearCompleted = () => {
    setTodos(todos.filter((todo) => !todo.completed));
  };

  // Filter todos
  const getFilteredTodos = () => {
    switch (filter) {
      case 'active':
        return todos.filter((todo) => !todo.completed);
      case 'completed':
        return todos.filter((todo) => todo.completed);
      default:
        return todos;
    }
  };

  const filteredTodos = getFilteredTodos();
  const activeCount = todos.filter((t) => !t.completed).length;
  const completedCount = todos.filter((t) => t.completed).length;

  return (
    <div style={{ maxWidth: '600px', margin: '0 auto', padding: '20px' }}>
      <h1>Todo List</h1>

      {/* Add Todo */}
      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
        <input
          type='text'
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          onKeyDown={(e) => e.key === 'Enter' && addTodo()}
          placeholder='What needs to be done?'
          style={{
            flex: 1,
            padding: '12px',
            fontSize: '16px',
            border: '1px solid #ccc',
            borderRadius: '4px',
          }}
        />
        <button
          onClick={addTodo}
          disabled={!inputValue.trim()}
          style={{
            padding: '12px 24px',
            backgroundColor: inputValue.trim() ? '#28a745' : '#ccc',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: inputValue.trim() ? 'pointer' : 'not-allowed',
          }}
        >
          Add
        </button>
      </div>

      {/* Filter Tabs */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
          borderBottom: '2px solid #eee',
          paddingBottom: '10px',
        }}
      >
        <button
          onClick={() => setFilter('all')}
          style={{
            padding: '8px 16px',
            backgroundColor: filter === 'all' ? '#007bff' : 'white',
            color: filter === 'all' ? 'white' : 'black',
            border: '1px solid #ccc',
            borderRadius: '4px',
            cursor: 'pointer',
          }}
        >
          All ({todos.length})
        </button>
        <button
          onClick={() => setFilter('active')}
          style={{
            padding: '8px 16px',
            backgroundColor: filter === 'active' ? '#007bff' : 'white',
            color: filter === 'active' ? 'white' : 'black',
            border: '1px solid #ccc',
            borderRadius: '4px',
            cursor: 'pointer',
          }}
        >
          Active ({activeCount})
        </button>
        <button
          onClick={() => setFilter('completed')}
          style={{
            padding: '8px 16px',
            backgroundColor: filter === 'completed' ? '#007bff' : 'white',
            color: filter === 'completed' ? 'white' : 'black',
            border: '1px solid #ccc',
            borderRadius: '4px',
            cursor: 'pointer',
          }}
        >
          Completed ({completedCount})
        </button>
      </div>

      {/* Todo Items */}
      {filteredTodos.length === 0 ? (
        <div style={{ textAlign: 'center', padding: '40px', color: '#999' }}>
          <p style={{ fontSize: '48px', margin: '0' }}>ğŸ“</p>
          <p>No todos {filter !== 'all' && filter}. Add one above!</p>
        </div>
      ) : (
        <ul style={{ listStyle: 'none', padding: 0 }}>
          {filteredTodos.map((todo) => (
            <TodoItem
              key={todo.id} // âœ… Unique key
              todo={todo}
              onToggle={toggleTodo}
              onDelete={deleteTodo}
              onEdit={editTodo}
            />
          ))}
        </ul>
      )}

      {/* Footer */}
      {todos.length > 0 && (
        <div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            marginTop: '20px',
            padding: '10px',
            backgroundColor: '#f5f5f5',
            borderRadius: '4px',
          }}
        >
          <span style={{ fontSize: '14px', color: '#666' }}>
            {activeCount} item{activeCount !== 1 ? 's' : ''} left
          </span>
          {completedCount > 0 && (
            <button
              onClick={clearCompleted}
              style={{
                padding: '6px 12px',
                backgroundColor: '#dc3545',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '14px',
              }}
            >
              Clear completed
            </button>
          )}
        </div>
      )}
    </div>
  );
}

/**
 * Individual Todo Item Component
 */
function TodoItem({ todo, onToggle, onDelete, onEdit }) {
  const [isEditing, setIsEditing] = useState(false);
  const [editValue, setEditValue] = useState(todo.text);

  const handleEdit = () => {
    if (editValue.trim() === '') return;
    onEdit(todo.id, editValue);
    setIsEditing(false);
  };

  const handleCancel = () => {
    setEditValue(todo.text); // Reset to original
    setIsEditing(false);
  };

  return (
    <li
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        padding: '12px',
        marginBottom: '8px',
        backgroundColor: todo.completed ? '#f0f0f0' : 'white',
        border: '1px solid #e0e0e0',
        borderRadius: '4px',
        transition: 'all 0.2s',
      }}
    >
      {/* Checkbox */}
      <input
        type='checkbox'
        checked={todo.completed}
        onChange={() => onToggle(todo.id)}
        style={{ cursor: 'pointer', width: '18px', height: '18px' }}
      />

      {/* Todo Text */}
      {isEditing ? (
        <input
          type='text'
          value={editValue}
          onChange={(e) => setEditValue(e.target.value)}
          onKeyPress={(e) => {
            if (e.key === 'Enter') handleEdit();
            if (e.key === 'Escape') handleCancel();
          }}
          autoFocus
          style={{
            flex: 1,
            padding: '6px',
            fontSize: '16px',
            border: '1px solid #007bff',
            borderRadius: '4px',
          }}
        />
      ) : (
        <span
          onDoubleClick={() => setIsEditing(true)}
          style={{
            flex: 1,
            textDecoration: todo.completed ? 'line-through' : 'none',
            color: todo.completed ? '#999' : 'black',
            cursor: 'pointer',
          }}
        >
          {todo.text}
        </span>
      )}

      {/* Actions */}
      {isEditing ? (
        <>
          <button
            onClick={handleEdit}
            style={{ padding: '4px 8px', fontSize: '12px' }}
          >
            âœ“ Save
          </button>
          <button
            onClick={handleCancel}
            style={{ padding: '4px 8px', fontSize: '12px' }}
          >
            âœ• Cancel
          </button>
        </>
      ) : (
        <>
          <button
            onClick={() => setIsEditing(true)}
            style={{
              padding: '4px 8px',
              backgroundColor: '#ffc107',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontSize: '12px',
            }}
          >
            Edit
          </button>
          <button
            onClick={() => onDelete(todo.id)}
            style={{
              padding: '4px 8px',
              backgroundColor: '#dc3545',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontSize: '12px',
            }}
          >
            Delete
          </button>
        </>
      )}
    </li>
  );
}

export default TodoList;
```

**ğŸ” Array State Operations:**

```jsx
// âœ… ADD to array
setTodos([...todos, newTodo]);
setTodos(todos.concat(newTodo));

// âœ… REMOVE from array
setTodos(todos.filter((todo) => todo.id !== idToRemove));

// âœ… UPDATE in array
setTodos(
  todos.map((todo) =>
    todo.id === idToUpdate
      ? { ...todo, completed: !todo.completed } // New object
      : todo,
  ),
);

// âœ… SORT array
setTodos([...todos].sort((a, b) => a.text.localeCompare(b.text)));

// âŒ NEVER mutate directly
todos.push(newTodo); // NO!
todos[0] = newTodo; // NO!
todos.splice(0, 1); // NO!
```

---

## ğŸ”¨ PHáº¦N 3: BÃ€I Táº¬P THá»°C HÃ€NH (90 phÃºt)

### â­ Exercise 1: Toggle Switch Component (15 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Táº¡o toggle switch vá»›i useState
 * â±ï¸ Thá»i gian: 15 phÃºt
 * ğŸš« KHÃ”NG dÃ¹ng: useEffect, useReducer
 *
 * Requirements:
 * 1. Toggle switch cÃ³ 2 states: ON/OFF
 * 2. Click Ä‘á»ƒ toggle
 * 3. Hiá»ƒn thá»‹ status text
 * 4. Thay Ä‘á»•i mÃ u background khi ON/OFF
 * 5. Disable option (prop)
 *
 * ğŸ’¡ Gá»£i Ã½:
 * - useState(false) cho ON/OFF state
 * - onClick={() => setIsOn(!isOn)}
 * - Conditional styling based on state
 */

// âŒ CÃ¡ch SAI: KhÃ´ng dÃ¹ng state
function ToggleSwitchWrong({ label }) {
  let isOn = false; // âŒ Plain variable won't trigger re-render

  const toggle = () => {
    isOn = !isOn; // âŒ Changes value but UI won't update
    console.log(isOn);
  };

  return (
    <button onClick={toggle}>
      {label}: {isOn ? 'ON' : 'OFF'}
    </button>
  );
}

// âœ… CÃ¡ch ÄÃšNG: DÃ¹ng useState
function ToggleSwitchCorrect({ label = 'Switcher', disabled = false }) {
  const [isOn, setIsOn] = useState(false);

  const toggle = () => {
    if (!disabled) {
      setIsOn(!isOn);
    }
  };

  return (
    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
      <span>{label}:</span>
      <button
        onClick={toggle}
        disabled={disabled}
        style={{
          width: '60px',
          height: '30px',
          backgroundColor: isOn ? '#28a745' : '#ccc',
          border: 'none',
          borderRadius: '15px',
          position: 'relative',
          cursor: disabled ? 'not-allowed' : 'pointer',
          transition: 'background-color 0.3s',
        }}
      >
        <div
          style={{
            width: '26px',
            height: '26px',
            backgroundColor: 'white',
            borderRadius: '50%',
            position: 'absolute',
            top: '2px',
            left: isOn ? '32px' : '2px',
            transition: 'left 0.3s',
          }}
        />
      </button>
      <span>{isOn ? 'ON' : 'OFF'}</span>
    </div>
  );
}
```

---

### â­â­ Exercise 2: Shopping Cart (30 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Quáº£n lÃ½ shopping cart state
 * â±ï¸ Thá»i gian: 30 phÃºt
 *
 * Requirements:
 * 1. Add product to cart
 * 2. Remove product from cart
 * 3. Update quantity (increment/decrement)
 * 4. Calculate total price
 * 5. Clear cart
 * 6. Show cart count in header
 *
 * Data structure:
 * cartItems: [
 *   { id, name, price, quantity }
 * ]
 */

function ShoppingCart() {
  const [cartItems, setCartItems] = useState([]);

  const products = [
    { id: 1, name: 'Laptop', price: 999 },
    { id: 2, name: 'Mouse', price: 29 },
    { id: 3, name: 'Keyboard', price: 79 },
  ];

  // TODO: Implement addToCart
  const addToCart = (product) => {
    // Check if product already in cart
    const existingItem = cartItems.find((item) => item.id === product.id);

    if (existingItem) {
      // Increase quantity
      setCartItems(
        cartItems.map((item) =>
          item.id === product.id
            ? { ...item, quantity: item.quantity + 1 }
            : item,
        ),
      );
    } else {
      // Add new item
      setCartItems([...cartItems, { ...product, quantity: 1 }]);
    }
  };

  // TODO: Implement removeFromCart
  const removeFromCart = (productId) => {
    setCartItems(cartItems.filter((item) => item.id !== productId));
  };

  // TODO: Implement updateQuantity
  const updateQuantity = (productId, newQuantity) => {
    if (newQuantity < 1) {
      removeFromCart(productId);
      return;
    }

    setCartItems(
      cartItems.map((item) =>
        item.id === productId ? { ...item, quantity: newQuantity } : item,
      ),
    );
  };

  // TODO: Calculate total
  const total = cartItems.reduce(
    (sum, item) => sum + item.price * item.quantity,
    0,
  );
  const itemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);

  return (
    <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px' }}>
      <h1>Shopping Cart ({itemCount} items)</h1>

      {/* Product List */}
      <div style={{ marginBottom: '30px' }}>
        <h2>Products</h2>
        <div style={{ display: 'grid', gap: '10px' }}>
          {products.map((product) => (
            <div
              key={product.id}
              style={{
                display: 'flex',
                justifyContent: 'space-between',
                padding: '10px',
                border: '1px solid #ccc',
                borderRadius: '4px',
              }}
            >
              <span>
                {product.name} - ${product.price}
              </span>
              <button onClick={() => addToCart(product)}>Add to Cart</button>
            </div>
          ))}
        </div>
      </div>

      {/* Cart Items */}
      <div>
        <h2>Cart</h2>
        {cartItems.length === 0 ? (
          <p>Cart is empty</p>
        ) : (
          <>
            {cartItems.map((item) => (
              <div
                key={item.id}
                style={{
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center',
                  padding: '10px',
                  border: '1px solid #ccc',
                  borderRadius: '4px',
                  marginBottom: '10px',
                }}
              >
                <span>{item.name}</span>
                <div
                  style={{ display: 'flex', gap: '10px', alignItems: 'center' }}
                >
                  <button
                    onClick={() => updateQuantity(item.id, item.quantity - 1)}
                  >
                    -
                  </button>
                  <span>{item.quantity}</span>
                  <button
                    onClick={() => updateQuantity(item.id, item.quantity + 1)}
                  >
                    +
                  </button>
                  <span>${item.price * item.quantity}</span>
                  <button onClick={() => removeFromCart(item.id)}>
                    Remove
                  </button>
                </div>
              </div>
            ))}

            {/* Total */}
            <div
              style={{
                marginTop: '20px',
                padding: '15px',
                backgroundColor: '#f5f5f5',
                borderRadius: '4px',
                display: 'flex',
                justifyContent: 'space-between',
                fontSize: '20px',
                fontWeight: 'bold',
              }}
            >
              <span>Total:</span>
              <span>${total.toFixed(2)}</span>
            </div>

            <button
              onClick={() => setCartItems([])}
              style={{
                marginTop: '10px',
                width: '100%',
                padding: '10px',
                backgroundColor: '#dc3545',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
              }}
            >
              Clear Cart
            </button>
          </>
        )}
      </div>
    </div>
  );
}
```

---

### â­â­â­ Exercise 3: Multi-Step Form vá»›i useState (45 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Form nhiá»u bÆ°á»›c vá»›i state management
 * â±ï¸ Thá»i gian: 45 phÃºt
 *
 * Requirements:
 * 1. 3 steps: Personal Info, Address, Review
 * 2. Next/Back navigation
 * 3. Progress indicator
 * 4. Data persistence across steps
 * 5. Validation per step
 * 6. Final submission
 *
 * ğŸ’¡ Gá»£i Ã½:
 * - currentStep state (1, 2, 3)
 * - formData state (object vá»›i táº¥t cáº£ fields)
 * - errors state
 * - Conditional rendering based on currentStep
 */

function MultiStepForm() {
  const [currentStep, setCurrentStep] = useState(1);
  const [formData, setFormData] = useState({
    // Step 1
    firstName: '',
    lastName: '',
    email: '',
    phone: '',
    // Step 2
    address: '',
    city: '',
    zipCode: '',
    country: '',
  });
  const [errors, setErrors] = useState({});

  // Update form field
  const updateField = (field, value) => {
    setFormData({ ...formData, [field]: value });
    // Clear error when user types
    if (errors[field]) {
      setErrors({ ...errors, [field]: '' });
    }
  };

  // Validate Step 1
  const validateStep1 = () => {
    const newErrors = {};
    if (!formData.firstName) newErrors.firstName = 'First name is required';
    if (!formData.lastName) newErrors.lastName = 'Last name is required';
    if (!formData.email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      newErrors.email = 'Valid email is required';
    }
    if (!formData.phone || !/^[0-9]{10}$/.test(formData.phone)) {
      newErrors.phone = 'Valid 10-digit phone is required';
    }
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  // Validate Step 2
  const validateStep2 = () => {
    const newErrors = {};
    if (!formData.address) newErrors.address = 'Address is required';
    if (!formData.city) newErrors.city = 'City is required';
    if (!formData.zipCode || !/^[0-9]{5}$/.test(formData.zipCode)) {
      newErrors.zipCode = 'Valid 5-digit ZIP is required';
    }
    if (!formData.country) newErrors.country = 'Country is required';
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  // Navigation
  const goNext = () => {
    let isValid = false;

    if (currentStep === 1) isValid = validateStep1();
    if (currentStep === 2) isValid = validateStep2();

    if (isValid) {
      setCurrentStep((prev) => prev + 1);
    }
  };

  const goBack = () => {
    setCurrentStep((prev) => prev - 1);
  };

  // Submit
  const handleSubmit = () => {
    console.log('âœ… Form submitted:', formData);
    alert('Registration complete!');
    // Reset
    setCurrentStep(1);
    setFormData({
      firstName: '',
      lastName: '',
      email: '',
      phone: '',
      address: '',
      city: '',
      zipCode: '',
      country: '',
    });
  };

  // Progress percentage
  const progress = (currentStep / 3) * 100;

  return (
    <div style={{ maxWidth: '600px', margin: '0 auto', padding: '20px' }}>
      <h1>Registration Form</h1>

      {/* Progress Bar */}
      <div style={{ marginBottom: '30px' }}>
        <div
          style={{
            display: 'flex',
            justifyContent: 'space-between',
            marginBottom: '10px',
          }}
        >
          <span style={{ fontWeight: currentStep >= 1 ? 'bold' : 'normal' }}>
            1. Personal Info
          </span>
          <span style={{ fontWeight: currentStep >= 2 ? 'bold' : 'normal' }}>
            2. Address
          </span>
          <span style={{ fontWeight: currentStep >= 3 ? 'bold' : 'normal' }}>
            3. Review
          </span>
        </div>
        <div
          style={{
            height: '8px',
            backgroundColor: '#e0e0e0',
            borderRadius: '4px',
            overflow: 'hidden',
          }}
        >
          <div
            style={{
              width: `${progress}%`,
              height: '100%',
              backgroundColor: '#007bff',
              transition: 'width 0.3s',
            }}
          />
        </div>
      </div>

      {/* Step 1: Personal Info */}
      {currentStep === 1 && (
        <div>
          <h2>Personal Information</h2>

          <div style={{ marginBottom: '15px' }}>
            <label>First Name *</label>
            <input
              type='text'
              value={formData.firstName}
              onChange={(e) => updateField('firstName', e.target.value)}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.firstName ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.firstName && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.firstName}
              </span>
            )}
          </div>

          <div style={{ marginBottom: '15px' }}>
            <label>Last Name: *</label>
            <input
              type='text'
              value={formData.lastName}
              onChange={(e) => updateField('lastName', e.target.value)}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.lastName ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.lastName && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.lastName}
              </span>
            )}
          </div>

          <div style={{ marginBottom: '15px' }}>
            <label>Email: *</label>
            <input
              type='email'
              value={formData.email}
              onChange={(e) => updateField('email', e.target.value)}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.email ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.email && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.email}
              </span>
            )}
          </div>

          <div style={{ marginBottom: '15px' }}>
            <label>Phone: *</label>
            <input
              type='tel'
              value={formData.phone}
              onChange={(e) => updateField('phone', e.target.value)}
              placeholder='10 digits'
              style={{
                width: '100%',
                padding: '10px',
                border: errors.phone ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.phone && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.phone}
              </span>
            )}
          </div>
        </div>
      )}

      {/* Step 2: Address */}
      {currentStep === 2 && (
        <div>
          <h2>Address Information</h2>

          <div style={{ marginBottom: '15px' }}>
            <label>Street Address: *</label>
            <input
              type='text'
              value={formData.address}
              onChange={(e) => updateField('address', e.target.value)}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.address ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.address && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.address}
              </span>
            )}
          </div>

          <div style={{ marginBottom: '15px' }}>
            <label>City: *</label>
            <input
              type='text'
              value={formData.city}
              onChange={(e) => updateField('city', e.target.value)}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.city ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.city && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.city}
              </span>
            )}
          </div>

          <div style={{ marginBottom: '15px' }}>
            <label>ZIP Code: *</label>
            <input
              type='text'
              value={formData.zipCode}
              onChange={(e) => updateField('zipCode', e.target.value)}
              placeholder='5 digits'
              maxLength={5}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.zipCode ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            />
            {errors.zipCode && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.zipCode}
              </span>
            )}
          </div>

          <div style={{ marginBottom: '15px' }}>
            <label>Country: *</label>
            <select
              value={formData.country}
              onChange={(e) => updateField('country', e.target.value)}
              style={{
                width: '100%',
                padding: '10px',
                border: errors.country ? '2px solid red' : '1px solid #ccc',
                borderRadius: '4px',
              }}
            >
              <option value=''>-- Select Country --</option>
              <option value='US'>United States</option>
              <option value='CA'>Canada</option>
              <option value='UK'>United Kingdom</option>
              <option value='VN'>Vietnam</option>
            </select>
            {errors.country && (
              <span style={{ color: 'red', fontSize: '14px' }}>
                {errors.country}
              </span>
            )}
          </div>
        </div>
      )}

      {/* Step 3: Review */}
      {currentStep === 3 && (
        <div>
          <h2>Review Your Information</h2>

          <div
            style={{
              backgroundColor: '#f8f9fa',
              padding: '20px',
              borderRadius: '8px',
              marginBottom: '20px',
            }}
          >
            <h3 style={{ marginTop: 0 }}>Personal Information</h3>
            <p>
              <strong>Name:</strong> {formData.firstName} {formData.lastName}
            </p>
            <p>
              <strong>Email:</strong> {formData.email}
            </p>
            <p>
              <strong>Phone:</strong> {formData.phone}
            </p>

            <h3>Address</h3>
            <p>
              <strong>Street:</strong> {formData.address}
            </p>
            <p>
              <strong>City:</strong> {formData.city}
            </p>
            <p>
              <strong>ZIP:</strong> {formData.zipCode}
            </p>
            <p>
              <strong>Country:</strong> {formData.country}
            </p>
          </div>

          <p style={{ fontSize: '14px', color: '#666' }}>
            Please review your information carefully before submitting.
          </p>
        </div>
      )}

      {/* Navigation Buttons */}
      <div
        style={{
          display: 'flex',
          justifyContent: 'space-between',
          marginTop: '30px',
        }}
      >
        <button
          onClick={goBack}
          disabled={currentStep === 1}
          style={{
            padding: '12px 24px',
            backgroundColor: currentStep === 1 ? '#ccc' : 'white',
            color: currentStep === 1 ? '#999' : 'black',
            border: '1px solid #ccc',
            borderRadius: '4px',
            cursor: currentStep === 1 ? 'not-allowed' : 'pointer',
          }}
        >
          â† Back
        </button>

        {currentStep < 3 ? (
          <button
            onClick={goNext}
            style={{
              padding: '12px 24px',
              backgroundColor: '#007bff',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
            }}
          >
            Next â†’
          </button>
        ) : (
          <button
            onClick={handleSubmit}
            style={{
              padding: '12px 24px',
              backgroundColor: '#28a745',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
            }}
          >
            Submit
          </button>
        )}
      </div>
    </div>
  );
}
```

**ğŸ” Key State Management Patterns:**

```jsx
// âœ… Single formData object for all fields
const [formData, setFormData] = useState({
  field1: '',
  field2: '',
  // ...
});

// âœ… Update specific field (immutably)
const updateField = (field, value) => {
  setFormData({ ...formData, [field]: value });
};

// âœ… Track current step
const [currentStep, setCurrentStep] = useState(1);

// âœ… Conditional rendering based on step
{
  currentStep === 1 && <Step1Form />;
}
{
  currentStep === 2 && <Step2Form />;
}

// âœ… Validation per step
const validateStep1 = () => {
  // Return true/false
  // Set errors if needed
};
```

---

### â­â­â­â­ Exercise 4: Refactor NgÃ y 10 Project vá»›i useState (60 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Refactor Product Catalog tá»« NgÃ y 10
 * â±ï¸ Thá»i gian: 60 phÃºt
 *
 * Tasks:
 * 1. Remove all DOM manipulation
 * 2. Replace vá»›i useState
 * 3. Proper filter/search vá»›i state
 * 4. Clean, declarative code
 *
 * State needed:
 * - searchQuery
 * - selectedCategory
 * - selectedPriceRange
 * - selectedProduct (for detail modal)
 * - cartItems
 */

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
/**
 * 1. Refactor SearchBar component:
 *    - Controlled input vá»›i value prop
 *    - onChange updates parent state
 *
 * 2. Refactor FilterPanel:
 *    - Highlight active category based on state
 *    - No manual DOM manipulation
 *
 * 3. Refactor ProductGrid:
 *    - Just render filtered products
 *    - No filtering logic inside
 *
 * 4. Compare code vá»›i NgÃ y 10:
 *    - Ãt code hÆ¡n?
 *    - Dá»… hiá»ƒu hÆ¡n?
 *    - Dá»… maintain hÆ¡n?
 */

import { useState } from 'react';
import { products } from './data/products';

function ProductCatalogRefactored() {
  // âœ… All state in one place
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('all');
  const [selectedPriceRange, setSelectedPriceRange] = useState(null);
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [cartItems, setCartItems] = useState([]);

  // âœ… Derived state - computed from other state
  const filteredProducts = products.filter((product) => {
    // Search filter
    const matchesSearch =
      product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      product.description.toLowerCase().includes(searchQuery.toLowerCase());

    // Category filter
    const matchesCategory =
      selectedCategory === 'all' || product.category === selectedCategory;

    // Price filter
    const matchesPrice =
      !selectedPriceRange ||
      (product.price >= selectedPriceRange.min &&
        product.price <= selectedPriceRange.max);

    return matchesSearch && matchesCategory && matchesPrice;
  });

  // âœ… Event handlers
  const handleSearch = (query) => {
    setSearchQuery(query);
  };

  const handleCategoryChange = (category) => {
    setSelectedCategory(category);
  };

  const handlePriceChange = (range) => {
    setSelectedPriceRange(range);
  };

  const handleViewDetail = (product) => {
    setSelectedProduct(product);
  };

  const handleCloseDetail = () => {
    setSelectedProduct(null);
  };

  const addToCart = (product) => {
    const existingItem = cartItems.find((item) => item.id === product.id);

    if (existingItem) {
      setCartItems(
        cartItems.map((item) =>
          item.id === product.id
            ? { ...item, quantity: item.quantity + 1 }
            : item,
        ),
      );
    } else {
      setCartItems([...cartItems, { ...product, quantity: 1 }]);
    }
  };

  const cartCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);

  return (
    <div style={{ minHeight: '100vh', backgroundColor: '#f8fafc' }}>
      <Header cartCount={cartCount} />

      <main
        style={{ maxWidth: '1400px', margin: '0 auto', padding: '40px 20px' }}
      >
        {/* Search Bar */}
        <SearchBar
          searchQuery={searchQuery}
          onSearch={handleSearch}
        />

        <div
          style={{
            display: 'grid',
            gridTemplateColumns: '300px 1fr',
            gap: '32px',
          }}
        >
          {/* Filters */}
          <FilterPanel
            selectedCategory={selectedCategory}
            selectedPriceRange={selectedPriceRange}
            onCategoryChange={handleCategoryChange}
            onPriceChange={handlePriceChange}
          />

          {/* Products */}
          <ProductGrid
            products={filteredProducts}
            onViewDetail={handleViewDetail}
            onAddToCart={addToCart}
          />
        </div>
      </main>

      {/* Product Detail Modal */}
      {selectedProduct && (
        <ProductDetail
          product={selectedProduct}
          onClose={handleCloseDetail}
          onAddToCart={addToCart}
        />
      )}
    </div>
  );
}
```

**Before & After Comparison:**

```jsx
// âŒ NGÃ€Y 10: The Hacky Way
function App() {
  let currentCategory = 'all';

  const filterProducts = (category) => {
    currentCategory = category;

    // Manual DOM update
    const container = document.getElementById('products');
    const filtered = products.filter(
      (p) => currentCategory === 'all' || p.category === currentCategory,
    );

    // Custom event dispatch
    window.dispatchEvent(new CustomEvent('filter', { detail: filtered }));
  };

  return <div>...</div>;
}

// âœ… NGÃ€Y 11: The React Way
function App() {
  const [selectedCategory, setSelectedCategory] = useState('all');

  const filteredProducts = products.filter(
    (p) => selectedCategory === 'all' || p.category === selectedCategory,
  );

  return (
    <div>
      <button onClick={() => setSelectedCategory('laptop')}>Laptops</button>
      <ProductGrid products={filteredProducts} />
    </div>
  );
}
```

---

### â­â­â­â­â­ Exercise 5: Advanced State Patterns (90 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Há»c advanced useState patterns
 * â±ï¸ Thá»i gian: 90 phÃºt
 *
 * type Filter = 'all' | 'active' | 'completed';
 * type SortBy = 'date' | 'name';
 *
 *  interface Todo {
 *    id: number;
 *    text: string;
 *    completed: boolean;
 *    createdAt: string;
 *  }
 *
 * Features:
 * 1. Undo/Redo functionality
 * 2. Local storage persistence
 * 3. Optimistic updates
 * 4. Debounced search
 * 5. Complex state updates
 * 6. History kiá»ƒu Todo[][]
 */

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
/**
 * Implement cÃ¡c missing features:
 * 1. Add todo input
 * 2. Toggle individual todo
 * 3. Delete todo (vá»›i history)
 * 4. Edit todo (vá»›i history)
 * 5. localStorage persistence
 */

function AdvancedTodoList() {
  // Main todo state
  const [todos, setTodos] = useState([]);

  // History for undo/redo
  const [history, setHistory] = useState([]);
  const [historyIndex, setHistoryIndex] = useState(-1);

  // UI state
  const [filter, setFilter] = useState('all');
  const [sortBy, setSortBy] = useState('date');
  const [searchQuery, setSearchQuery] = useState('');

  // âœ… PATTERN 1: Function Form for Complex Updates
  const addTodo = (text) => {
    setTodos((prevTodos) => {
      const newTodo = {
        id: Date.now(),
        text,
        completed: false,
        createdAt: new Date().toISOString(),
      };

      const newTodos = [...prevTodos, newTodo];

      // Save to history
      saveToHistory(newTodos);

      // Save to localStorage
      localStorage.setItem('todos', JSON.stringify(newTodos));

      return newTodos;
    });
  };

  // âœ… PATTERN 2: Batch Updates
  const toggleAllTodos = () => {
    setTodos((prevTodos) => {
      const allCompleted = prevTodos.every((t) => t.completed);
      const newTodos = prevTodos.map((todo) => ({
        ...todo,
        completed: !allCompleted,
      }));

      saveToHistory(newTodos);
      localStorage.setItem('todos', JSON.stringify(newTodos));

      return newTodos;
    });
  };

  // âœ… PATTERN 3: History Management
  const saveToHistory = (newTodos) => {
    setHistory((prevHistory) => {
      // Remove future history if we're in the middle
      const newHistory = prevHistory.slice(0, historyIndex + 1);
      return [...newHistory, newTodos];
    });
    setHistoryIndex((prev) => prev + 1);
  };

  const undo = () => {
    if (historyIndex > 0) {
      setHistoryIndex(historyIndex - 1);
      setTodos(history[historyIndex - 1]);
      localStorage.setItem('todos', JSON.stringify(history[historyIndex - 1]));
    }
  };

  const redo = () => {
    if (historyIndex < history.length - 1) {
      setHistoryIndex(historyIndex + 1);
      setTodos(history[historyIndex + 1]);
      localStorage.setItem('todos', JSON.stringify(history[historyIndex + 1]));
    }
  };

  // âœ… PATTERN 4: Derived State
  const filteredAndSortedTodos = todos
    .filter((todo) => {
      // Filter
      if (filter === 'active') return !todo.completed;
      if (filter === 'completed') return todo.completed;

      // Search
      if (searchQuery) {
        return todo.text.toLowerCase().includes(searchQuery.toLowerCase());
      }

      return true;
    })
    .sort((a, b) => {
      // Sort
      if (sortBy === 'date') {
        return new Date(b.createdAt) - new Date(a.createdAt);
      } else if (sortBy === 'name') {
        return a.text.localeCompare(b.text);
      }
      return 0;
    });

  // âœ… PATTERN 5: Load from localStorage on mount
  // Note: This is a preview of useEffect (NgÃ y 17)
  // For now, just understand the concept
  const loadFromStorage = () => {
    const saved = localStorage.getItem('todos');
    if (saved) {
      const parsedTodos = JSON.parse(saved);
      setTodos(parsedTodos);
      setHistory([parsedTodos]);
      setHistoryIndex(0);
    }
  };

  // Call once on component mount (manual for now)
  // loadFromStorage(); // Uncomment nÃ y sau khi há»c useEffect

  return (
    <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px' }}>
      <h1>Advanced Todo List</h1>

      {/* Toolbar */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
          padding: '15px',
          backgroundColor: '#f5f5f5',
          borderRadius: '8px',
        }}
      >
        {/* Undo/Redo */}
        <button
          onClick={undo}
          disabled={historyIndex <= 0}
          style={{
            padding: '8px 16px',
            backgroundColor: historyIndex <= 0 ? '#ccc' : '#007bff',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: historyIndex <= 0 ? 'not-allowed' : 'pointer',
          }}
        >
          â†¶ Undo
        </button>
        <button
          onClick={redo}
          disabled={historyIndex >= history.length - 1}
          style={{
            padding: '8px 16px',
            backgroundColor:
              historyIndex >= history.length - 1 ? '#ccc' : '#007bff',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor:
              historyIndex >= history.length - 1 ? 'not-allowed' : 'pointer',
          }}
        >
          â†· Redo
        </button>

        {/* Sort */}
        <select
          value={sortBy}
          onChange={(e) => setSortBy(e.target.value)}
          style={{
            padding: '8px',
            borderRadius: '4px',
            border: '1px solid #ccc',
          }}
        >
          <option value='date'>Sort by Date</option>
          <option value='name'>Sort by Name</option>
        </select>

        {/* Toggle All */}
        <button
          onClick={toggleAllTodos}
          style={{
            padding: '8px 16px',
            backgroundColor: '#28a745',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
          }}
        >
          Toggle All
        </button>
      </div>

      {/* Search */}
      <input
        type='text'
        value={searchQuery}
        onChange={(e) => setSearchQuery(e.target.value)}
        placeholder='Search todos...'
        style={{
          width: '100%',
          padding: '12px',
          marginBottom: '20px',
          border: '1px solid #ccc',
          borderRadius: '4px',
          fontSize: '16px',
        }}
      />

      {/* Filter Tabs */}
      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
        {['all', 'active', 'completed'].map((f) => (
          <button
            key={f}
            onClick={() => setFilter(f)}
            style={{
              padding: '8px 16px',
              backgroundColor: filter === f ? '#007bff' : 'white',
              color: filter === f ? 'white' : 'black',
              border: '1px solid #ccc',
              borderRadius: '4px',
              cursor: 'pointer',
              textTransform: 'capitalize',
            }}
          >
            {f}
          </button>
        ))}
      </div>

      {/* Todo List */}
      <div>
        {filteredAndSortedTodos.map((todo) => (
          <div
            key={todo.id}
            style={{
              padding: '12px',
              marginBottom: '8px',
              backgroundColor: 'white',
              border: '1px solid #e0e0e0',
              borderRadius: '4px',
            }}
          >
            {todo.text}
          </div>
        ))}
      </div>

      {/* Stats */}
      <div
        style={{
          marginTop: '20px',
          padding: '15px',
          backgroundColor: '#f5f5f5',
          borderRadius: '8px',
          fontSize: '14px',
        }}
      >
        <p>
          Total: {todos.length} | Active:{' '}
          {todos.filter((t) => !t.completed).length} | Completed:{' '}
          {todos.filter((t) => t.completed).length}
        </p>
        <p>
          History: Step {historyIndex + 1} of {history.length}
        </p>
      </div>
    </div>
  );
}
```

---

## ğŸ“Š PHáº¦N 4: SO SÃNH PATTERNS (30 phÃºt)

### State Management Decision Tree

```
Cáº§n quáº£n lÃ½ data thay Ä‘á»•i?
â”‚
â”œâ”€> NO â”€â”€> Props hoáº·c constants
â”‚
â””â”€> YES
    â”‚
    â”œâ”€> Data tá»« parent component?
    â”‚   â””â”€> YES â”€â”€> Props (data flows down)
    â”‚
    â””â”€> Data owned by this component?
        â””â”€> YES
            â”‚
            â”œâ”€> Simple value (string, number, boolean)?
            â”‚   â””â”€> YES â”€â”€> useState(primitive)
            â”‚
            â”œâ”€> Array or Object?
            â”‚   â””â”€> YES
            â”‚       â”‚
            â”‚       â”œâ”€> Simple CRUD operations?
            â”‚       â”‚   â””â”€> YES â”€â”€> useState(array/object)
            â”‚       â”‚
            â”‚       â””â”€> Complex updates? Multiple related states?
            â”‚           â””â”€> YES â”€â”€> useReducer (NgÃ y 12)
            â”‚
            â””â”€> Shared across many components?
                â””â”€> YES â”€â”€> Context API (NgÃ y 14) or State Management Library
```

---

### Báº£ng So SÃ¡nh: State Solutions

| Scenario          | Solution                                | Example                                                     |
| ----------------- | --------------------------------------- | ----------------------------------------------------------- |
| Toggle visibility | `useState(boolean)`                     | `const [isOpen, setIsOpen] = useState(false)`               |
| Form input        | `useState(string)`                      | `const [email, setEmail] = useState('')`                    |
| Counter           | `useState(number)`                      | `const [count, setCount] = useState(0)`                     |
| Todo list         | `useState(array)`                       | `const [todos, setTodos] = useState([])`                    |
| User profile      | `useState(object)`                      | `const [user, setUser] = useState({ name: '', email: '' })` |
| Multi-step form   | `useState(number)` + `useState(object)` | Step counter + form data                                    |
| Shopping cart     | `useState(array)`                       | Array of cart items                                         |
| Complex form      | `useReducer` (NgÃ y 12)                  | Form vá»›i nhiá»u fields vÃ  validation                         |
| Global auth state | Context API (NgÃ y 14)                   | User authentication status                                  |

---

### Common Patterns & Best Practices

```jsx
// âœ… PATTERN 1: Separate vs Combined State
// When to separate:
const [firstName, setFirstName] = useState('');
const [lastName, setLastName] = useState('');
const [email, setEmail] = useState('');
// â†‘ Use when: Fields updated independently, simple validation

// When to combine:
const [formData, setFormData] = useState({
  firstName: '',
  lastName: '',
  email: '',
});
// â†‘ Use when: Fields submitted together, cross-field validation

// âœ… PATTERN 2: Derived State (Don't store computed values)
// âŒ BAD:
const [todos, setTodos] = useState([]);
const [completedCount, setCompletedCount] = useState(0); // âŒ Redundant!

// âœ… GOOD:
const [todos, setTodos] = useState([]);
const completedCount = todos.filter((t) => t.completed).length; // âœ… Computed

// âœ… PATTERN 3: Update Objects Immutably
const [user, setUser] = useState({ name: 'John', age: 30 });

// âŒ BAD:
user.age = 31;
setUser(user); // Won't trigger re-render!

// âœ… GOOD:
setUser({ ...user, age: 31 }); // New object

// âœ… PATTERN 4: Update Arrays Immutably
const [items, setItems] = useState([1, 2, 3]);

// âŒ BAD:
items.push(4);
setItems(items); // Won't trigger re-render!

// âœ… GOOD:
setItems([...items, 4]); // New array

// âœ… PATTERN 5: Function Form for Updates Based on Previous State
// âŒ RISKY:
setCount(count + 1);
setCount(count + 1); // Still count + 1, not count + 2!

// âœ… SAFE:
setCount((prev) => prev + 1);
setCount((prev) => prev + 1); // Now it's prev + 2!
```

---

## ğŸ§ª PHáº¦N 5: DEBUG LAB (25 phÃºt)

### Bug 1: State Not Updating âš ï¸

```jsx
// âŒ BUG: Clicking button doesn't update UI
function BuggyCounter() {
  let count = 0; // âŒ Regular variable, not state!

  const increment = () => {
    count = count + 1;
    console.log('Count:', count); // Logs correctly
    // But UI doesn't update!
  };

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={increment}>+1</button>
    </div>
  );
}

// ğŸ¤” QUESTIONS:
// 1. Why doesn't the UI update?
// 2. What's the difference between `let count` and `useState`?
// 3. How to fix?

// âœ… SOLUTION:
function FixedCounter() {
  const [count, setCount] = useState(0); // âœ… Use useState!

  const increment = () => {
    setCount(count + 1); // âœ… Triggers re-render
  };

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={increment}>+1</button>
    </div>
  );
}

// ğŸ“š EXPLANATION:
// - Regular variables don't trigger re-renders
// - Only state changes (setState calls) trigger re-renders
// - useState provides React-managed state that persists across renders
```

---

### Bug 2: Stale State in Event Handler âš ï¸

```jsx
// âŒ BUG: Increment by 3 doesn't work
function BuggyCounter() {
  const [count, setCount] = useState(0);

  const incrementBy3 = () => {
    setCount(count + 1); // count = 0, so 0 + 1 = 1
    setCount(count + 1); // count still 0, so 0 + 1 = 1
    setCount(count + 1); // count still 0, so 0 + 1 = 1
    // Result: count = 1, not 3!
  };

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={incrementBy3}>+3</button>
    </div>
  );
}

// ğŸ¤” QUESTIONS:
// 1. Why is count still 0 in all three setCount calls?
// 2. What is "stale closure"?
// 3. How to fix?

// âœ… SOLUTION:
function FixedCounter() {
  const [count, setCount] = useState(0);

  const incrementBy3 = () => {
    setCount((prev) => prev + 1); // prev = 0, result = 1
    setCount((prev) => prev + 1); // prev = 1, result = 2
    setCount((prev) => prev + 1); // prev = 2, result = 3
    // Result: count = 3 âœ…
  };

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={incrementBy3}>+3</button>
    </div>
  );
}

// ğŸ“š EXPLANATION:
// - setState is asynchronous - doesn't update immediately
// - count variable captures value at time function was created (closure)
// - Function form `setState(prev => ...)` always gets latest value
// - RULE: Use function form when new state depends on old state
```

---

### Bug 3: Mutating State Directly âš ï¸

```jsx
// âŒ BUG: Todo doesn't toggle
function BuggyTodoList() {
  const [todos, setTodos] = useState([
    { id: 1, text: 'Learn React', completed: false },
  ]);

  const toggleTodo = (id) => {
    const todo = todos.find((t) => t.id === id);
    todo.completed = !todo.completed; // âŒ Mutating directly!
    setTodos(todos); // âŒ Same array reference, no re-render!
  };

  return (
    <div>
      {todos.map((todo) => (
        <div key={todo.id}>
          <input
            type='checkbox'
            checked={todo.completed}
            onChange={() => toggleTodo(todo.id)}
          />
          {todo.text}
        </div>
      ))}
    </div>
  );
}

// ğŸ¤” QUESTIONS:
// 1. Why doesn't the checkbox update?
// 2. What's wrong with mutating the object?
// 3. How to properly update nested state?

// âœ… SOLUTION:
function FixedTodoList() {
  const [todos, setTodos] = useState([
    { id: 1, text: 'Learn React', completed: false },
  ]);

  const toggleTodo = (id) => {
    // âœ… Create NEW array with NEW objects
    setTodos(
      todos.map((todo) =>
        todo.id === id
          ? { ...todo, completed: !todo.completed } // âœ… New object
          : todo,
      ),
    );
  };

  return (
    <div>
      {todos.map((todo) => (
        <div key={todo.id}>
          <input
            type='checkbox'
            checked={todo.completed}
            onChange={() => toggleTodo(todo.id)}
          />
          {todo.text}
        </div>
      ))}
    </div>
  );
}

// ğŸ“š EXPLANATION:
// - React compares state by reference (===)
// - If reference is same, React assumes nothing changed
// - MUST create new array/object for React to detect change
// - Use spread operator (...) or array methods that return new arrays
```

---

## âœ… PHáº¦N 6: Tá»° ÄÃNH GIÃ (15 phÃºt)

### Knowledge Check

ÄÃ¡nh dáº¥u âœ… nhá»¯ng Ä‘iá»u báº¡n Ä‘Ã£ hiá»ƒu:

**useState Basics:**

- [ ] Hiá»ƒu useState hook syntax
- [ ] Biáº¿t cÃ¡ch declare vÃ  use state
- [ ] Hiá»ƒu array destructuring `[value, setter]`
- [ ] Biáº¿t state triggers re-render
- [ ] Hiá»ƒu initial value chá»‰ dÃ¹ng láº§n Ä‘áº§u

**State Updates:**

- [ ] Biáº¿t cÃ¡ch update state vá»›i setter function
- [ ] Hiá»ƒu setState lÃ  asynchronous
- [ ] Biáº¿t khi nÃ o dÃ¹ng function form `setState(prev => ...)`
- [ ] Hiá»ƒu immutability requirement
- [ ] Biáº¿t cÃ¡ch update objects immutably
- [ ] Biáº¿t cÃ¡ch update arrays immutably

**Common Patterns:**

- [ ] Controlled components
- [ ] Derived state
- [ ] Conditional rendering based on state
- [ ] Form handling vá»›i state
- [ ] List management vá»›i state

**Debugging:**

- [ ] Debug state not updating
- [ ] Fix stale closure issues
- [ ] Avoid direct mutations
- [ ] Use React DevTools to inspect state

---

### Code Review Checklist

Review useState usage trong code:

**Correctness:**

- [ ] All interactive data uses useState?
- [ ] No plain variables for changing data?
- [ ] State updates use setter functions?
- [ ] No direct state mutations?

**Best Practices:**

- [ ] Descriptive state names (`isOpen` not `state`)?
- [ ] Function form when needed (`prev =>`)?
- [ ] Objects/arrays updated immutably?
- [ ] Minimal state (no redundant derived state)?

**Performance:**

- [ ] Not storing computed values in state?
- [ ] State scoped appropriately (not too global)?

---

## ğŸ  BÃ€I Táº¬P Vá»€ NHÃ€

### Báº¯t buá»™c (45 phÃºt): Quiz App

Táº¡o quiz application vá»›i:

- Array of questions trong state
- Current question index
- User answers array
- Score calculation
- Result screen
- Restart functionality

Requirements:

- Multiple choice questions
- Next/Previous navigation
- Progress indicator
- Submit vÃ  show results
- Retry quiz

```js
const questions = [
  {
    id: 1,
    question: 'React lÃ  gÃ¬?',
    options: [
      'Má»™t framework backend',
      'Má»™t thÆ° viá»‡n JavaScript Ä‘á»ƒ xÃ¢y UI',
      'Má»™t database',
      'Má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh',
    ],
    correctAnswer: 1,
  },
  {
    id: 2,
    question: 'Hook nÃ o dÃ¹ng Ä‘á»ƒ quáº£n lÃ½ state?',
    options: ['useEffect', 'useContext', 'useState', 'useRef'],
    correctAnswer: 2,
  },
  {
    id: 3,
    question: 'JSX lÃ  gÃ¬?',
    options: [
      'Má»™t template engine',
      'Má»™t ngÃ´n ngá»¯ má»›i',
      'CÃº phÃ¡p má»Ÿ rá»™ng cá»§a JavaScript',
      'Má»™t framework CSS',
    ],
    correctAnswer: 2,
  },
];
```

<details>
<summary>ğŸ–¥ï¸ Máº«u giao diá»‡n </summary>

![QuizApp](/images/QuizApp.png)

```jsx
export default function QuizApp() {
  return (
    <div
      style={{
        maxWidth: '600px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'sans-serif',
      }}
    >
      {/* Title */}
      <h1 style={{ textAlign: 'center', marginBottom: '20px' }}>Quiz App</h1>

      {/* Progress */}
      <div style={{ marginBottom: '20px' }}>
        <div
          style={{
            height: '8px',
            backgroundColor: '#e0e0e0',
            borderRadius: '4px',
            overflow: 'hidden',
          }}
        >
          <div
            style={{
              width: '40%', // dynamic later
              height: '100%',
              backgroundColor: '#007bff',
            }}
          />
        </div>
        <span
          style={{
            fontSize: '14px',
            color: '#666',
            display: 'block',
            textAlign: 'right',
            marginTop: '6px',
          }}
        >
          Question 2 / 5
        </span>
      </div>

      {/* Question Card */}
      <div
        style={{
          backgroundColor: 'white',
          padding: '20px',
          borderRadius: '8px',
          border: '1px solid #ddd',
        }}
      >
        <h2 style={{ marginBottom: '20px' }}>React lÃ  gÃ¬?</h2>

        {/* Options */}
        <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
          <button
            style={{
              padding: '12px',
              borderRadius: '6px',
              border: '1px solid #ccc',
              backgroundColor: '#f8f9fa',
              cursor: 'pointer',
              textAlign: 'left',
            }}
          >
            Má»™t framework backend
          </button>

          <button
            style={{
              padding: '12px',
              borderRadius: '6px',
              border: '1px solid #007bff',
              backgroundColor: '#007bff',
              color: 'white',
              cursor: 'pointer',
              textAlign: 'left',
            }}
          >
            Má»™t thÆ° viá»‡n JavaScript Ä‘á»ƒ xÃ¢y UI
          </button>

          <button
            style={{
              padding: '12px',
              borderRadius: '6px',
              border: '1px solid #ccc',
              backgroundColor: '#f8f9fa',
              cursor: 'pointer',
              textAlign: 'left',
            }}
          >
            Má»™t database
          </button>

          <button
            style={{
              padding: '12px',
              borderRadius: '6px',
              border: '1px solid #ccc',
              backgroundColor: '#f8f9fa',
              cursor: 'pointer',
              textAlign: 'left',
            }}
          >
            Má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh
          </button>
        </div>
      </div>

      {/* Navigation */}
      <div
        style={{
          display: 'flex',
          justifyContent: 'space-between',
          marginTop: '20px',
        }}
      >
        <button
          style={{
            padding: '10px 20px',
            backgroundColor: 'white',
            border: '1px solid #ccc',
            borderRadius: '6px',
            cursor: 'pointer',
          }}
        >
          â† Previous
        </button>

        <button
          style={{
            padding: '10px 20px',
            backgroundColor: '#007bff',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
          }}
        >
          Next â†’
        </button>
      </div>

      {/* Submit (chá»‰ hiá»‡n á»Ÿ cÃ¢u cuá»‘i â€“ báº¡n tá»± control) */}
      <div style={{ textAlign: 'right', marginTop: '20px' }}>
        <button
          style={{
            padding: '12px 24px',
            backgroundColor: '#28a745',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
          }}
        >
          Submit Quiz
        </button>
      </div>

      {/* Result Screen (toggle báº±ng logic cá»§a báº¡n) */}
      <div
        style={{
          marginTop: '40px',
          padding: '30px',
          textAlign: 'center',
          backgroundColor: '#f8f9fa',
          borderRadius: '8px',
          border: '1px solid #ddd',
        }}
      >
        <h2>ğŸ‰ Quiz Completed</h2>
        <p style={{ fontSize: '16px' }}>
          You scored <strong>3</strong> / 5
        </p>

        <button
          style={{
            marginTop: '20px',
            padding: '10px 20px',
            backgroundColor: '#ffc107',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
          }}
        >
          ğŸ”„ Retry Quiz
        </button>
      </div>
    </div>
  );
}
```

</details>

<details>
<summary>ğŸ’¡ Xem Ä‘Ã¡p Ã¡n</summary>

```jsx
import { useState } from 'react';

const questions = [
  {
    id: 1,
    question: 'React lÃ  gÃ¬?',
    options: [
      'Má»™t framework backend',
      'Má»™t thÆ° viá»‡n JavaScript Ä‘á»ƒ xÃ¢y UI',
      'Má»™t database',
      'Má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh',
    ],
    correctAnswer: 1,
  },
  {
    id: 2,
    question: 'Hook nÃ o dÃ¹ng Ä‘á»ƒ quáº£n lÃ½ state?',
    options: ['useEffect', 'useContext', 'useState', 'useRef'],
    correctAnswer: 2,
  },
  {
    id: 3,
    question: 'JSX lÃ  gÃ¬?',
    options: [
      'Má»™t template engine',
      'Má»™t ngÃ´n ngá»¯ má»›i',
      'CÃº phÃ¡p má»Ÿ rá»™ng cá»§a JavaScript',
      'Má»™t framework CSS',
    ],
    correctAnswer: 2,
  },
];

export default function QuizApp() {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [answers, setAnswers] = useState(Array(questions.length).fill(null));
  const [submitted, setSubmitted] = useState(false);

  const currentQuestion = questions[currentIndex];

  /* =====================
   * Handlers
   * ===================== */
  const selectAnswer = (optionIndex) => {
    const newAnswers = [...answers];
    newAnswers[currentIndex] = optionIndex;
    setAnswers(newAnswers);
  };

  const nextQuestion = () => {
    if (currentIndex < questions.length - 1) {
      setCurrentIndex(currentIndex + 1);
    }
  };

  const prevQuestion = () => {
    if (currentIndex > 0) {
      setCurrentIndex(currentIndex - 1);
    }
  };

  const submitQuiz = () => {
    setSubmitted(true);
  };

  const restartQuiz = () => {
    setCurrentIndex(0);
    setAnswers(Array(questions.length).fill(null));
    setSubmitted(false);
  };

  /* =====================
   * Calculations
   * ===================== */
  const score = answers.reduce((total, answer, index) => {
    if (answer === questions[index].correctAnswer) {
      return total + 1;
    }
    return total;
  }, 0);

  const progress = ((currentIndex + 1) / questions.length) * 100;

  /* =====================
   * Result Screen
   * ===================== */
  if (submitted) {
    return (
      <div
        style={{
          maxWidth: '600px',
          margin: '40px auto',
          padding: '20px',
          fontFamily: 'sans-serif',
        }}
      >
        <div
          style={{
            padding: '30px',
            textAlign: 'center',
            backgroundColor: '#f8f9fa',
            borderRadius: '8px',
            border: '1px solid #ddd',
          }}
        >
          <h2>ğŸ‰ Quiz Completed</h2>
          <p style={{ fontSize: '16px' }}>
            You scored <strong>{score}</strong> / {questions.length}
          </p>

          <button
            onClick={restartQuiz}
            style={{
              marginTop: '20px',
              padding: '10px 20px',
              backgroundColor: '#ffc107',
              border: 'none',
              borderRadius: '6px',
              cursor: 'pointer',
            }}
          >
            ğŸ”„ Retry Quiz
          </button>
        </div>
      </div>
    );
  }

  /* =====================
   * Quiz Screen
   * ===================== */
  return (
    <div
      style={{
        maxWidth: '600px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'sans-serif',
      }}
    >
      <h1 style={{ textAlign: 'center', marginBottom: '20px' }}>Quiz App</h1>

      {/* Progress */}
      <div style={{ marginBottom: '20px' }}>
        <div
          style={{
            height: '8px',
            backgroundColor: '#e0e0e0',
            borderRadius: '4px',
            overflow: 'hidden',
          }}
        >
          <div
            style={{
              width: `${progress}%`,
              height: '100%',
              backgroundColor: '#007bff',
            }}
          />
        </div>
        <span
          style={{
            fontSize: '14px',
            color: '#666',
            display: 'block',
            textAlign: 'right',
            marginTop: '6px',
          }}
        >
          Question {currentIndex + 1} / {questions.length}
        </span>
      </div>

      {/* Question */}
      <div
        style={{
          backgroundColor: 'white',
          padding: '20px',
          borderRadius: '8px',
          border: '1px solid #ddd',
        }}
      >
        <h2 style={{ marginBottom: '20px' }}>{currentQuestion.question}</h2>

        <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
          {currentQuestion.options.map((option, index) => {
            const selected = answers[currentIndex] === index;

            return (
              <button
                key={index}
                onClick={() => selectAnswer(index)}
                style={{
                  padding: '12px',
                  borderRadius: '6px',
                  border: selected ? '1px solid #007bff' : '1px solid #ccc',
                  backgroundColor: selected ? '#007bff' : '#f8f9fa',
                  color: selected ? 'white' : 'black',
                  cursor: 'pointer',
                  textAlign: 'left',
                }}
              >
                {option}
              </button>
            );
          })}
        </div>
      </div>

      {/* Navigation */}
      <div
        style={{
          display: 'flex',
          justifyContent: 'space-between',
          marginTop: '20px',
        }}
      >
        <button
          onClick={prevQuestion}
          disabled={currentIndex === 0}
          style={{
            padding: '10px 20px',
            backgroundColor: 'white',
            border: '1px solid #ccc',
            borderRadius: '6px',
            cursor: currentIndex === 0 ? 'not-allowed' : 'pointer',
            opacity: currentIndex === 0 ? 0.5 : 1,
          }}
        >
          â† Previous
        </button>

        {currentIndex < questions.length - 1 ? (
          <button
            onClick={nextQuestion}
            disabled={answers[currentIndex] === null}
            style={{
              padding: '10px 20px',
              backgroundColor: '#007bff',
              color: 'white',
              border: 'none',
              borderRadius: '6px',
              cursor:
                answers[currentIndex] === null ? 'not-allowed' : 'pointer',
              opacity: answers[currentIndex] === null ? 0.5 : 1,
            }}
          >
            Next â†’
          </button>
        ) : (
          <button
            onClick={submitQuiz}
            disabled={answers.includes(null)}
            style={{
              padding: '10px 20px',
              backgroundColor: '#28a745',
              color: 'white',
              border: 'none',
              borderRadius: '6px',
              cursor: answers.includes(null) ? 'not-allowed' : 'pointer',
              opacity: answers.includes(null) ? 0.5 : 1,
            }}
          >
            Submit Quiz
          </button>
        )}
      </div>
    </div>
  );
}
```

</details>

---

### NÃ¢ng cao (90 phÃºt): Expense Tracker

Build expense tracking app:

- Add expense (amount, category, date, description)
- Edit expense
- Delete expense
- Filter by category
- Filter by date range
- Calculate totals by category
- Chart/visualization cá»§a spending
- Export to CSV (bonus)

```js
const expenses = [
  {
    id: 1,
    date: '2024-05-01',
    category: 'Food',
    description: 'Lunch',
    amount: 12,
  },
  {
    id: 2,
    date: '2024-05-02',
    category: 'Transport',
    description: 'Taxi',
    amount: 25,
  },
  {
    id: 3,
    date: '2024-05-03',
    category: 'Shopping',
    description: 'Shoes',
    amount: 120,
  },
];
```

<details>
<summary>ğŸ–¥ï¸ Máº«u giao diá»‡n </summary>

![ExpenseTracker](/images/ExpenseTracker.png)

```jsx
/* =====================
 * Styles
 * ===================== */
const th = {
  textAlign: 'left',
  padding: '10px',
  borderBottom: '1px solid #ccc',
};

const td = {
  padding: '10px',
  borderBottom: '1px solid #eee',
};

const actionBtn = {
  padding: '6px 10px',
  marginRight: '6px',
  border: 'none',
  borderRadius: '4px',
  cursor: 'pointer',
};

function ExpenseTracker() {
  return (
    <div
      style={{
        maxWidth: '1000px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'sans-serif',
      }}
    >
      {/* Header */}
      <h1 style={{ marginBottom: '10px' }}>Expense Tracker</h1>
      <p style={{ color: '#666', marginBottom: '30px' }}>
        Track, analyze, and manage your expenses
      </p>

      {/* Add Expense */}
      <div
        style={{
          padding: '20px',
          border: '1px solid #ddd',
          borderRadius: '8px',
          marginBottom: '30px',
        }}
      >
        <h2 style={{ marginBottom: '15px' }}>Add Expense</h2>

        <div
          style={{
            display: 'grid',
            gridTemplateColumns: 'repeat(4, 1fr)',
            gap: '10px',
          }}
        >
          <input
            placeholder='Amount'
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
          <select
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          >
            <option>Food</option>
            <option>Transport</option>
            <option>Shopping</option>
            <option>Entertainment</option>
          </select>
          <input
            type='date'
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
          <input
            placeholder='Description'
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
        </div>

        <button
          style={{
            marginTop: '15px',
            padding: '10px 20px',
            backgroundColor: '#007bff',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
          }}
        >
          + Add Expense
        </button>
      </div>

      {/* Filters */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        <select
          style={{
            padding: '10px',
            border: '1px solid #ccc',
            borderRadius: '4px',
          }}
        >
          <option>All Categories</option>
          <option>Food</option>
          <option>Transport</option>
          <option>Shopping</option>
        </select>

        <input
          type='date'
          style={{
            padding: '10px',
            border: '1px solid #ccc',
            borderRadius: '4px',
          }}
        />
        <input
          type='date'
          style={{
            padding: '10px',
            border: '1px solid #ccc',
            borderRadius: '4px',
          }}
        />

        <button
          style={{
            padding: '10px 20px',
            border: '1px solid #ccc',
            borderRadius: '6px',
            backgroundColor: 'white',
            cursor: 'pointer',
          }}
        >
          Export CSV
        </button>
      </div>

      {/* Expense Table */}
      <table
        style={{
          width: '100%',
          borderCollapse: 'collapse',
          marginBottom: '30px',
        }}
      >
        <thead>
          <tr style={{ backgroundColor: '#f5f5f5' }}>
            <th style={th}>Date</th>
            <th style={th}>Category</th>
            <th style={th}>Description</th>
            <th style={th}>Amount</th>
            <th style={th}>Actions</th>
          </tr>
        </thead>
        <tbody>
          {expenses.map((e) => (
            <tr key={e.id}>
              <td style={td}>{e.date}</td>
              <td style={td}>{e.category}</td>
              <td style={td}>{e.description}</td>
              <td style={td}>${e.amount}</td>
              <td style={td}>
                <button style={actionBtn}>Edit</button>
                <button
                  style={{
                    ...actionBtn,
                    backgroundColor: '#dc3545',
                    color: 'white',
                  }}
                >
                  Delete
                </button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>

      {/* Summary */}
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: '1fr 1fr',
          gap: '20px',
        }}
      >
        {/* Totals */}
        <div
          style={{
            padding: '20px',
            border: '1px solid #ddd',
            borderRadius: '8px',
          }}
        >
          <h3>Totals by Category</h3>
          <p>ğŸ” Food: $450</p>
          <p>ğŸš• Transport: $120</p>
          <p>ğŸ› Shopping: $300</p>
        </div>

        {/* Chart (Dummy) */}
        <div
          style={{
            padding: '20px',
            border: '1px solid #ddd',
            borderRadius: '8px',
          }}
        >
          <h3>Spending Chart</h3>

          <div style={{ marginTop: '15px' }}>
            <Bar
              label='Food'
              width='70%'
              color='#007bff'
            />
            <Bar
              label='Transport'
              width='30%'
              color='#28a745'
            />
            <Bar
              label='Shopping'
              width='50%'
              color='#ffc107'
            />
          </div>
        </div>
      </div>
    </div>
  );
}

/* =====================
 * Small UI helpers
 * ===================== */
function Bar({ label, width, color }) {
  return (
    <div style={{ marginBottom: '10px' }}>
      <span style={{ fontSize: '14px' }}>{label}</span>
      <div
        style={{
          height: '10px',
          backgroundColor: '#e0e0e0',
          borderRadius: '4px',
          overflow: 'hidden',
        }}
      >
        <div
          style={{
            width,
            height: '100%',
            backgroundColor: color,
          }}
        />
      </div>
    </div>
  );
}
```

</details>

<details>
<summary>ğŸ’¡ Xem Ä‘Ã¡p Ã¡n</summary>

```jsx
import { useState } from 'react';

/* =====================
 * Styles
 * ===================== */
const th = {
  textAlign: 'left',
  padding: '10px',
  borderBottom: '1px solid #ccc',
};

const td = {
  padding: '10px',
  borderBottom: '1px solid #eee',
};

const actionBtn = {
  padding: '6px 10px',
  marginRight: '6px',
  border: 'none',
  borderRadius: '4px',
  cursor: 'pointer',
};

/* =====================
 * Dummy Data
 * ===================== */
const initialExpenses = [
  {
    id: 1,
    amount: 120,
    category: 'Food',
    date: '2024-01-10',
    description: 'Lunch',
  },
  {
    id: 2,
    amount: 50,
    category: 'Transport',
    date: '2024-01-11',
    description: 'Grab',
  },
  {
    id: 3,
    amount: 300,
    category: 'Shopping',
    date: '2024-01-12',
    description: 'Shoes',
  },
];
const CATEGORY_CONFIG = {
  Food: {
    label: 'ğŸ” Food',
    color: '#007bff',
  },
  Transport: {
    label: 'ğŸš• Transport',
    color: '#28a745',
  },
  Shopping: {
    label: 'ğŸ› Shopping',
    color: '#ffc107',
  },
  Entertainment: {
    label: 'ğŸ¬ Entertainment',
    color: '#dc3545',
  },
};
export default function ExpenseTracker() {
  /* =====================
   * State
   * ===================== */
  const [expenses, setExpenses] = useState(initialExpenses);
  const [editingId, setEditingId] = useState(null);

  const [form, setForm] = useState({
    amount: '',
    category: 'Food',
    date: '',
    description: '',
  });

  const [filterCategory, setFilterCategory] = useState('All');
  const [fromDate, setFromDate] = useState('');
  const [toDate, setToDate] = useState('');

  /* =====================
   * Submit Expense
   * ===================== */
  const submitExpense = () => {
    if (!form.amount || Number(form.amount) <= 0 || !form.date) return;

    // ğŸ‘‰ EDIT MODE
    if (editingId) {
      setExpenses((prev) =>
        prev.map((e) =>
          e.id === editingId
            ? {
                ...e,
                amount: Number(form.amount),
                category: form.category,
                date: form.date,
                description: form.description.trim(),
              }
            : e,
        ),
      );
    }
    // ğŸ‘‰ ADD MODE
    else {
      setExpenses((prev) => [
        ...prev,
        {
          id: Date.now(),
          amount: Number(form.amount),
          category: form.category,
          date: form.date,
          description: form.description.trim(),
        },
      ]);
    }

    // reset
    setForm({
      amount: '',
      category: 'Food',
      date: '',
      description: '',
    });
    setEditingId(null);
  };

  /* =====================
   * Delete
   * ===================== */
  const deleteExpense = (id) => {
    setExpenses((prev) => prev.filter((e) => e.id !== id));
  };

  /* =====================
   * Filters
   * ===================== */
  const filteredExpenses = expenses.filter((e) => {
    if (filterCategory !== 'All' && e.category !== filterCategory) return false;
    if (fromDate && e.date < fromDate) return false;
    if (toDate && e.date > toDate) return false;
    return true;
  });

  /* =====================
   * Totals
   * ===================== */
  const totalsByCategory = expenses.reduce((acc, e) => {
    acc[e.category] = (acc[e.category] || 0) + e.amount;
    return acc;
  }, {});

  const maxTotal = Math.max(...Object.values(totalsByCategory), 1);

  /* =====================
   * Export CSV
   * ===================== */
  const exportCSV = () => {
    const header = 'Date,Category,Description,Amount\n';
    const rows = expenses
      .map((e) => `${e.date},${e.category},${e.description},${e.amount}`)
      .join('\n');

    const blob = new Blob([header + rows], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);

    const a = document.createElement('a');
    a.href = url;
    a.download = 'expenses.csv';
    a.click();
  };
  const isFormInvalid = !form.amount || !form.date;
  return (
    <div
      style={{
        maxWidth: '1000px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'sans-serif',
      }}
    >
      {/* Header */}
      <h1 style={{ marginBottom: '10px' }}>Expense Tracker</h1>
      <p style={{ color: '#666', marginBottom: '30px' }}>
        Track, analyze, and manage your expenses
      </p>

      {/* Add Expense */}
      <div
        style={{
          padding: '20px',
          border: '1px solid #ddd',
          borderRadius: '8px',
          marginBottom: '30px',
        }}
      >
        <h2 style={{ marginBottom: '15px' }}>Add Expense</h2>

        <div
          style={{
            display: 'grid',
            gridTemplateColumns: 'repeat(4, 1fr)',
            gap: '10px',
          }}
        >
          <input
            placeholder='Amount'
            value={form.amount}
            onChange={(e) => setForm({ ...form, amount: e.target.value })}
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
          <select
            value={form.category}
            onChange={(e) => setForm({ ...form, category: e.target.value })}
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          >
            <option>Food</option>
            <option>Transport</option>
            <option>Shopping</option>
            <option>Entertainment</option>
          </select>
          <input
            type='date'
            value={form.date}
            onChange={(e) => setForm({ ...form, date: e.target.value })}
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
          <input
            placeholder='Description'
            value={form.description}
            onChange={(e) => setForm({ ...form, description: e.target.value })}
            onKeyDown={(e) => {
              if (e.key === 'Enter') submitExpense();
            }}
            style={{
              padding: '10px',
              border: '1px solid #ccc',
              borderRadius: '4px',
            }}
          />
        </div>

        <button
          onClick={submitExpense}
          disabled={isFormInvalid}
          style={{
            marginTop: '15px',
            padding: '10px 20px',
            backgroundColor: isFormInvalid ? '#ccc' : '#007bff',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: isFormInvalid ? 'not-allowed' : 'pointer',
          }}
        >
          {editingId ? 'âœï¸ Update Expense' : '+ Add Expense'}
        </button>
        {editingId && (
          <button
            onClick={() => {
              setForm({
                amount: '',
                category: 'Food',
                date: '',
                description: '',
              });
              setEditingId(null);
            }}
            style={{
              marginLeft: '10px',
              padding: '10px 20px',
              backgroundColor: '#6c757d',
              color: 'white',
              border: 'none',
              borderRadius: '6px',
              cursor: 'pointer',
            }}
          >
            Cancel
          </button>
        )}
      </div>

      {/* Filters */}
      <div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}>
        <select
          onChange={(e) => setFilterCategory(e.target.value)}
          style={{
            padding: '10px',
            border: '1px solid #ccc',
            borderRadius: '4px',
          }}
        >
          <option value='All'>All Categories</option>
          <option>Food</option>
          <option>Transport</option>
          <option>Shopping</option>
        </select>

        <input
          type='date'
          onChange={(e) => setFromDate(e.target.value)}
          style={{ padding: '10px' }}
        />
        <input
          type='date'
          onChange={(e) => setToDate(e.target.value)}
          style={{ padding: '10px' }}
        />

        <button
          onClick={exportCSV}
          style={{
            padding: '10px 20px',
            border: '1px solid #ccc',
            borderRadius: '6px',
            backgroundColor: 'white',
            cursor: 'pointer',
          }}
        >
          Export CSV
        </button>
      </div>

      {/* Expense Table */}
      <table
        style={{
          width: '100%',
          borderCollapse: 'collapse',
          marginBottom: '30px',
        }}
      >
        <thead>
          <tr style={{ backgroundColor: '#f5f5f5' }}>
            <th style={th}>Date</th>
            <th style={th}>Category</th>
            <th style={th}>Description</th>
            <th style={th}>Amount</th>
            <th style={th}>Actions</th>
          </tr>
        </thead>
        <tbody>
          {filteredExpenses.map((e) => (
            <tr key={e.id}>
              <td style={td}>{e.date}</td>
              <td style={td}>{e.category}</td>
              <td style={td}>{e.description}</td>
              <td style={td}>${e.amount}</td>
              <td style={td}>
                <button
                  style={actionBtn}
                  onClick={() => {
                    setForm({
                      amount: e.amount,
                      category: e.category,
                      date: e.date,
                      description: e.description,
                    });
                    setEditingId(e.id);
                  }}
                >
                  Edit
                </button>

                <button
                  onClick={() => deleteExpense(e.id)}
                  style={{
                    ...actionBtn,
                    backgroundColor: '#dc3545',
                    color: 'white',
                  }}
                >
                  Delete
                </button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>

      {/* Summary */}
      <div
        style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}
      >
        <div
          style={{
            padding: '20px',
            border: '1px solid #ddd',
            borderRadius: '8px',
          }}
        >
          <h3>Totals by Category</h3>
          {Object.entries(totalsByCategory).map(([category, total]) => {
            const config = CATEGORY_CONFIG[category];

            return (
              <p key={category}>
                {config?.label || category}: ${total}
              </p>
            );
          })}
        </div>

        <div
          style={{
            padding: '20px',
            border: '1px solid #ddd',
            borderRadius: '8px',
          }}
        >
          <h3>Spending Chart</h3>
          <div style={{ marginTop: '15px' }}>
            {Object.entries(totalsByCategory).map(([category, total]) => {
              const config = CATEGORY_CONFIG[category];

              return (
                <Bar
                  key={category}
                  label={config?.label || category}
                  width={`${(total / maxTotal) * 100}%`}
                  color={config?.color || '#999'}
                />
              );
            })}
          </div>
        </div>
      </div>
    </div>
  );
}

/* =====================
 * Small UI helpers
 * ===================== */
function Bar({ label, width, color }) {
  return (
    <div style={{ marginBottom: '10px' }}>
      <span style={{ fontSize: '14px' }}>{label}</span>
      <div
        style={{
          height: '10px',
          backgroundColor: '#e0e0e0',
          borderRadius: '4px',
          overflow: 'hidden',
        }}
      >
        <div
          style={{
            width,
            height: '100%',
            backgroundColor: color,
          }}
        />
      </div>
    </div>
  );
}
```

</details>

## ğŸ“š TÃ€I LIá»†U THAM KHáº¢O

### Báº¯t buá»™c Ä‘á»c

1. **React Docs - useState**
   - https://react.dev/reference/react/useState
   - Äá»c toÃ n bá»™, ráº¥t quan trá»ng!

2. **React Docs - State: A Component's Memory**
   - https://react.dev/learn/state-a-components-memory
   - Mental model vá» state

### Äá»c thÃªm

3. **React Docs - Updating Objects in State**
   - https://react.dev/learn/updating-objects-in-state
   - Immutability patterns

4. **React Docs - Updating Arrays in State**
   - https://react.dev/learn/updating-arrays-in-state
   - Array manipulation patterns

---

## ğŸ”— Káº¾T Ná»I KIáº¾N THá»¨C

### Kiáº¿n thá»©c ná»n (ÄÃ£ dÃ¹ng)

- **NgÃ y 1-9**: All concepts Ä‘Æ°á»£c enhance báº±ng state
- **NgÃ y 9**: Forms â†’ Controlled components
- **NgÃ y 10**: Project â†’ Refactor vá»›i state

### HÆ°á»›ng tá»›i (Sáº½ há»c)

- **NgÃ y 12**: useReducer - Complex state management
- **NgÃ y 13**: Lifting state up - State sharing
- **NgÃ y 14**: Context API - Global state
- **NgÃ y 17**: useEffect - Side effects vá»›i state
- **NgÃ y 23**: useMemo, useCallback - Performance optimization

---

## ğŸ’¡ SENIOR INSIGHTS

### Production Considerations

**1. State Granularity:**

```jsx
// Too granular (many re-renders):
const [firstName, setFirstName] = useState('');
const [lastName, setLastName] = useState('');
const [email, setEmail] = useState('');
const [phone, setPhone] = useState('');
// 4 states = 4 potential re-renders

// Better (fewer re-renders):
const [formData, setFormData] = useState({
  firstName: '',
  lastName: '',
  email: '',
  phone: '',
});
// 1 state = 1 re-render when any field changes
```

**2. State Colocation:**

```
Rule: Keep state as close as possible to where it's used

Global state (App level):
- User authentication
- Theme
- Language

Component state (local):
- Form inputs
- UI toggles
- Local filters
```

**3. When NOT to useState:**

```jsx
// âŒ Don't store what can be computed
const [todos, setTodos] = useState([]);
const [completedCount, setCompletedCount] = useState(0); // âŒ

// âœ… Compute instead
const [todos, setTodos] = useState([]);
const completedCount = todos.filter((t) => t.completed).length; // âœ…
```

---

### CÃ¢u Há»i Phá»ng Váº¥n

**Junior:**

1. **Q**: useState tráº£ vá» gÃ¬?
   **A**: Array vá»›i 2 elements: `[currentValue, setterFunction]`

2. **Q**: LÃ m sao update state?
   **A**: Gá»i setter function: `setState(newValue)`

3. **Q**: State update cÃ³ immediate khÃ´ng?
   **A**: KhÃ´ng, setState lÃ  asynchronous

**Mid:** 4. **Q**: Khi nÃ o dÃ¹ng function form `setState(prev => ...)`?
**A**: Khi new state depends on previous state

5. **Q**: Táº¡i sao pháº£i update state immutably?
   **A**: React compares by reference. Same reference = no re-render.

6. **Q**: Difference giá»¯a state vÃ  props?
   **A**: State: owned by component, mutable via setState. Props: passed from parent, read-only.

**Senior:** 7. **Q**: Optimize component vá»›i nhiá»u state?
**A**: Combine related state, use useMemo/useCallback, split into smaller components

8. **Q**: Handle complex nested state updates?
   **A**: Use useReducer (NgÃ y 12) or state management library

9. **Q**: Debug stale closure trong useState?
   **A**: Use function form, React DevTools, or useRef for mutable values

---

## ğŸ¯ PREVIEW NGÃ€Y MAI

**NgÃ y 12: useReducer - Complex State Management**

Tomorrow we'll learn:

- When useState isn't enough
- useReducer for complex state logic
- Reducer pattern
- Action creators
- State machines
- Refactor complex useState to useReducer

**Prepare:**

- Review today's todo list with many state variables
- Think about how to simplify complex state updates
- Rest well - useReducer is powerful but needs focus! ğŸš€

---

**ğŸ‰ ChÃºc má»«ng! Báº¡n Ä‘Ã£ master useState!**

useState lÃ  foundation cá»§a React state management. Má»i pattern sau nÃ y Ä‘á»u build trÃªn kiáº¿n thá»©c nÃ y. Practice nhiá»u Ä‘á»ƒ thÃ nh tháº¡o! ğŸ’ª

**Key Takeaway:** State makes React reactive. Change state â†’ UI updates automatically. That's the magic! âœ¨
