# üìÖ NG√ÄY 15: ‚ö° Project 2 - Interactive Todo App

## üéØ M·ª•c ti√™u h·ªçc t·∫≠p (5 ph√∫t)

Sau b√†i h·ªçc n√†y, b·∫°n s·∫Ω:

- [ ] **√Åp d·ª•ng t·∫•t c·∫£ useState patterns** t·ª´ Ng√†y 11-14 v√†o 1 project ho√†n ch·ªânh
- [ ] **Thi·∫øt k·∫ø component architecture** v·ªõi state lifting h·ª£p l√Ω
- [ ] **Implement CRUD operations** v·ªõi immutable updates
- [ ] **Handle complex interactions** (edit mode, filters, validation)
- [ ] **Write production-ready code** v·ªõi error handling v√† edge cases

---

## ü§î Ki·ªÉm tra ƒë·∫ßu v√†o (5 ph√∫t)

Review ki·∫øn th·ª©c t·ª´ Ng√†y 11-14:

1. **C√¢u 1**: Khi n√†o d√πng functional updates `setState(prev => ...)`?

2. **C√¢u 2**: TodoList v√† TodoFilters c·∫ßn share filter state. State n√™n ·ªü ƒë√¢u?

3. **C√¢u 3**: Completed todos count c√≥ n√™n store in state kh√¥ng? T·∫°i sao?

<details>
<summary>üí° Xem ƒë√°p √°n</summary>

1. Khi update d·ª±a tr√™n previous value, trong async operations, ho·∫∑c multiple updates
2. Lift state l√™n parent chung (TodoApp)
3. **KH√îNG!** ƒê√≥ l√† derived state - compute t·ª´ todos array. Storing = duplication bug risk

</details>

---

## üìñ PH·∫¶N 1: PROJECT OVERVIEW (30 ph√∫t)

### 1.1 Product Requirements

**User Story:**

> "L√† user, t√¥i mu·ªën manage todo list v·ªõi kh·∫£ nƒÉng add, edit, delete, v√† filter todos ƒë·ªÉ organize c√¥ng vi·ªác h√†ng ng√†y"

**Features:**

- ‚úÖ Add new todos
- ‚úÖ Mark todos as complete/incomplete
- ‚úÖ Edit existing todos
- ‚úÖ Delete todos
- ‚úÖ Filter: All / Active / Completed
- ‚úÖ Clear all completed
- ‚úÖ Statistics display

**NOT in scope (yet):**

- ‚ùå Persistence (useEffect - Ng√†y 17)
- ‚ùå Categories/tags
- ‚ùå Due dates
- ‚ùå Drag & drop reordering

---

### 1.2 Component Architecture

```
TodoApp (state owner)
‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îî‚îÄ‚îÄ Stats (derived state)
‚îú‚îÄ‚îÄ AddTodoForm (local input state)
‚îú‚îÄ‚îÄ FilterButtons (controlled)
‚îú‚îÄ‚îÄ TodoList
‚îÇ   ‚îî‚îÄ‚îÄ TodoItem √ó N
‚îÇ       ‚îú‚îÄ‚îÄ View mode
‚îÇ       ‚îî‚îÄ‚îÄ Edit mode (local input state)
‚îî‚îÄ‚îÄ Footer
    ‚îî‚îÄ‚îÄ ClearCompleted button
```

**State Structure Decision:**

```jsx
// ‚úÖ State in TodoApp
const [todos, setTodos] = useState([
  {
    id: number,
    text: string,
    completed: boolean,
    createdAt: timestamp
  }
]);

const [filter, setFilter] = useState('all'); // 'all' | 'active' | 'completed'

// ‚úÖ Derived states (computed, not stored)
const filteredTodos = todos.filter(...);
const stats = { total, active, completed };
```

---

### 1.3 Key Patterns We'll Use

| Pattern                   | Where                                     | Why                            |
| ------------------------- | ----------------------------------------- | ------------------------------ |
| **Functional Updates**    | All todo operations                       | Avoid stale closure bugs       |
| **Immutability**          | Add/Edit/Delete                           | React requires new references  |
| **Lifting State Up**      | Filter shared by FilterButtons + TodoList | Siblings need same data        |
| **Derived State**         | Filtered todos, stats                     | Always in sync, no duplication |
| **Controlled Components** | AddTodoForm, EditMode                     | React controls inputs          |
| **Local State**           | Input buffers                             | Don't need sharing             |

---

### 1.4 Implementation Plan

**Phase 1: Basic Structure (30 min)**

- Static layout
- Dummy data
- Component skeleton

**Phase 2: Core CRUD (45 min)**

- Add todos
- Delete todos
- Toggle complete
- Edit todos

**Phase 3: Filtering (30 min)**

- Filter buttons
- Filtered display
- Clear completed

**Phase 4: Polish (30 min)**

- Validation
- Empty states
- Statistics
- Edge cases

**Phase 5: Refactoring (15 min)**

- Code review
- Extract components
- Optimize

---

## üíª PH·∫¶N 2: IMPLEMENTATION - STEP BY STEP (90 ph√∫t)

### Step 1: Project Setup & Static Layout (15 ph√∫t)

```jsx
/**
 * üéØ Goal: Create basic structure with dummy data
 * ‚è±Ô∏è Time: 15 min
 *
 * Tasks:
 * 1. Create TodoApp component
 * 2. Add dummy todos array
 * 3. Render static list
 * 4. Basic styling
 */

// ‚úÖ COMPLETE STARTER CODE

function TodoApp() {
  // Dummy data for now
  const dummyTodos = [
    {
      id: 1,
      text: 'Learn React useState',
      completed: true,
      createdAt: Date.now() - 86400000,
    },
    {
      id: 2,
      text: 'Build Todo App',
      completed: false,
      createdAt: Date.now() - 3600000,
    },
    {
      id: 3,
      text: 'Master state management',
      completed: false,
      createdAt: Date.now(),
    },
  ];

  return (
    <div
      style={{
        maxWidth: '600px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'system-ui, -apple-system, sans-serif',
        background: '#f5f5f5',
        borderRadius: '12px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
      }}
    >
      {/* Header */}
      <div
        style={{
          textAlign: 'center',
          marginBottom: '30px',
        }}
      >
        <h1
          style={{
            fontSize: '2.5em',
            margin: '0 0 10px 0',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            WebkitBackgroundClip: 'text',
            WebkitTextFillColor: 'transparent',
            backgroundClip: 'text',
          }}
        >
          üìù Todo Master
        </h1>
        <p style={{ color: '#666', margin: 0 }}>
          Get things done, one task at a time
        </p>
      </div>

      {/* Stats */}
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(3, 1fr)',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#667eea' }}
          >
            3
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Total</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#f59e0b' }}
          >
            2
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Active</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#10b981' }}
          >
            1
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Done</div>
        </div>
      </div>

      {/* Add Form - placeholder */}
      <div
        style={{
          background: 'white',
          padding: '20px',
          borderRadius: '8px',
          marginBottom: '20px',
          boxShadow: '0 2px 4px rgba(0,0,0,0.05)',
        }}
      >
        <input
          type='text'
          placeholder='What needs to be done?'
          style={{
            width: '100%',
            padding: '12px',
            fontSize: '16px',
            border: '2px solid #e5e7eb',
            borderRadius: '6px',
            outline: 'none',
            boxSizing: 'border-box',
          }}
        />
      </div>

      {/* Filter Buttons - placeholder */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        {['All', 'Active', 'Completed'].map((filter) => (
          <button
            key={filter}
            style={{
              flex: 1,
              padding: '10px',
              border: 'none',
              borderRadius: '6px',
              background: filter === 'All' ? '#667eea' : '#e5e7eb',
              color: filter === 'All' ? 'white' : '#374151',
              cursor: 'pointer',
              fontWeight: '500',
              fontSize: '14px',
            }}
          >
            {filter}
          </button>
        ))}
      </div>

      {/* Todo List */}
      <div style={{ marginBottom: '20px' }}>
        {dummyTodos.map((todo) => (
          <div
            key={todo.id}
            style={{
              background: 'white',
              padding: '15px',
              borderRadius: '8px',
              marginBottom: '10px',
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              boxShadow: '0 1px 3px rgba(0,0,0,0.1)',
            }}
          >
            <input
              type='checkbox'
              checked={todo.completed}
              style={{
                width: '20px',
                height: '20px',
                cursor: 'pointer',
              }}
            />
            <span
              style={{
                flex: 1,
                textDecoration: todo.completed ? 'line-through' : 'none',
                color: todo.completed ? '#9ca3af' : '#1f2937',
                fontSize: '16px',
              }}
            >
              {todo.text}
            </span>
            <button
              style={{
                padding: '6px 12px',
                background: '#3b82f6',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '13px',
              }}
            >
              Edit
            </button>
            <button
              style={{
                padding: '6px 12px',
                background: '#ef4444',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '13px',
              }}
            >
              Delete
            </button>
          </div>
        ))}
      </div>

      {/* Footer */}
      <div
        style={{
          textAlign: 'center',
          paddingTop: '20px',
          borderTop: '1px solid #e5e7eb',
        }}
      >
        <button
          style={{
            padding: '8px 16px',
            background: '#6b7280',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontSize: '14px',
          }}
        >
          Clear Completed
        </button>
      </div>
    </div>
  );
}
```

**‚úÖ Checkpoint:**

- Static UI renders v·ªõi dummy data
- All elements c√≥ styling c∆° b·∫£n
- Layout responsive v√† ƒë·∫πp m·∫Øt

---

### Step 2: Add State & Add Todo Feature (20 ph√∫t)

```jsx
/**
 * üéØ Goal: Implement add todo functionality
 * ‚è±Ô∏è Time: 20 min
 *
 * Tasks:
 * 1. Convert dummy data to state
 * 2. Create AddTodoForm component v·ªõi local state
 * 3. Implement handleAddTodo
 * 4. Validation (empty, whitespace)
 */

// ‚úÖ AddTodoForm Component
function AddTodoForm({ onAddTodo }) {
  const [input, setInput] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();

    const trimmed = input.trim();
    if (!trimmed) {
      // Could show error message (for now just return)
      return;
    }

    onAddTodo(trimmed);
    setInput(''); // Clear input after adding
  };

  return (
    <form
      onSubmit={handleSubmit}
      style={{
        background: 'white',
        padding: '20px',
        borderRadius: '8px',
        marginBottom: '20px',
        boxShadow: '0 2px 4px rgba(0,0,0,0.05)',
      }}
    >
      <div style={{ display: 'flex', gap: '10px' }}>
        <input
          type='text'
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder='What needs to be done?'
          style={{
            flex: 1,
            padding: '12px',
            fontSize: '16px',
            border: '2px solid #e5e7eb',
            borderRadius: '6px',
            outline: 'none',
          }}
          onFocus={(e) => (e.target.style.borderColor = '#667eea')}
          onBlur={(e) => (e.target.style.borderColor = '#e5e7eb')}
        />
        <button
          type='submit'
          style={{
            padding: '12px 24px',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: '600',
            fontSize: '16px',
            whiteSpace: 'nowrap',
          }}
        >
          Add Todo
        </button>
      </div>

      {/* Optional: Character counter */}
      {input.length > 0 && (
        <div
          style={{
            marginTop: '8px',
            fontSize: '12px',
            color: input.length > 100 ? '#ef4444' : '#6b7280',
          }}
        >
          {input.length}/100 characters
        </div>
      )}
    </form>
  );
}

// ‚úÖ Update TodoApp
function TodoApp() {
  // ‚úÖ Replace dummy data with state
  const [todos, setTodos] = useState([
    {
      id: 1,
      text: 'Learn React useState',
      completed: true,
      createdAt: Date.now() - 86400000,
    },
    {
      id: 2,
      text: 'Build Todo App',
      completed: false,
      createdAt: Date.now() - 3600000,
    },
    {
      id: 3,
      text: 'Master state management',
      completed: false,
      createdAt: Date.now(),
    },
  ]);

  const [filter, setFilter] = useState('all');

  // ‚úÖ Handler: Add todo
  const handleAddTodo = (text) => {
    const newTodo = {
      id: Date.now(), // Simple ID generation
      text: text,
      completed: false,
      createdAt: Date.now(),
    };

    // ‚úÖ Immutable update with functional setState
    setTodos((prev) => [...prev, newTodo]);
  };

  // ‚úÖ Derived: Stats
  const stats = {
    total: todos.length,
    active: todos.filter((t) => !t.completed).length,
    completed: todos.filter((t) => t.completed).length,
  };

  return (
    <div
      style={
        {
          /* ... same styles ... */
        }
      }
    >
      {/* Header */}
      <div style={{ textAlign: 'center', marginBottom: '30px' }}>
        <h1
          style={{
            fontSize: '2.5em',
            margin: '0 0 10px 0',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            WebkitBackgroundClip: 'text',
            WebkitTextFillColor: 'transparent',
          }}
        >
          üìù Todo Master
        </h1>
        <p style={{ color: '#666', margin: 0 }}>
          Get things done, one task at a time
        </p>
      </div>

      {/* ‚úÖ Stats with real data */}
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(3, 1fr)',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#667eea' }}
          >
            {stats.total}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Total</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#f59e0b' }}
          >
            {stats.active}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Active</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#10b981' }}
          >
            {stats.completed}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Done</div>
        </div>
      </div>

      {/* ‚úÖ Add Form with handler */}
      <AddTodoForm onAddTodo={handleAddTodo} />

      {/* Rest of the component... */}
      {/* (Filter buttons and todo list will be implemented in next steps) */}
    </div>
  );
}
```

**‚úÖ Checkpoint:**

- Can add new todos
- Input clears after submit
- Stats update automatically
- Empty input is rejected

---

### Step 3: Toggle Complete & Delete (20 ph√∫t)

```jsx
/**
 * üéØ Goal: Implement toggle and delete
 * ‚è±Ô∏è Time: 20 min
 *
 * Tasks:
 * 1. Implement handleToggleTodo
 * 2. Implement handleDeleteTodo
 * 3. Wire up checkbox and delete button
 */

// ‚úÖ TodoItem Component
function TodoItem({ todo, onToggle, onDelete, onEdit }) {
  return (
    <div
      style={{
        background: 'white',
        padding: '15px',
        borderRadius: '8px',
        marginBottom: '10px',
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',
        transition: 'all 0.2s',
      }}
    >
      {/* Checkbox */}
      <input
        type='checkbox'
        checked={todo.completed}
        onChange={() => onToggle(todo.id)}
        style={{
          width: '20px',
          height: '20px',
          cursor: 'pointer',
          accentColor: '#10b981',
        }}
      />

      {/* Todo Text */}
      <span
        style={{
          flex: 1,
          textDecoration: todo.completed ? 'line-through' : 'none',
          color: todo.completed ? '#9ca3af' : '#1f2937',
          fontSize: '16px',
          wordBreak: 'break-word',
        }}
      >
        {todo.text}
      </span>

      {/* Timestamp */}
      <span
        style={{
          fontSize: '11px',
          color: '#9ca3af',
          whiteSpace: 'nowrap',
        }}
      >
        {new Date(todo.createdAt).toLocaleDateString('en-US', {
          month: 'short',
          day: 'numeric',
        })}
      </span>

      {/* Action Buttons */}
      <div style={{ display: 'flex', gap: '6px' }}>
        <button
          onClick={() => onEdit(todo.id)}
          style={{
            padding: '6px 12px',
            background: '#3b82f6',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '13px',
            fontWeight: '500',
          }}
          onMouseOver={(e) => (e.target.style.background = '#2563eb')}
          onMouseOut={(e) => (e.target.style.background = '#3b82f6')}
        >
          Edit
        </button>
        <button
          onClick={() => onDelete(todo.id)}
          style={{
            padding: '6px 12px',
            background: '#ef4444',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '13px',
            fontWeight: '500',
          }}
          onMouseOver={(e) => (e.target.style.background = '#dc2626')}
          onMouseOut={(e) => (e.target.style.background = '#ef4444')}
        >
          Delete
        </button>
      </div>
    </div>
  );
}

// ‚úÖ TodoList Component
function TodoList({ todos, onToggle, onDelete, onEdit }) {
  if (todos.length === 0) {
    return (
      <div
        style={{
          textAlign: 'center',
          padding: '60px 20px',
          color: '#9ca3af',
        }}
      >
        <div style={{ fontSize: '4em', marginBottom: '10px' }}>üì≠</div>
        <p style={{ fontSize: '1.1em', margin: 0 }}>No todos yet!</p>
        <p style={{ fontSize: '0.9em', margin: '5px 0 0 0' }}>
          Add one above to get started
        </p>
      </div>
    );
  }

  return (
    <div style={{ marginBottom: '20px' }}>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          todo={todo}
          onToggle={onToggle}
          onDelete={onDelete}
          onEdit={onEdit}
        />
      ))}
    </div>
  );
}

// ‚úÖ Update TodoApp with handlers
function TodoApp() {
  const [todos, setTodos] = useState([
    {
      id: 1,
      text: 'Learn React useState',
      completed: true,
      createdAt: Date.now() - 86400000,
    },
    {
      id: 2,
      text: 'Build Todo App',
      completed: false,
      createdAt: Date.now() - 3600000,
    },
    {
      id: 3,
      text: 'Master state management',
      completed: false,
      createdAt: Date.now(),
    },
  ]);

  const [filter, setFilter] = useState('all');

  // Add todo
  const handleAddTodo = (text) => {
    const newTodo = {
      id: Date.now(),
      text: text,
      completed: false,
      createdAt: Date.now(),
    };

    setTodos((prev) => [...prev, newTodo]);
  };

  // ‚úÖ Toggle complete
  const handleToggleTodo = (id) => {
    setTodos((prev) =>
      prev.map((todo) =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo,
      ),
    );
  };

  // ‚úÖ Delete todo
  const handleDeleteTodo = (id) => {
    setTodos((prev) => prev.filter((todo) => todo.id !== id));
  };

  // Placeholder for edit (will implement next)
  const handleEditTodo = (id) => {
    console.log('Edit todo:', id);
  };

  // Stats
  const stats = {
    total: todos.length,
    active: todos.filter((t) => !t.completed).length,
    completed: todos.filter((t) => t.completed).length,
  };

  return (
    <div
      style={{
        maxWidth: '600px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'system-ui, -apple-system, sans-serif',
        background: '#f5f5f5',
        borderRadius: '12px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
      }}
    >
      {/* Header - same as before */}
      <div style={{ textAlign: 'center', marginBottom: '30px' }}>
        <h1
          style={{
            fontSize: '2.5em',
            margin: '0 0 10px 0',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            WebkitBackgroundClip: 'text',
            WebkitTextFillColor: 'transparent',
          }}
        >
          üìù Todo Master
        </h1>
        <p style={{ color: '#666', margin: 0 }}>
          Get things done, one task at a time
        </p>
      </div>

      {/* Stats - same as before */}
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(3, 1fr)',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#667eea' }}
          >
            {stats.total}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Total</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#f59e0b' }}
          >
            {stats.active}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Active</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
          }}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#10b981' }}
          >
            {stats.completed}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Done</div>
        </div>
      </div>

      {/* Add Form */}
      <AddTodoForm onAddTodo={handleAddTodo} />

      {/* Filter Buttons - placeholder for now */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        {['all', 'active', 'completed'].map((f) => (
          <button
            key={f}
            onClick={() => setFilter(f)}
            style={{
              flex: 1,
              padding: '10px',
              border: 'none',
              borderRadius: '6px',
              background: filter === f ? '#667eea' : '#e5e7eb',
              color: filter === f ? 'white' : '#374151',
              cursor: 'pointer',
              fontWeight: '500',
              fontSize: '14px',
              textTransform: 'capitalize',
            }}
          >
            {f}
          </button>
        ))}
      </div>

      {/* ‚úÖ Todo List with handlers */}
      <TodoList
        todos={todos}
        onToggle={handleToggleTodo}
        onDelete={handleDeleteTodo}
        onEdit={handleEditTodo}
      />

      {/* Footer - placeholder */}
      <div
        style={{
          textAlign: 'center',
          paddingTop: '20px',
          borderTop: '1px solid #e5e7eb',
        }}
      >
        <button
          style={{
            padding: '8px 16px',
            background: '#6b7280',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontSize: '14px',
          }}
        >
          Clear Completed ({stats.completed})
        </button>
      </div>
    </div>
  );
}
```

**‚úÖ Checkpoint:**

- Can toggle todos complete/incomplete
- Can delete todos
- Stats update automatically
- Empty state shows when no todos

---

### Step 4: Edit Todo Feature (25 ph√∫t)

```jsx
/**
 * üéØ Goal: Implement inline editing
 * ‚è±Ô∏è Time: 25 min
 *
 * Tasks:
 * 1. Track editing state (which todo is being edited)
 * 2. Create edit mode UI
 * 3. Save/cancel edit handlers
 * 4. Validation
 */

// ‚úÖ TodoItem with Edit Mode
function TodoItem({
  todo,
  isEditing,
  onToggle,
  onDelete,
  onStartEdit,
  onSaveEdit,
  onCancelEdit,
}) {
  const [editText, setEditText] = useState(todo.text);

  // Reset edit text when entering edit mode
  React.useEffect(() => {
    if (isEditing) {
      setEditText(todo.text);
    }
  }, [isEditing, todo.text]);

  const handleSave = () => {
    const trimmed = editText.trim();
    if (!trimmed) {
      // Don't save empty
      return;
    }
    onSaveEdit(todo.id, trimmed);
  };

  const handleKeyPress = (e) => {
    if (e.key === 'Enter') {
      handleSave();
    } else if (e.key === 'Escape') {
      onCancelEdit();
    }
  };

  // ‚úÖ Edit Mode
  if (isEditing) {
    return (
      <div
        style={{
          background: '#fffbeb',
          padding: '15px',
          borderRadius: '8px',
          marginBottom: '10px',
          border: '2px solid #f59e0b',
          boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
        }}
      >
        <input
          type='text'
          value={editText}
          onChange={(e) => setEditText(e.target.value)}
          onKeyDown={handleKeyPress}
          autoFocus
          style={{
            width: '100%',
            padding: '10px',
            fontSize: '16px',
            border: '1px solid #d1d5db',
            borderRadius: '4px',
            marginBottom: '10px',
            boxSizing: 'border-box',
          }}
        />
        <div
          style={{ display: 'flex', gap: '8px', justifyContent: 'flex-end' }}
        >
          <button
            onClick={onCancelEdit}
            style={{
              padding: '8px 16px',
              background: '#6b7280',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontSize: '14px',
            }}
          >
            Cancel
          </button>
          <button
            onClick={handleSave}
            disabled={!editText.trim()}
            style={{
              padding: '8px 16px',
              background: editText.trim() ? '#10b981' : '#9ca3af',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: editText.trim() ? 'pointer' : 'not-allowed',
              fontSize: '14px',
            }}
          >
            Save
          </button>
        </div>
        <div style={{ fontSize: '12px', color: '#6b7280', marginTop: '8px' }}>
          Press Enter to save, Escape to cancel
        </div>
      </div>
    );
  }

  // ‚úÖ View Mode (same as before)
  return (
    <div
      style={{
        background: 'white',
        padding: '15px',
        borderRadius: '8px',
        marginBottom: '10px',
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',
        transition: 'all 0.2s',
      }}
    >
      <input
        type='checkbox'
        checked={todo.completed}
        onChange={() => onToggle(todo.id)}
        style={{
          width: '20px',
          height: '20px',
          cursor: 'pointer',
          accentColor: '#10b981',
        }}
      />

      <span
        style={{
          flex: 1,
          textDecoration: todo.completed ? 'line-through' : 'none',
          color: todo.completed ? '#9ca3af' : '#1f2937',
          fontSize: '16px',
          wordBreak: 'break-word',
        }}
      >
        {todo.text}
      </span>

      <span
        style={{
          fontSize: '11px',
          color: '#9ca3af',
          whiteSpace: 'nowrap',
        }}
      >
        {new Date(todo.createdAt).toLocaleDateString('en-US', {
          month: 'short',
          day: 'numeric',
        })}
      </span>

      <div style={{ display: 'flex', gap: '6px' }}>
        <button
          onClick={() => onStartEdit(todo.id)}
          disabled={todo.completed}
          style={{
            padding: '6px 12px',
            background: todo.completed ? '#d1d5db' : '#3b82f6',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: todo.completed ? 'not-allowed' : 'pointer',
            fontSize: '13px',
            fontWeight: '500',
          }}
        >
          Edit
        </button>
        <button
          onClick={() => onDelete(todo.id)}
          style={{
            padding: '6px 12px',
            background: '#ef4444',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '13px',
            fontWeight: '500',
          }}
        >
          Delete
        </button>
      </div>
    </div>
  );
}

// ‚úÖ Update TodoList
function TodoList({
  todos,
  editingId,
  onToggle,
  onDelete,
  onStartEdit,
  onSaveEdit,
  onCancelEdit,
}) {
  if (todos.length === 0) {
    return (
      <div
        style={{
          textAlign: 'center',
          padding: '60px 20px',
          color: '#9ca3af',
        }}
      >
        <div style={{ fontSize: '4em', marginBottom: '10px' }}>üì≠</div>
        <p style={{ fontSize: '1.1em', margin: 0 }}>No todos yet!</p>
        <p style={{ fontSize: '0.9em', margin: '5px 0 0 0' }}>
          Add one above to get started
        </p>
      </div>
    );
  }

  return (
    <div style={{ marginBottom: '20px' }}>
      {todos.map((todo) => (
        <TodoItem
          key={todo.id}
          todo={todo}
          isEditing={editingId === todo.id}
          onToggle={onToggle}
          onDelete={onDelete}
          onStartEdit={onStartEdit}
          onSaveEdit={onSaveEdit}
          onCancelEdit={onCancelEdit}
        />
      ))}
    </div>
  );
}

// ‚úÖ Update TodoApp with edit handlers
function TodoApp() {
  const [todos, setTodos] = useState([
    {
      id: 1,
      text: 'Learn React useState',
      completed: true,
      createdAt: Date.now() - 86400000,
    },
    {
      id: 2,
      text: 'Build Todo App',
      completed: false,
      createdAt: Date.now() - 3600000,
    },
    {
      id: 3,
      text: 'Master state management',
      completed: false,
      createdAt: Date.now(),
    },
  ]);

  const [filter, setFilter] = useState('all');
  const [editingId, setEditingId] = useState(null); // ‚úÖ Track which todo is being edited

  // ... previous handlers ...

  const handleAddTodo = (text) => {
    const newTodo = {
      id: Date.now(),
      text: text,
      completed: false,
      createdAt: Date.now(),
    };
    setTodos((prev) => [...prev, newTodo]);
  };

  const handleToggleTodo = (id) => {
    setTodos((prev) =>
      prev.map((todo) =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo,
      ),
    );
  };

  const handleDeleteTodo = (id) => {
    setTodos((prev) => prev.filter((todo) => todo.id !== id));
  };

  // ‚úÖ Edit handlers
  const handleStartEdit = (id) => {
    setEditingId(id);
  };

  const handleSaveEdit = (id, newText) => {
    setTodos((prev) =>
      prev.map((todo) => (todo.id === id ? { ...todo, text: newText } : todo)),
    );
    setEditingId(null);
  };

  const handleCancelEdit = () => {
    setEditingId(null);
  };

  const stats = {
    total: todos.length,
    active: todos.filter((t) => !t.completed).length,
    completed: todos.filter((t) => t.completed).length,
  };

  return (
    <div
      style={{
        maxWidth: '600px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'system-ui, -apple-system, sans-serif',
        background: '#f5f5f5',
        borderRadius: '12px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
      }}
    >
      {/* Header, Stats, AddForm - same as before */}

      {/* Filter Buttons */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        {['all', 'active', 'completed'].map((f) => (
          <button
            key={f}
            onClick={() => setFilter(f)}
            style={{
              flex: 1,
              padding: '10px',
              border: 'none',
              borderRadius: '6px',
              background: filter === f ? '#667eea' : '#e5e7eb',
              color: filter === f ? 'white' : '#374151',
              cursor: 'pointer',
              fontWeight: '500',
              fontSize: '14px',
              textTransform: 'capitalize',
              transition: 'all 0.2s',
            }}
          >
            {f}
          </button>
        ))}
      </div>

      {/* ‚úÖ TodoList with edit props */}
      <TodoList
        todos={todos}
        editingId={editingId}
        onToggle={handleToggleTodo}
        onDelete={handleDeleteTodo}
        onStartEdit={handleStartEdit}
        onSaveEdit={handleSaveEdit}
        onCancelEdit={handleCancelEdit}
      />

      {/* Footer - will implement next */}
    </div>
  );
}
```

**‚úÖ Checkpoint:**

- Can edit todos inline
- Edit mode with input and save/cancel buttons
- Enter to save, Escape to cancel
- Can't edit completed todos
- Validation prevents empty save

---

### Step 5: Filtering & Clear Completed (20 ph√∫t)

```jsx
/**
 * üéØ Goal: Implement filtering and clear completed
 * ‚è±Ô∏è Time: 20 min
 *
 * Tasks:
 * 1. Filter todos based on filter state
 * 2. Implement clear completed
 * 3. Update filter counts
 */

// ‚úÖ COMPLETE TodoApp with Filtering

function TodoApp() {
  const [todos, setTodos] = useState([
    {
      id: 1,
      text: 'Learn React useState',
      completed: true,
      createdAt: Date.now() - 86400000,
    },
    {
      id: 2,
      text: 'Build Todo App',
      completed: false,
      createdAt: Date.now() - 3600000,
    },
    {
      id: 3,
      text: 'Master state management',
      completed: false,
      createdAt: Date.now(),
    },
  ]);

  const [filter, setFilter] = useState('all');
  const [editingId, setEditingId] = useState(null);

  // Handlers
  const handleAddTodo = (text) => {
    const newTodo = {
      id: Date.now(),
      text: text,
      completed: false,
      createdAt: Date.now(),
    };
    setTodos((prev) => [...prev, newTodo]);
  };

  const handleToggleTodo = (id) => {
    setTodos((prev) =>
      prev.map((todo) =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo,
      ),
    );
  };

  const handleDeleteTodo = (id) => {
    // Cancel editing if deleting the todo being edited
    if (editingId === id) {
      setEditingId(null);
    }
    setTodos((prev) => prev.filter((todo) => todo.id !== id));
  };

  const handleStartEdit = (id) => {
    setEditingId(id);
  };

  const handleSaveEdit = (id, newText) => {
    setTodos((prev) =>
      prev.map((todo) => (todo.id === id ? { ...todo, text: newText } : todo)),
    );
    setEditingId(null);
  };

  const handleCancelEdit = () => {
    setEditingId(null);
  };

  // ‚úÖ Clear completed
  const handleClearCompleted = () => {
    setTodos((prev) => prev.filter((todo) => !todo.completed));
  };

  // ‚úÖ Derived state: Filtered todos
  const filteredTodos = todos.filter((todo) => {
    if (filter === 'active') return !todo.completed;
    if (filter === 'completed') return todo.completed;
    return true; // 'all'
  });

  // ‚úÖ Derived state: Stats
  const stats = {
    total: todos.length,
    active: todos.filter((t) => !t.completed).length,
    completed: todos.filter((t) => t.completed).length,
  };

  return (
    <div
      style={{
        maxWidth: '600px',
        margin: '40px auto',
        padding: '20px',
        fontFamily: 'system-ui, -apple-system, sans-serif',
        background: '#f5f5f5',
        borderRadius: '12px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
      }}
    >
      {/* Header */}
      <div style={{ textAlign: 'center', marginBottom: '30px' }}>
        <h1
          style={{
            fontSize: '2.5em',
            margin: '0 0 10px 0',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            WebkitBackgroundClip: 'text',
            WebkitTextFillColor: 'transparent',
            backgroundClip: 'text',
          }}
        >
          üìù Todo Master
        </h1>
        <p style={{ color: '#666', margin: 0 }}>
          Get things done, one task at a time
        </p>
      </div>

      {/* Stats */}
      <div
        style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(3, 1fr)',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
            cursor: 'pointer',
            transition: 'transform 0.2s',
            border:
              filter === 'all' ? '2px solid #667eea' : '2px solid transparent',
          }}
          onClick={() => setFilter('all')}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#667eea' }}
          >
            {stats.total}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Total</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
            cursor: 'pointer',
            transition: 'transform 0.2s',
            border:
              filter === 'active'
                ? '2px solid #f59e0b'
                : '2px solid transparent',
          }}
          onClick={() => setFilter('active')}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#f59e0b' }}
          >
            {stats.active}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Active</div>
        </div>
        <div
          style={{
            background: 'white',
            padding: '15px',
            borderRadius: '8px',
            textAlign: 'center',
            cursor: 'pointer',
            transition: 'transform 0.2s',
            border:
              filter === 'completed'
                ? '2px solid #10b981'
                : '2px solid transparent',
          }}
          onClick={() => setFilter('completed')}
        >
          <div
            style={{ fontSize: '1.5em', fontWeight: 'bold', color: '#10b981' }}
          >
            {stats.completed}
          </div>
          <div style={{ fontSize: '0.85em', color: '#666' }}>Done</div>
        </div>
      </div>

      {/* Add Form */}
      <AddTodoForm onAddTodo={handleAddTodo} />

      {/* Filter Buttons */}
      <div
        style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px',
        }}
      >
        {[
          { key: 'all', label: `All (${stats.total})` },
          { key: 'active', label: `Active (${stats.active})` },
          { key: 'completed', label: `Completed (${stats.completed})` },
        ].map(({ key, label }) => (
          <button
            key={key}
            onClick={() => setFilter(key)}
            style={{
              flex: 1,
              padding: '10px',
              border: 'none',
              borderRadius: '6px',
              background: filter === key ? '#667eea' : '#e5e7eb',
              color: filter === key ? 'white' : '#374151',
              cursor: 'pointer',
              fontWeight: '500',
              fontSize: '14px',
              transition: 'all 0.2s',
            }}
            onMouseOver={(e) => {
              if (filter !== key) e.target.style.background = '#d1d5db';
            }}
            onMouseOut={(e) => {
              if (filter !== key) e.target.style.background = '#e5e7eb';
            }}
          >
            {label}
          </button>
        ))}
      </div>

      {/* ‚úÖ Filtered Todo List */}
      <TodoList
        todos={filteredTodos}
        editingId={editingId}
        onToggle={handleToggleTodo}
        onDelete={handleDeleteTodo}
        onStartEdit={handleStartEdit}
        onSaveEdit={handleSaveEdit}
        onCancelEdit={handleCancelEdit}
      />

      {/* Footer with Clear Completed */}
      <div
        style={{
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
          paddingTop: '20px',
          borderTop: '1px solid #e5e7eb',
        }}
      >
        <div style={{ fontSize: '14px', color: '#6b7280' }}>
          {filteredTodos.length} {filteredTodos.length === 1 ? 'item' : 'items'}{' '}
          shown
        </div>

        <button
          onClick={handleClearCompleted}
          disabled={stats.completed === 0}
          style={{
            padding: '8px 16px',
            background: stats.completed > 0 ? '#ef4444' : '#d1d5db',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: stats.completed > 0 ? 'pointer' : 'not-allowed',
            fontSize: '14px',
            fontWeight: '500',
          }}
        >
          Clear Completed ({stats.completed})
        </button>
      </div>
    </div>
  );
}
```

**‚úÖ Checkpoint:**

- Filtering works (All/Active/Completed)
- Filter counts update dynamically
- Clear completed button works
- Can't clear when no completed todos
- Stats cards are clickable filters

---

## üî® PH·∫¶N 3: ENHANCEMENT EXERCISES (60 ph√∫t)

### ‚≠ê‚≠ê Exercise 1: Sort Todos (20 ph√∫t)

```jsx
/**
 * üéØ Goal: Add sorting functionality
 * ‚è±Ô∏è Time: 20 min
 *
 * Requirements:
 * - Sort by: Date (newest/oldest), Alphabetical (A-Z/Z-A)
 * - Dropdown selector
 * - Apply to filtered todos
 * - Remember sort preference
 *
 * Hint: Add sortBy state, create sorting logic, apply after filter
 */

// TODO: Add SortDropdown component
function SortDropdown({ sortBy, onSortChange }) {
  // Implement dropdown
}

// TODO: Update TodoApp with sorting
// const sorted Todos = [...filteredTodos].sort(...)
```

<details>
<summary>üí° Solution</summary>

```jsx
function SortDropdown({ sortBy, onSortChange }) {
  return (
    <div style={{ marginBottom: '20px' }}>
      <label
        style={{ marginRight: '10px', fontSize: '14px', color: '#6b7280' }}
      >
        Sort by:
      </label>
      <select
        value={sortBy}
        onChange={(e) => onSortChange(e.target.value)}
        style={{
          padding: '8px 12px',
          border: '2px solid #e5e7eb',
          borderRadius: '6px',
          fontSize: '14px',
          cursor: 'pointer',
          background: 'white',
        }}
      >
        <option value='date-desc'>Newest First</option>
        <option value='date-asc'>Oldest First</option>
        <option value='alpha-asc'>A ‚Üí Z</option>
        <option value='alpha-desc'>Z ‚Üí A</option>
      </select>
    </div>
  );
}

// In TodoApp:
const [sortBy, setSortBy] = useState('date-desc');

// After filtering, apply sorting
const sortedTodos = [...filteredTodos].sort((a, b) => {
  switch (sortBy) {
    case 'date-desc':
      return b.createdAt - a.createdAt;
    case 'date-asc':
      return a.createdAt - b.createdAt;
    case 'alpha-asc':
      return a.text.localeCompare(b.text);
    case 'alpha-desc':
      return b.text.localeCompare(a.text);
    default:
      return 0;
  }
});

// Render sortedTodos instead of filteredTodos
```

</details>

---

### ‚≠ê‚≠ê‚≠ê Exercise 2: Bulk Actions (30 ph√∫t)

```jsx
/**
 * üéØ Goal: Multi-select with bulk actions
 * ‚è±Ô∏è Time: 30 min
 *
 * Requirements:
 * - Checkbox to select multiple todos
 * - "Select All" option
 * - Bulk Delete
 * - Bulk Mark as Complete/Incomplete
 * - Show selected count
 * - Disable edit when in selection mode
 */

// TODO: Add selectedIds state
// TODO: Update TodoItem v·ªõi selection checkbox
// TODO: Add BulkActions component
```

<details>
<summary>üí° Solution</summary>

```jsx
/**
 * TodoItem component updated to support bulk selection mode
 * @param {object} todo - Todo object
 * @param {boolean} isEditing - Whether this todo is being edited
 * @param {boolean} selectionMode - Whether bulk selection is active
 * @param {boolean} isSelected - Whether this todo is currently selected
 * @param {function} onToggle - Toggle complete status
 * @param {function} onDelete - Delete single todo
 * @param {function} onStartEdit - Start editing this todo
 * @param {function} onSaveEdit - Save edited text
 * @param {function} onCancelEdit - Cancel editing
 * @param {function} onSelectToggle - Toggle selection for bulk actions
 */
function TodoItem({
  todo,
  isEditing,
  selectionMode,
  isSelected,
  onToggle,
  onDelete,
  onStartEdit,
  onSaveEdit,
  onCancelEdit,
  onSelectToggle
}) {
  const [editText, setEditText] = useState(todo.text);

  React.useEffect(() => {
    if (isEditing) setEditText(todo.text);
  }, [isEditing, todo.text]);

  const handleSave = () => {
    const trimmed = editText.trim();
    if (!trimmed) return;
    onSaveEdit(todo.id, trimmed);
  };

  const handleKeyPress = (e) => {
    if (e.key === 'Enter') handleSave();
    else if (e.key === 'Escape') onCancelEdit();
  };

  if (isEditing) {
    return (
      <div style={{ background: '#fffbeb', padding: '15px', borderRadius: '8px', marginBottom: '10px', border: '2px solid #f59e0b' }}>
        <input
          type="text"
          value={editText}
          onChange={(e) => setEditText(e.target.value)}
          onKeyDown={handleKeyPress}
          autoFocus
          style={{ width: '100%', padding: '10px', fontSize: '16px', border: '1px solid #d1d5db', borderRadius: '4px', marginBottom: '10px' }}
        />
        <div style={{ display: 'flex', gap: '8px', justifyContent: 'flex-end' }}>
          <button onClick={onCancelEdit} style={{ padding: '8px 16px', background: '#6b7280', color: 'white', border: 'none', borderRadius: '4px' }}>
            Cancel
          </button>
          <button
            onClick={handleSave}
            disabled={!editText.trim()}
            style={{ padding: '8px 16px', background: editText.trim() ? '#10b981' : '#9ca3af', color: 'white', border: 'none', borderRadius: '4px' }}
          >
            Save
          </button>
        </div>
      </div>
    );
  }

  return (
    <div style={{
      background: 'white',
      padding: '15px',
      borderRadius: '8px',
      marginBottom: '10px',
      display: 'flex',
      alignItems: 'center',
      gap: '12px',
      boxShadow: '0 1px 3px rgba(0,0,0,0.1)'
    }}>
      {selectionMode ? (
        <input
          type="checkbox"
          checked={isSelected}
          onChange={() => onSelectToggle(todo.id)}
          style={{ width: '20px', height: '20px', cursor: 'pointer' }}
        />
      ) : (
        <input
          type="checkbox"
          checked={todo.completed}
          onChange={() => onToggle(todo.id)}
          style={{ width: '20px', height: '20px', cursor: 'pointer', accentColor: '#10b981' }}
        />
      )}

      <span style={{
        flex: 1,
        textDecoration: todo.completed ? 'line-through' : 'none',
        color: todo.completed ? '#9ca3af' : '#1f2937',
        fontSize: '16px'
      }}>
        {todo.text}
      </span>

      {!selectionMode && (
        <>
          <span style={{ fontSize: '11px', color: '#9ca3af' }}>
            {new Date(todo.createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
          </span>

          <div style={{ display: 'flex', gap: '6px' }}>
            <button
              onClick={() => onStartEdit(todo.id)}
              disabled={todo.completed}
              style={{ padding: '6px 12px', background: todo.completed ? '#d1d5db' : '#3b82f6', color: 'white', border: 'none', borderRadius: '4px' }}
            >
              Edit
            </button>
            <button
              onClick={() => onDelete(todo.id)}
              style={{ padding: '6px 12px', background: '#ef4444', color: 'white', border: 'none', borderRadius: '4px' }}
            >
              Delete
            </button>
          </div>
        </>
      )}
    </div>
  );
}

/**
 * BulkActions component - shown when selectionMode is active
 * @param {number} selectedCount - Number of currently selected todos
 * @param {function} onClearSelection - Deselect all
 * @param {function} onBulkDelete - Delete all selected
 * @param {function} onBulkComplete - Mark all selected as complete
 * @param {function} onBulkIncomplete - Mark all selected as incomplete
 */
function BulkActions({ selectedCount, onClearSelection, onBulkDelete, onBulkComplete, onBulkIncomplete }) {
  if (selectedCount === 0) return null;

  return (
    <div style={{
      background: '#fef3c7',
      padding: '12px 16px',
      borderRadius: '8px',
      margin: '16px 0',
      display: 'flex',
      alignItems: 'center',
      gap: '16px',
      flexWrap: 'wrap'
    }}>
      <div style={{ fontWeight: '500' }}>
        {selectedCount} selected
      </div>

      <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>
        <button
          onClick={onBulkComplete}
          style={{ padding: '8px 16px', background: '#10b981', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer' }}
        >
          Mark Complete
        </button>
        <button
          onClick={onBulkIncomplete}
          style={{ padding: '8px 16px', background: '#3b82f6', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer' }}
        >
          Mark Incomplete
        </button>
        <button
          onClick={onBulkDelete}
          style={{ padding: '8px 16px', background: '#ef4444', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer' }}
        >
          Delete Selected
        </button>
      </div>

      <button
        onClick={onClearSelection}
        style={{ padding: '8px 16px', background: '#6b7280', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer', marginLeft: 'auto' }}
      >
        Cancel
      </button>
    </div>
  );
}

// In TodoApp component - add these states and handlers:

const [selectionMode, setSelectionMode] = useState(false);
const [selectedIds, setSelectedIds] = useState(new Set());

// Toggle selection mode (e.g. long-press or dedicated button - here we use a simple toggle for demo)
const toggleSelectionMode = () => {
  setSelectionMode(prev => !prev);
  if (selectionMode) {
    setSelectedIds(new Set()); // clear selection when exiting mode
  }
};

// Toggle individual selection
const handleSelectToggle = (id) => {
  setSelectedIds(prev => {
    const newSet = new Set(prev);
    if (newSet.has(id)) {
      newSet.delete(id);
    } else {
      newSet.add(id);
    }
    return newSet;
  });
};

// Select / deselect all visible (filtered) todos
const handleSelectAll = () => {
  if (selectedIds.size === filteredTodos.length) {
    setSelectedIds(new Set());
  } else {
    setSelectedIds(new Set(filteredTodos.map(t => t.id)));
  }
};

// Bulk operations
const handleBulkDelete = () => {
  setTodos(prev => prev.filter(todo => !selectedIds.has(todo.id)));
  setSelectedIds(new Set());
  setSelectionMode(false);
};

const handleBulkComplete = (completed = true) => {
  setTodos(prev => prev.map(todo =>
    selectedIds.has(todo.id)
      ? { ...todo, completed }
      : todo
  ));
  setSelectedIds(new Set());
  setSelectionMode(false);
};

// In render - add toggle button somewhere (example: near filters)
<button
  onClick={toggleSelectionMode}
  style={{
    padding: '8px 16px',
    background: selectionMode ? '#f59e0b' : '#6b7280',
    color: 'white',
    border: 'none',
    borderRadius: '6px',
    marginBottom: '16px'
  }}
>
  {selectionMode ? 'Exit Selection' : 'Select Multiple'}
</button>

// Show select all checkbox when in selection mode
{selectionMode && (
  <div style={{ marginBottom: '12px', fontSize: '14px' }}>
    <label style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
      <input
        type="checkbox"
        checked={selectedIds.size === filteredTodos.length && filteredTodos.length > 0}
        onChange={handleSelectAll}
      />
      Select All ({filteredTodos.length})
    </label>
  </div>
)}

// Show BulkActions panel
<BulkActions
  selectedCount={selectedIds.size}
  onClearSelection={() => { setSelectedIds(new Set()); setSelectionMode(false); }}
  onBulkDelete={handleBulkDelete}
  onBulkComplete={() => handleBulkComplete(true)}
  onBulkIncomplete={() => handleBulkComplete(false)}
/>

// Pass new props to TodoList ‚Üí TodoItem
<TodoList
  todos={sortedTodos} // or filteredTodos
  editingId={editingId}
  selectionMode={selectionMode}
  selectedIds={selectedIds}
  onToggle={handleToggleTodo}
  onDelete={handleDeleteTodo}
  onStartEdit={handleStartEdit}
  onSaveEdit={handleSaveEdit}
  onCancelEdit={handleCancelEdit}
  onSelectToggle={handleSelectToggle}
/>

// In TodoList - pass selection props down
{todos.map(todo => (
  <TodoItem
    key={todo.id}
    todo={todo}
    isEditing={editingId === todo.id}
    selectionMode={selectionMode}
    isSelected={selectedIds.has(todo.id)}
    onToggle={onToggle}
    onDelete={onDelete}
    onStartEdit={onStartEdit}
    onSaveEdit={onSaveEdit}
    onCancelEdit={onCancelEdit}
    onSelectToggle={onSelectToggle}
  />
))}

// Result example:
// ‚Üí Enter selection mode ‚Üí check 3 todos ‚Üí click "Mark Complete" ‚Üí those 3 become completed & selection clears
// ‚Üí Check 4 todos ‚Üí click "Delete Selected" ‚Üí those 4 are removed from list
```

</details>

---

### ‚≠ê‚≠ê‚≠ê‚≠ê Exercise 3: Undo/Redo (40 ph√∫t)

```jsx
/**
 * üéØ Goal: Implement undo/redo functionality
 * ‚è±Ô∏è Time: 40 min
 *
 * Requirements:
 * - Track history of todo states
 * - Undo button (Ctrl+Z)
 * - Redo button (Ctrl+Y)
 * - Limit history to last 10 actions
 * - Show undo/redo buttons with counts
 *
 * Hint: Maintain historyStack and currentIndex
 */
```

<details>
<summary>üí° Solution</summary>

```jsx
/**
 * Undo/Redo implementation using history stack
 * Limits history to last 10 actions to prevent memory issues
 * Supports Ctrl+Z (undo) and Ctrl+Y (redo)
 */

// Add these states in TodoApp
const [todos, setTodos] = useState(initialTodos);
const [history, setHistory] = useState([initialTodos]); // array of todo arrays
const [currentIndex, setCurrentIndex] = useState(0);
const MAX_HISTORY = 10;

// Helper to save current state to history
const saveToHistory = (newTodos) => {
  setHistory((prev) => {
    // Keep up to currentIndex + new state, discard future if any
    const newHistory = [...prev.slice(0, currentIndex + 1), newTodos];
    // Limit size
    return newHistory.length > MAX_HISTORY
      ? newHistory.slice(newHistory.length - MAX_HISTORY)
      : newHistory;
  });
  setCurrentIndex((prev) => Math.min(prev + 1, MAX_HISTORY - 1));
};

// Wrap every state-changing function with history saving
const handleAddTodo = (text) => {
  const newTodo = {
    id: Date.now(),
    text,
    completed: false,
    createdAt: Date.now(),
  };
  setTodos((prev) => {
    const updated = [...prev, newTodo];
    saveToHistory(updated);
    return updated;
  });
};

const handleToggleTodo = (id) => {
  setTodos((prev) => {
    const updated = prev.map((todo) =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo,
    );
    saveToHistory(updated);
    return updated;
  });
};

const handleDeleteTodo = (id) => {
  setTodos((prev) => {
    const updated = prev.filter((todo) => todo.id !== id);
    saveToHistory(updated);
    // Also cancel editing if needed
    if (editingId === id) setEditingId(null);
    return updated;
  });
};

const handleSaveEdit = (id, newText) => {
  setTodos((prev) => {
    const updated = prev.map((todo) =>
      todo.id === id ? { ...todo, text: newText } : todo,
    );
    saveToHistory(updated);
    setEditingId(null);
    return updated;
  });
};

const handleClearCompleted = () => {
  setTodos((prev) => {
    const updated = prev.filter((todo) => !todo.completed);
    saveToHistory(updated);
    return updated;
  });
};

// Bulk actions should also save to history (example for bulk delete)
const handleBulkDelete = () => {
  setTodos((prev) => {
    const updated = prev.filter((todo) => !selectedIds.has(todo.id));
    saveToHistory(updated);
    setSelectedIds(new Set());
    setSelectionMode(false);
    return updated;
  });
};

// Undo / Redo handlers
const handleUndo = () => {
  if (currentIndex <= 0) return;
  const previousIndex = currentIndex - 1;
  setCurrentIndex(previousIndex);
  setTodos(history[previousIndex]);
};

const handleRedo = () => {
  if (currentIndex >= history.length - 1) return;
  const nextIndex = currentIndex + 1;
  setCurrentIndex(nextIndex);
  setTodos(history[nextIndex]);
};

// Keyboard shortcuts (add in useEffect)
React.useEffect(() => {
  const handleKeyDown = (e) => {
    if (e.ctrlKey || e.metaKey) {
      if (e.key.toLowerCase() === 'z') {
        e.preventDefault();
        handleUndo();
      } else if (e.key.toLowerCase() === 'y') {
        e.preventDefault();
        handleRedo();
      }
    }
  };

  window.addEventListener('keydown', handleKeyDown);
  return () => window.removeEventListener('keydown', handleKeyDown);
}, [currentIndex, history]);

// Optional: Undo/Redo buttons in UI (e.g. in footer or header)
<div
  style={{
    display: 'flex',
    gap: '12px',
    marginTop: '16px',
    justifyContent: 'center',
  }}
>
  <button
    onClick={handleUndo}
    disabled={currentIndex <= 0}
    title='Undo (Ctrl+Z)'
    style={{
      padding: '8px 16px',
      background: currentIndex <= 0 ? '#d1d5db' : '#3b82f6',
      color: 'white',
      border: 'none',
      borderRadius: '6px',
      cursor: currentIndex <= 0 ? 'not-allowed' : 'pointer',
    }}
  >
    Undo
  </button>

  <button
    onClick={handleRedo}
    disabled={currentIndex >= history.length - 1}
    title='Redo (Ctrl+Y)'
    style={{
      padding: '8px 16px',
      background: currentIndex >= history.length - 1 ? '#d1d5db' : '#10b981',
      color: 'white',
      border: 'none',
      borderRadius: '6px',
      cursor: currentIndex >= history.length - 1 ? 'not-allowed' : 'pointer',
    }}
  >
    Redo
  </button>
</div>;

// Result example:
// ‚Üí Add 3 todos ‚Üí toggle one ‚Üí delete one ‚Üí click Undo ‚Üí last delete is reverted
// ‚Üí Click Undo again ‚Üí toggle is reverted
// ‚Üí Click Redo twice ‚Üí delete and toggle are re-applied
// ‚Üí After 10+ actions, oldest ones are dropped from history
```

</details>

---

## üìä PH·∫¶N 4: CODE REVIEW & REFACTORING (30 ph√∫t)

### Checklist T·ª± Review Code

Review code c·ªßa b·∫°n theo c√°c ti√™u ch√≠ sau:

**Qu·∫£n l√Ω State:**

- [ ] C·∫•u tr√∫c state h·ª£p l√Ω (m·∫£ng todos, chu·ªói filter)
- [ ] Kh√¥ng c√≥ state tr√πng l·∫∑p (stats ƒë∆∞·ª£c suy ra)
- [ ] C·∫≠p nh·∫≠t b·∫•t bi·∫øn (immutable) xuy√™n su·ªët
- [ ] S·ª≠ d·ª•ng functional updates khi c·∫ßn

**Ki·∫øn tr√∫c Component:**

- [ ] Ph√¢n t√°ch tr√°ch nhi·ªám r√µ r√†ng
- [ ] Interface props ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a r√µ
- [ ] Ph√¢n bi·ªát h·ª£p l√Ω state c·ª•c b·ªô v√† state ƒë∆∞·ª£c n√¢ng l√™n
- [ ] Component c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng

**Ch·∫•t l∆∞·ª£ng Code:**

- [ ] Kh√¥ng d√πng magic numbers/strings (s·ª≠ d·ª•ng h·∫±ng s·ªë)
- [ ] T√™n bi·∫øn c√≥ √Ω nghƒ©a
- [ ] Format nh·∫•t qu√°n
- [ ] Kh√¥ng c√≥ code kh√¥ng s·ª≠ d·ª•ng

**C√°c Tr∆∞·ªùng H·ª£p Bi√™n:**

- [ ] X·ª≠ l√Ω danh s√°ch todo r·ªóng
- [ ] Validate input r·ªóng
- [ ] C√°c tr∆∞·ªùng h·ª£p bi√™n khi ·ªü ch·∫ø ƒë·ªô ch·ªânh s·ª≠a
- [ ] X·ª≠ l√Ω x√≥a trong khi ƒëang ch·ªânh s·ª≠a

**UX:**

- [ ] Ph·∫£n h·ªìi tr·ª±c quan cho m·ªçi h√†nh ƒë·ªông
- [ ] Tr·∫°ng th√°i loading (hi·ªán ch∆∞a c·∫ßn)
- [ ] Th√¥ng b√°o l·ªói
- [ ] Ph√≠m t·∫Øt b√†n ph√≠m

---

### C∆° H·ªôi Refactor

```jsx
// ‚ùå TR∆Ø·ªöC: Magic strings - kh√¥ng ki·ªÉm so√°t ƒë∆∞·ª£c
const [filter, setFilter] = useState('all');

if (filter === 'active') { ... }
if (filter === 'completed') { ... }

// ‚úÖ SAU: Constant H·∫±ng s·ªë
const FILTERS = {
  ALL: 'all',
  ACTIVE: 'active',
  COMPLETED: 'completed'
};

const [filter, setFilter] = useState(FILTERS.ALL);

if (filter === FILTERS.ACTIVE) { ... }
```

```jsx
// ‚ùå TR∆Ø·ªöC: Style l·∫∑p l·∫°i
<div style={{ background: '#667eea', padding: '10px', borderRadius: '6px' }}>
<div style={{ background: '#667eea', padding: '10px', borderRadius: '6px' }}>

// ‚úÖ SAU: constant style
const STYLES = {
  primaryButton: {
    background: '#667eea',
    padding: '10px',
    borderRadius: '6px'
  }
};

<div style={STYLES.primaryButton}>
```

---

## ‚úÖ PH·∫¶N 5: T·ª∞ ƒê√ÅNH GI√Å (15 ph√∫t)

### Checklist Ho√†n Th√†nh D·ª± √Ån

**T√≠nh NƒÉng C·ªët L√µi:**

- [ ] Th√™m todo ‚úÖ
- [ ] Ch·ªânh s·ª≠a todo ‚úÖ
- [ ] X√≥a todo ‚úÖ
- [ ] ƒê√°nh d·∫•u ho√†n th√†nh ‚úÖ
- [ ] L·ªçc (T·∫•t c·∫£ / ƒêang l√†m / Ho√†n th√†nh) ‚úÖ
- [ ] X√≥a c√°c todo ƒë√£ ho√†n th√†nh ‚úÖ
- [ ] Hi·ªÉn th·ªã th·ªëng k√™ ‚úÖ

**Ch·∫•t L∆∞·ª£ng Code:**

- [ ] Kh√¥ng c√≥ bug trong lu·ªìng ch√≠nh (happy path)
- [ ] ƒê√£ x·ª≠ l√Ω c√°c tr∆∞·ªùng h·ª£p bi√™n
- [ ] C·∫≠p nh·∫≠t state b·∫•t bi·∫øn (immutable)
- [ ] Kh√¥ng l∆∞u state suy ra (derived state)
- [ ] C·∫•u tr√∫c component g·ªçn g√†ng

**C√°c Pattern ƒê√£ √Åp D·ª•ng:**

- [ ] N√¢ng state l√™n (filter d√πng chung)
- [ ] Controlled components (form, input)
- [ ] Functional updates
- [ ] Props truy·ªÅn xu·ªëng, callback truy·ªÅn l√™n
- [ ] State c·ª•c b·ªô khi ph√π h·ª£p

### Nh·ªØng G√¨ ƒê√£ H·ªçc ƒê∆∞·ª£c

Ghi l·∫°i 3 b√†i h·ªçc ch√≠nh:

1. ***
2. ***
3. ***

---

## üè† B√ÄI T·∫¨P V·ªÄ NH√Ä

### B·∫Øt bu·ªôc (30 ph√∫t)

**B√†i T·∫≠p: Th√™m Categories**

M·ªü r·ªông ·ª©ng d·ª•ng todo v·ªõi categories:

- M·ªói todo c√≥ category t√πy ch·ªçn (C√¥ng vi·ªác, C√° nh√¢n, Mua s·∫Øm, v.v.)
- Dropdown ƒë·ªÉ ch·ªçn category khi th√™m todo
- L·ªçc theo category
- Hi·ªÉn th·ªã badge category tr√™n m·ªói todo item

<details>
<summary>üí° Solution</summary>

```jsx
/**
 * B√ÄI T·∫¨P V·ªÄ NH√Ä 1: Add Categories
 *
 * Th√™m category cho m·ªói todo:
 * - Khi add: ch·ªçn category t·ª´ dropdown
 * - Hi·ªÉn th·ªã badge category tr√™n m·ªói todo item
 * - Th√™m filter theo category (bao g·ªìm "All Categories")
 */

// Th√™m constants cho categories
const CATEGORIES = [
  { value: 'all', label: 'All Categories' },
  { value: 'work', label: 'Work', color: '#3b82f6' },
  { value: 'personal', label: 'Personal', color: '#10b981' },
  { value: 'shopping', label: 'Shopping', color: '#f59e0b' },
  { value: 'health', label: 'Health', color: '#ef4444' },
  { value: 'other', label: 'Other', color: '#8b5cf6' }
];

/**
 * CategoryBadge component
 * @param {string} category - category value ('work', 'personal', ...)
 */
function CategoryBadge({ category }) {
  if (category === 'all' || !category) return null;

  const cat = CATEGORIES.find(c => c.value === category);
  if (!cat) return null;

  return (
    <span style={{
      padding: '4px 10px',
      backgroundColor: cat.color + '22', // opacity 13%
      color: cat.color,
      borderRadius: '12px',
      fontSize: '12px',
      fontWeight: '500',
      marginLeft: '8px'
    }}>
      {cat.label}
    </span>
  );
}

/**
 * CategoryFilter component
 * @param {string} selectedCategory
 * @param {function} onCategoryChange
 */
function CategoryFilter({ selectedCategory, onCategoryChange }) {
  return (
    <div style={{ marginBottom: '16px' }}>
      <select
        value={selectedCategory}
        onChange={(e) => onCategoryChange(e.target.value)}
        style={{
          padding: '8px 12px',
          border: '2px solid #e5e7eb',
          borderRadius: '6px',
          fontSize: '14px',
          background: 'white',
          minWidth: '180px'
        }}
      >
        {CATEGORIES.map(cat => (
          <option key={cat.value} value={cat.value}>
            {cat.label}
          </option>
        ))}
      </select>
    </div>
  );
}

/**
 * AddTodoForm updated with category selection
 */
function AddTodoForm({ onAddTodo }) {
  const [input, setInput] = useState('');
  const [category, setCategory] = useState('work'); // default category

  const handleSubmit = (e) => {
    e.preventDefault();
    const trimmed = input.trim();
    if (!trimmed) return;

    onAddTodo(trimmed, category);
    setInput('');
    // category gi·ªØ nguy√™n ho·∫∑c reset v·ªÅ default n·∫øu mu·ªën
  };

  return (
    <form
      onSubmit={handleSubmit}
      style={{
        background: 'white',
        padding: '20px',
        borderRadius: '8px',
        marginBottom: '20px',
        boxShadow: '0 2px 4px rgba(0,0,0,0.05)'
      }}
    >
      <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>
        <input
          type="text"
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder="What needs to be done?"
          style={{ flex: 1, minWidth: '200px' }}
        />

        <select
          value={category}
          onChange={(e) => setCategory(e.target.value)}
          style={{
            padding: '12px',
            border: '2px solid #e5e7eb',
            borderRadius: '6px',
            fontSize: '16px'
          }}
        >
          {CATEGORIES.slice(1).map(cat => ( // b·ªè "All Categories"
            <option key={cat.value} value={cat.value}>
              {cat.label}
            </option>
          ))}
        </select>

        <button
          type="submit"
          style={{
            padding: '12px 24px',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: '600'
          }}
        >
          Add Todo
        </button>
      </div>
    </form>
  );
}

// Trong TodoApp - th√™m state v√† logic
const [categoryFilter, setCategoryFilter] = useState('all');

// Khi add todo
const handleAddTodo = (text, category) => {
  const newTodo = {
    id: Date.now(),
    text,
    completed: false,
    createdAt: Date.now(),
    category // th√™m field category
  };
  setTodos(prev => [...prev, newTodo]);
};

// Filtered todos - th√™m ƒëi·ªÅu ki·ªán category
const filteredTodos = todos.filter(todo => {
  const matchStatus =
    filter === 'all' ? true :
    filter === 'active' ? !todo.completed :
    filter === 'completed' ? todo.completed : true;

  const matchCategory =
    categoryFilter === 'all' ? true :
    todo.category === categoryFilter;

  return matchStatus && matchCategory;
});

// Trong TodoItem - hi·ªÉn th·ªã badge
// Trong ph·∫ßn view mode, sau span text:
<span style={{
  flex: 1,
  textDecoration: todo.completed ? 'line-through' : 'none',
  color: todo.completed ? '#9ca3af' : '#1f2937',
  fontSize: '16px',
  display: 'flex',
  alignItems: 'center'
}}>
  {todo.text}
  <CategoryBadge category={todo.category} />
</span>

// Trong ph·∫ßn render filter UI - th√™m CategoryFilter
// V√≠ d·ª•: ngay sau FilterButtons (All/Active/Completed)
<CategoryFilter
  selectedCategory={categoryFilter}
  onCategoryChange={setCategoryFilter}
/>

// Optional: Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng trong filter category (n√¢ng cao)
const categoryCounts = CATEGORIES.reduce((acc, cat) => {
  if (cat.value === 'all') {
    acc[cat.value] = todos.length;
  } else {
    acc[cat.value] = todos.filter(t => t.category === cat.value).length;
  }
  return acc;
}, {});

// C√≥ th·ªÉ hi·ªÉn th·ªã trong select ho·∫∑c label ri√™ng

// Result example:
// ‚Üí Add "Meeting with client" ‚Üí category "Work"
// ‚Üí Add "Buy groceries" ‚Üí category "Shopping"
// ‚Üí Ch·ªçn filter "Work" ‚Üí ch·ªâ th·∫•y todos c√≥ category "work"
// ‚Üí Badge m√†u xanh d∆∞∆°ng hi·ªán b√™n c·∫°nh text "Meeting with client"
// ‚Üí Ch·ªçn "All Categories" ‚Üí th·∫•y to√†n b·ªô todos b·∫•t k·ªÉ category
```

</details>

---

### N√¢ng cao (60 ph√∫t)

**B√†i T·∫≠p: M·ª©c ƒê·ªô ∆Øu Ti√™n**

Th√™m h·ªá th·ªëng m·ª©c ƒë·ªô ∆∞u ti√™n:

- M·ª©c ƒë·ªô ∆∞u ti√™n: Th·∫•p, Trung b√¨nh, Cao, Kh·∫©n c·∫•p
- M√£ m√†u theo m·ª©c ƒë·ªô
- S·∫Øp x·∫øp theo m·ª©c ƒë·ªô ∆∞u ti√™n
- L·ªçc theo m·ª©c ƒë·ªô ∆∞u ti√™n
- Ch·ªâ b√°o tr·ª±c quan (üî¥ üü° üü¢)

<details>
<summary>üí° Solution</summary>

```jsx
/**
 * B√ÄI T·∫¨P V·ªÄ NH√Ä N√ÇNG CAO: Priority Levels
 *
 * Th√™m h·ªá th·ªëng priority cho m·ªói todo:
 * - Priority: low, medium, high, urgent
 * - Color coding: üî¥ Urgent (red), üü† High (orange), üü° Medium (yellow), üü¢ Low (green)
 * - Visual indicators (emoji + colored badge)
 * - Sort by priority (urgent ‚Üí high ‚Üí medium ‚Üí low)
 * - Filter by priority (bao g·ªìm "All Priorities")
 */

// Constants cho priority
const PRIORITIES = [
  { value: 'all', label: 'All Priorities', color: '#6b7280', emoji: 'üìä' },
  { value: 'urgent', label: 'Urgent', color: '#ef4444', emoji: 'üî¥' },
  { value: 'high', label: 'High', color: '#f97316', emoji: 'üü†' },
  { value: 'medium', label: 'Medium', color: '#eab308', emoji: 'üü°' },
  { value: 'low', label: 'Low', color: '#10b981', emoji: 'üü¢' }
];

/**
 * PriorityBadge component
 * @param {string} priority - 'urgent' | 'high' | 'medium' | 'low'
 */
function PriorityBadge({ priority }) {
  if (priority === 'all' || !priority) return null;

  const pri = PRIORITIES.find(p => p.value === priority);
  if (!pri) return null;

  return (
    <span style={{
      display: 'inline-flex',
      alignItems: 'center',
      gap: '6px',
      padding: '4px 10px',
      backgroundColor: pri.color + '22',
      color: pri.color,
      borderRadius: '12px',
      fontSize: '13px',
      fontWeight: '600',
      marginLeft: '10px',
      border: `1px solid ${pri.color}44`
    }}>
      {pri.emoji} {pri.label}
    </span>
  );
}

/**
 * PriorityFilter component (dropdown)
 * @param {string} selectedPriority
 * @param {function} onPriorityChange
 */
function PriorityFilter({ selectedPriority, onPriorityChange }) {
  return (
    <div style={{ margin: '16px 0' }}>
      <select
        value={selectedPriority}
        onChange={(e) => onPriorityChange(e.target.value)}
        style={{
          padding: '10px 14px',
          border: '2px solid #e5e7eb',
          borderRadius: '8px',
          fontSize: '15px',
          background: 'white',
          minWidth: '200px',
          cursor: 'pointer'
        }}
      >
        {PRIORITIES.map(p => (
          <option key={p.value} value={p.value}>
            {p.emoji} {p.label}
          </option>
        ))}
      </select>
    </div>
  );
}

/**
 * AddTodoForm updated v·ªõi priority selection
 */
function AddTodoForm({ onAddTodo }) {
  const [input, setInput] = useState('');
  const [priority, setPriority] = useState('medium'); // default medium

  const handleSubmit = (e) => {
    e.preventDefault();
    const trimmed = input.trim();
    if (!trimmed) return;

    onAddTodo(trimmed, priority);
    setInput('');
  };

  return (
    <form onSubmit={handleSubmit} style={{ /* gi·ªØ style c≈© */ }}>
      <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap', alignItems: 'center' }}>
        <input
          type="text"
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder="What needs to be done?"
          style={{ flex: 1, minWidth: '220px' }}
        />

        <select
          value={priority}
          onChange={(e) => setPriority(e.target.value)}
          style={{
            padding: '12px',
            border: '2px solid #e5e7eb',
            borderRadius: '8px',
            fontSize: '16px',
            minWidth: '160px'
          }}
        >
          {PRIORITIES.slice(1).map(p => ( // b·ªè All
            <option key={p.value} value={p.value}>
              {p.emoji} {p.label}
            </option>
          ))}
        </select>

        <button type="submit" style={{ /* gi·ªØ style n√∫t Add */ }}>
          Add Todo
        </button>
      </div>
    </form>
  );
}

// Trong TodoApp - th√™m state v√† logic
const [priorityFilter, setPriorityFilter] = useState('all');

// Khi add todo
const handleAddTodo = (text, priority) => {
  const newTodo = {
    id: Date.now(),
    text,
    completed: false,
    createdAt: Date.now(),
    category: 'work', // n·∫øu ƒë√£ c√≥ category t·ª´ b√†i tr∆∞·ªõc
    priority        // th√™m field priority
  };
  setTodos(prev => [...prev, newTodo]);
};

// Filtered todos - th√™m ƒëi·ªÅu ki·ªán priority
const filteredTodos = todos.filter(todo => {
  const matchStatus = /* logic filter All/Active/Completed nh∆∞ c≈© */;
  const matchCategory = /* logic category n·∫øu c√≥ */;

  const matchPriority =
    priorityFilter === 'all' ? true :
    todo.priority === priorityFilter;

  return matchStatus && matchCategory && matchPriority;
});

// Sort by priority (sau khi filter, tr∆∞·ªõc khi render)
const priorityOrder = {
  urgent: 4,
  high: 3,
  medium: 2,
  low: 1
};

const sortedTodos = [...filteredTodos].sort((a, b) => {
  const priA = priorityOrder[a.priority] || 0;
  const priB = priorityOrder[b.priority] || 0;
  return priB - priA; // cao h∆°n tr∆∞·ªõc (urgent ‚Üí low)
});

// Trong TodoItem - hi·ªÉn th·ªã priority badge
// Trong ph·∫ßn view mode, sau text:
<span style={{
  flex: 1,
  display: 'flex',
  alignItems: 'center',
  flexWrap: 'wrap'
}}>
  {todo.text}
  <PriorityBadge priority={todo.priority} />
  {/* n·∫øu c√≥ category th√¨ th√™m CategoryBadge */}
</span>

// Trong render UI - th√™m PriorityFilter
// V√≠ d·ª•: sau CategoryFilter (n·∫øu c√≥) ho·∫∑c sau FilterButtons
<PriorityFilter
  selectedPriority={priorityFilter}
  onPriorityChange={setPriorityFilter}
/>

// Optional: Hi·ªÉn th·ªã count trong filter
const priorityCounts = PRIORITIES.reduce((acc, p) => {
  acc[p.value] = p.value === 'all'
    ? todos.length
    : todos.filter(t => t.priority === p.value).length;
  return acc;
}, {});

// C√≥ th·ªÉ hi·ªÉn th·ªã trong option ho·∫∑c label ri√™ng: {p.emoji} {p.label} ({priorityCounts[p.value]})

// Result example:
// ‚Üí Add "Fix critical bug" ‚Üí priority "urgent" ‚Üí badge üî¥ Urgent (ƒë·ªè)
// ‚Üí Add "Read article" ‚Üí priority "low" ‚Üí badge üü¢ Low (xanh)
// ‚Üí Ch·ªçn filter "High" ‚Üí ch·ªâ th·∫•y todos priority high
// ‚Üí Todos ƒë∆∞·ª£c s·∫Øp x·∫øp: Urgent ƒë·∫ßu ti√™n ‚Üí High ‚Üí Medium ‚Üí Low
// ‚Üí M√†u s·∫Øc badge gi√∫p nh·∫≠n bi·∫øt nhanh m·ª©c ƒë·ªô quan tr·ªçng
```

</details>

---

## üìö T√ÄI LI·ªÜU THAM KH·∫¢O

### B·∫Øt bu·ªôc ƒë·ªçc

1. **React Docs - Thinking in React**
   - https://react.dev/learn/thinking-in-react
   - How to approach building apps

2. **Review Ng√†y 11-14**
   - useState patterns
   - Lifting state up
   - Forms
   - All concepts used today

### ƒê·ªçc th√™m

3. **Component Design Patterns**
   - Presentational vs Container components
   - Composition patterns

---

## üîó K·∫æT N·ªêI KI·∫æN TH·ª®C

### Ki·∫øn th·ª©c ƒë√£ √°p d·ª•ng (Ng√†y 11-14)

- **Ng√†y 11**: useState basics
- **Ng√†y 12**: Functional updates, immutability, state structure
- **Ng√†y 13**: Forms, controlled components, validation
- **Ng√†y 14**: Lifting state up, props drilling

### H∆∞·ªõng t·ªõi (s·∫Ω h·ªçc)

- **Ng√†y 17-21**: useEffect - Add localStorage persistence
- **Ng√†y 23-28**: Performance - Optimize re-renders
- **Ng√†y 30**: useReducer - Alternative state management

---

## üí° SENIOR INSIGHTS

### Production Considerations

**Accessibility:**

```jsx
// ‚úÖ Add ARIA labels
<button aria-label="Delete todo">Delete</button>
<input aria-describedby="todo-help" />
```

**Performance:**

```jsx
// ‚ö†Ô∏è Hi·ªán t·∫°i: L·ªçc l·∫°i m·ªói l·∫ßn render
const filteredTodos = todos.filter(...);

// ‚úÖ Sau n√†y: Memoize b·∫±ng useMemo (Ng√†y 23)
const filteredTodos = useMemo(() => todos.filter(...), [todos, filter]);
```

**Testing Considerations:**

- H√†m thu·∫ßn (pure functions) d·ªÖ ki·ªÉm th·ª≠ (validator, filter)
- Ki·ªÉm th·ª≠ component (s·∫Ω h·ªçc sau)
- Ki·ªÉm th·ª≠ t√≠ch h·ª£p

---

## üéØ TI·∫æP THEO L√Ä G√å

**Ng√†y 16: Review Tu·∫ßn 1‚Äì2**

Ng√†y mai ch√∫ng ta s·∫Ω:

- Review t·∫•t c·∫£ c√°c kh√°i ni·ªám t·ª´ Ng√†y 11‚Äì15
- C√°c l·ªói th∆∞·ªùng g·∫∑p & c√°ch tr√°nh
- T·ªïng h·ª£p best practices
- Phi√™n H·ªèi & ƒê√°p
- Chu·∫©n b·ªã cho Tu·∫ßn 3

---

**üéä CH√öC M·ª™NG! B·∫°n ƒë√£ ho√†n th√†nh Project 2!**

H√¥m nay b·∫°n ƒë√£ build m·ªôt production-ready todo app s·ª≠ d·ª•ng:

1. ‚úÖ useState v·ªõi t·∫•t c·∫£ patterns
2. ‚úÖ State lifting v√† component architecture
3. ‚úÖ Forms v√† controlled components
4. ‚úÖ CRUD operations
5. ‚úÖ Filtering v√† derived state
6. ‚úÖ Edit mode v√† complex interactions

**This is a real app!** B·∫°n c√≥ th·ªÉ deploy n√≥, show portfolio, ho·∫∑c extend th√™m features!

üí™ Great job! Tomorrow: Review & consolidate!
