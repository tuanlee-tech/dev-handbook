# ğŸ“… NGÃ€Y 9: FORMS & INPUT HANDLING - Ná»n Táº£ng Controlled Components

## ğŸ¯ Má»¥c tiÃªu há»c táº­p (5 phÃºt)

Sau bÃ i há»c nÃ y, báº¡n sáº½:

- [ ] **Hiá»ƒu Ä‘Æ°á»£c** cÃ¡ch form elements hoáº¡t Ä‘á»™ng trong React khÃ¡c vá»›i HTML thuáº§n
- [ ] **Náº¯m vá»¯ng** khÃ¡i niá»‡m Controlled Components (lÃ½ thuyáº¿t) vÃ  táº¡i sao React khuyáº¿n nghá»‹ pattern nÃ y
- [ ] **Xá»­ lÃ½ Ä‘Æ°á»£c** form events vÃ  truy xuáº¥t giÃ¡ trá»‹ input thÃ´ng qua event.target
- [ ] **PhÃ¢n biá»‡t Ä‘Æ°á»£c** uncontrolled vs controlled inputs (chuáº©n bá»‹ cho useState á»Ÿ NgÃ y 11)
- [ ] **Implement Ä‘Æ°á»£c** form validation cÆ¡ báº£n vá»›i event handlers

---

## ğŸ¤” Kiá»ƒm tra Ä‘áº§u vÃ o (5 phÃºt)

Tráº£ lá»i 3 cÃ¢u há»i nÃ y Ä‘á»ƒ kÃ­ch hoáº¡t kiáº¿n thá»©c ná»n:

1. **Event Handling (NgÃ y 5)**: LÃ m tháº¿ nÃ o Ä‘á»ƒ láº¥y giÃ¡ trá»‹ tá»« `event.target.value`?
2. **Conditional Rendering (NgÃ y 5)**: LÃ m sao hiá»ƒn thá»‹ error message khi Ä‘iá»u kiá»‡n nÃ o Ä‘Ã³ xáº£y ra?
3. **Props (NgÃ y 4)**: Callback function Ä‘Æ°á»£c truyá»n qua props cÃ³ thá»ƒ nháº­n parameters khÃ´ng?

<details>
<summary>ğŸ’¡ Xem Ä‘Ã¡p Ã¡n</summary>

1. Trong event handler: `const value = event.target.value`
2. DÃ¹ng `&&` hoáº·c ternary: `{error && <span>{error}</span>}`
3. CÃ³! VÃ­ dá»¥: `onSubmit={(formData) => console.log(formData)}`

</details>

---

## ğŸ“– PHáº¦N 1: GIá»šI THIá»†U KHÃI NIá»†M (30 phÃºt)

### 1.1 Váº¥n Äá» Thá»±c Táº¿

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng form Ä‘Äƒng kÃ½ nhÆ° sau:

```jsx
// âŒ HTML thuáº§n - CÃ¡ch cÅ©
<form>
  <input
    type='text'
    name='email'
  />
  <input
    type='password'
    name='password'
  />
  <button type='submit'>ÄÄƒng kÃ½</button>
</form>
```

**Nhá»¯ng váº¥n Ä‘á» khi dÃ¹ng HTML form thuáº§n trong React:**

1. **KhÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c giÃ¡ trá»‹ realtime** â†’ KhÃ´ng validate khi user Ä‘ang gÃµ
2. **DOM quáº£n lÃ½ state** â†’ React khÃ´ng biáº¿t giÃ¡ trá»‹ hiá»‡n táº¡i
3. **KhÃ³ implement UX tá»‘t** â†’ KhÃ´ng disable button khi form invalid
4. **KhÃ´ng thá»ƒ transform input** â†’ VÃ­ dá»¥: format sá»‘ Ä‘iá»‡n thoáº¡i khi gÃµ

```jsx
// âš ï¸ Váº¥n Ä‘á» cá»¥ thá»ƒ
function SignupForm() {
  // LÃ m sao biáº¿t email cÃ³ há»£p lá»‡ TRÆ¯á»šC KHI user submit?
  // LÃ m sao disable button khi password < 8 kÃ½ tá»±?
  // LÃ m sao hiá»ƒn thá»‹ strength meter cho password?

  return (
    <form
      onSubmit={(e) => {
        e.preventDefault();
        // âŒ GiÃ¡ trá»‹ á»Ÿ Ä‘Ã¢u? Pháº£i query DOM!
        const formData = new FormData(e.target);
        console.log(formData.get('email')); // Cá»“ng ká»nh!
      }}
    >
      <input
        type='email'
        name='email'
      />
      <input
        type='password'
        name='password'
      />
      <button type='submit'>ÄÄƒng kÃ½</button>
    </form>
  );
}
```

### 1.2 Giáº£i PhÃ¡p - Controlled Components

React giáº£i quyáº¿t báº±ng **Controlled Components** - React quáº£n lÃ½ giÃ¡ trá»‹ form:

```jsx
// âœ… React Controlled Pattern (LÃ½ thuyáº¿t)
function SignupForm() {
  // âš ï¸ CHÃš Ã: ÄÃ¢y lÃ  GIáº¢I THÃCH PATTERN
  // useState sáº½ há»c á»Ÿ NgÃ y 11!

  // Concept: React lÆ°u giÃ¡ trá»‹ thay vÃ¬ DOM
  const [email, setEmail] = React.useState('');
  const [password, setPassword] = React.useState('');

  return (
    <form>
      {/* Value Ä‘Æ°á»£c React quáº£n lÃ½ */}
      <input
        type='email'
        value={email} // â† React controls this
        onChange={(e) => setEmail(e.target.value)}
      />

      {/* Giá» cÃ³ thá»ƒ validate realtime */}
      {password.length > 0 && password.length < 8 && (
        <p>Máº­t kháº©u pháº£i Ã­t nháº¥t 8 kÃ½ tá»±</p>
      )}

      <input
        type='password'
        value={password}
        onChange={(e) => setPassword(e.target.value)}
      />

      {/* Disable button khi invalid */}
      <button
        type='submit'
        disabled={!email || password.length < 8}
      >
        ÄÄƒng kÃ½
      </button>
    </form>
  );
}
```

**ğŸ”‘ Key Insight:** Trong Controlled Component:

- React lÃ  "single source of truth"
- Input value luÃ´n pháº£n Ã¡nh React's state
- Má»i thay Ä‘á»•i Ä‘á»u qua React (khÃ´ng cÃ³ DOM mutations)

---

### 1.3 Mental Model

```
HTML FORM (Uncontrolled)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DOM quáº£n lÃ½ value                 â”‚
â”‚                                     â”‚
â”‚   User types â†’ DOM updates          â”‚
â”‚                                     â”‚
â”‚   Submit â†’ Read from DOM            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      VS

REACT CONTROLLED FORM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React quáº£n lÃ½ value               â”‚
â”‚                                     â”‚
â”‚   User types â†’ Event                â”‚
â”‚        â†“                            â”‚
â”‚   Update React state                â”‚
â”‚        â†“                            â”‚
â”‚   Re-render vá»›i value má»›i           â”‚
â”‚        â†“                            â”‚
â”‚   DOM reflects React state          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ¯ Analogy:** Controlled component giá»‘ng nhÆ°:

- **Uncontrolled**: Báº¡n cho ngÆ°á»i láº¡ mÆ°á»£n xe â†’ KhÃ´ng biáº¿t há» Ä‘i Ä‘Ã¢u cho Ä‘áº¿n khi tráº£ xe
- **Controlled**: Báº¡n lÃ m tÃ i xáº¿ â†’ Biáº¿t chÃ­nh xÃ¡c Ä‘ang á»Ÿ Ä‘Ã¢u má»i lÃºc

---

### 1.4 Hiá»ƒu Láº§m Phá»• Biáº¿n

#### âŒ Hiá»ƒu láº§m 1: "TÃ´i cáº§n useState Ä‘á»ƒ handle forms"

```jsx
// âŒ SAI: NghÄ© pháº£i cÃ³ state má»›i handle Ä‘Æ°á»£c form
// Thá»±c táº¿: CÃ³ thá»ƒ handle events mÃ  KHÃ”NG cáº§n state!

function SearchBar() {
  // KHÃ”NG cáº§n state náº¿u chá»‰ cáº§n giÃ¡ trá»‹ khi submit

  return (
    <form
      onSubmit={(e) => {
        e.preventDefault();
        const query = e.target.elements.search.value;
        console.log('Search for:', query);
        // Gá»i API, navigate, etc.
      }}
    >
      <input
        type='text'
        name='search' // â† Truy cáº­p qua e.target.elements.search
        placeholder='TÃ¬m kiáº¿m...'
      />
      <button type='submit'>TÃ¬m</button>
    </form>
  );
}
```

**âœ… ÄÃšNG:** Forms cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng mÃ  khÃ´ng cáº§n state náº¿u:

- Chá»‰ cáº§n giÃ¡ trá»‹ khi submit (khÃ´ng cáº§n realtime validation)
- KhÃ´ng cáº§n disable/enable elements dá»±a trÃªn giÃ¡ trá»‹
- KhÃ´ng cáº§n derived UI (vÃ­ dá»¥: character counter)

---

#### âŒ Hiá»ƒu láº§m 2: "onChange lÃ  event giá»‘ng HTML"

```jsx
// âŒ SAI: NghÄ© onChange trong React = onchange trong HTML
// HTML onchange: Chá»‰ fire khi blur
// React onChange: Fire sau má»—i keystroke!

function Demo() {
  return (
    <>
      {/* HTML thuáº§n: onChange chá»‰ cháº¡y khi blur */}
      <input
        type='text'
        onchange="console.log('HTML change')" // Chá»‰ khi blur!
      />

      {/* React: onChange cháº¡y má»—i keystroke */}
      <input
        type='text'
        onChange={(e) => console.log('React change:', e.target.value)}
        // GÃµ "hello" â†’ 5 láº§n console.log!
      />
    </>
  );
}
```

**âœ… ÄÃšNG:** React's `onChange` thá»±c cháº¥t lÃ  `onInput` cá»§a HTML!

---

#### âŒ Hiá»ƒu láº§m 3: "Controlled = Pháº£i cÃ³ value prop"

```jsx
// âŒ SAI Láº¦M NGHIÃŠM TRá»ŒNG: Controlled mÃ  thiáº¿u onChange
function BrokenInput() {
  return (
    <input
      type='text'
      value='Fixed value' // â† Controlled nhÆ°ng khÃ´ng cÃ³ onChange
      // âŒ Input sáº½ bá»‹ read-only!
    />
  );
}

// âš ï¸ React warning:
// "You provided a `value` prop to a form field
//  without an `onChange` handler. This will render
//  a read-only field."
```

**âœ… ÄÃšNG:** Controlled component Cáº¦N Cáº¢ HAI:

- `value={something}` Ä‘á»ƒ React control
- `onChange={handler}` Ä‘á»ƒ update value

---

## ğŸ’» PHáº¦N 2: LIVE CODING (45 phÃºt)

### Demo 1: Uncontrolled Form - Submit Handler Pattern â­

**ğŸ¯ Use Case:** Form Ä‘Æ¡n giáº£n chá»‰ cáº§n giÃ¡ trá»‹ khi submit

```jsx
/**
 * âœ… PATTERN: Uncontrolled vá»›i name attribute
 *
 * Khi nÃ o dÃ¹ng:
 * - Form Ä‘Æ¡n giáº£n (1-3 fields)
 * - KhÃ´ng cáº§n validation realtime
 * - KhÃ´ng cáº§n disabled state dá»±a trÃªn input
 *
 * Æ¯u Ä‘iá»ƒm:
 * - Code Ã­t hÆ¡n (khÃ´ng cáº§n state)
 * - Performance tá»‘t (Ã­t re-renders)
 *
 * NhÆ°á»£c Ä‘iá»ƒm:
 * - KhÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c giÃ¡ trá»‹
 * - KhÃ³ implement UX nÃ¢ng cao
 */

function ContactForm() {
  // HÃ m xá»­ lÃ½ submit
  const handleSubmit = (event) => {
    event.preventDefault(); // âš ï¸ Báº®T BUá»˜C! NgÄƒn page reload

    // CÃ¡ch 1: DÃ¹ng FormData API (Modern)
    const formData = new FormData(event.target);
    const data = {
      name: formData.get('name'),
      email: formData.get('email'),
      message: formData.get('message'),
    };

    console.log('Form submitted:', data);

    // CÃ¡ch 2: DÃ¹ng event.target.elements
    const { name, email, message } = event.target.elements;
    console.log('Via elements:', {
      name: name.value,
      email: email.value,
      message: message.value,
    });

    // Reset form sau khi submit
    event.target.reset();
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor='name'>Há» tÃªn:</label>
        <input
          type='text'
          id='name'
          name='name' // â† KEY: name attribute Ä‘á»ƒ truy cáº­p
          required // HTML validation
          placeholder='Nguyá»…n VÄƒn A'
        />
      </div>

      <div>
        <label htmlFor='email'>Email:</label>
        <input
          type='email' // HTML tá»± validate email format
          id='email'
          name='email'
          required
          placeholder='example@email.com'
        />
      </div>

      <div>
        <label htmlFor='message'>Tin nháº¯n:</label>
        <textarea
          id='message'
          name='message'
          rows={4}
          required
          placeholder='Ná»™i dung tin nháº¯n...'
        />
      </div>

      <button type='submit'>Gá»­i</button>
    </form>
  );
}
```

**ğŸ” Key Learnings:**

1. **`event.preventDefault()`** - NgÄƒn form submit máº·c Ä‘á»‹nh
2. **`name` attribute** - CÃ¡ch truy cáº­p giÃ¡ trá»‹ form
3. **`FormData` API** - Modern way to read form values
4. **HTML validation** - `required`, `type="email"` tá»± Ä‘á»™ng validate

---

### Demo 2: Event Handling Patterns - Real-world Scenarios â­â­

**ğŸ¯ Use Case:** Xá»­ lÃ½ nhiá»u loáº¡i form elements vÃ  events

```jsx
/**
 * âœ… PATTERN: Comprehensive Event Handling
 *
 * Bao gá»“m:
 * - Text inputs, checkboxes, radio buttons
 * - Select dropdowns
 * - Event delegation
 * - Validation trÆ°á»›c khi submit
 */

function RegistrationForm() {
  // Xá»­ lÃ½ submit vá»›i validation
  const handleSubmit = (event) => {
    event.preventDefault();

    const formData = new FormData(event.target);

    // Extract data
    const data = {
      username: formData.get('username'),
      email: formData.get('email'),
      password: formData.get('password'),
      country: formData.get('country'),
      terms: formData.get('terms'), // checkbox: "on" hoáº·c null
      newsletter: formData.get('newsletter'), // "on" hoáº·c null
    };

    // Validation logic
    const errors = [];

    if (data.username.length < 3) {
      errors.push('Username pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    if (data.password.length < 8) {
      errors.push('Máº­t kháº©u pháº£i Ã­t nháº¥t 8 kÃ½ tá»±');
    }

    if (!data.terms) {
      errors.push('Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i Ä‘iá»u khoáº£n');
    }

    // Hiá»ƒn thá»‹ errors
    if (errors.length > 0) {
      alert('Lá»—i:\n' + errors.join('\n'));
      return;
    }

    // Submit success
    console.log('Registration data:', {
      ...data,
      terms: !!data.terms,
      newsletter: !!data.newsletter,
    });
  };

  // Xá»­ lÃ½ change event cho preview
  const handleUsernameChange = (event) => {
    const value = event.target.value;
    console.log('Username changed:', value);

    // âš ï¸ LÆ°u Ã½: ÄÃ¢y chá»‰ lÃ  log, khÃ´ng update UI
    // Äá»ƒ update UI cáº§n state (NgÃ y 11)
  };

  const handlePasswordChange = (event) => {
    const value = event.target.value;

    // Äáº¿m Ä‘á»™ máº¡nh password (chá»‰ log, chÆ°a hiá»ƒn thá»‹)
    let strength = 0;
    if (value.length >= 8) strength++;
    if (/[A-Z]/.test(value)) strength++;
    if (/[0-9]/.test(value)) strength++;
    if (/[^A-Za-z0-9]/.test(value)) strength++;

    console.log('Password strength:', strength + '/4');
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* Text Input */}
      <div>
        <label htmlFor='username'>Username:</label>
        <input
          type='text'
          id='username'
          name='username'
          onChange={handleUsernameChange}
          placeholder='username123'
          minLength={3} // HTML validation
          required
        />
      </div>

      {/* Email Input */}
      <div>
        <label htmlFor='email'>Email:</label>
        <input
          type='email'
          id='email'
          name='email'
          placeholder='user@example.com'
          required
        />
      </div>

      {/* Password Input */}
      <div>
        <label htmlFor='password'>Password:</label>
        <input
          type='password'
          id='password'
          name='password'
          onChange={handlePasswordChange}
          minLength={8}
          required
        />
      </div>

      {/* Select Dropdown */}
      <div>
        <label htmlFor='country'>Quá»‘c gia:</label>
        <select
          id='country'
          name='country'
          defaultValue='' // â† GiÃ¡ trá»‹ máº·c Ä‘á»‹nh
          required
        >
          <option
            value=''
            disabled
          >
            -- Chá»n quá»‘c gia --
          </option>
          <option value='vn'>Viá»‡t Nam</option>
          <option value='us'>United States</option>
          <option value='jp'>Japan</option>
          <option value='kr'>South Korea</option>
        </select>
      </div>

      {/* Checkbox */}
      <div>
        <label>
          <input
            type='checkbox'
            name='terms'
            required // HTML yÃªu cáº§u check
          />{' '}
          TÃ´i Ä‘á»“ng Ã½ vá»›i Ä‘iá»u khoáº£n sá»­ dá»¥ng
        </label>
      </div>

      {/* Checkbox (optional) */}
      <div>
        <label>
          <input
            type='checkbox'
            name='newsletter'
            defaultChecked // â† Checked máº·c Ä‘á»‹nh
          />{' '}
          Nháº­n báº£n tin qua email
        </label>
      </div>

      <button type='submit'>ÄÄƒng kÃ½</button>
    </form>
  );
}
```

**ğŸ”‘ Key Patterns:**

```jsx
// âœ… Checkbox value
const isChecked = formData.get('checkbox'); // "on" hoáº·c null
const boolValue = !!formData.get('checkbox'); // true hoáº·c false

// âœ… Select default value
<select defaultValue="vn">  // KhÃ´ng dÃ¹ng selected attribute

// âœ… Input events
onChange  // Má»—i keystroke (React khÃ¡c HTML!)
onBlur    // Khi rá»i khá»i input
onFocus   // Khi focus vÃ o input
onInput   // Giá»‘ng onChange trong React
```

---

### Demo 3: Edge Cases & Validation â­â­â­

**ğŸ¯ Use Case:** Handle cÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t vÃ  validate phá»©c táº¡p

```jsx
/**
 * âœ… ADVANCED: Edge Cases Handling
 *
 * Xá»­ lÃ½:
 * - Whitespace trimming
 * - Cross-field validation
 * - Custom validation rules
 * - Error display patterns
 */

function AdvancedForm() {
  const handleSubmit = (event) => {
    event.preventDefault();

    // Helper: Láº¥y giÃ¡ trá»‹ vÃ  trim whitespace
    const getValue = (name) => {
      const value = event.target.elements[name].value;
      return value.trim(); // â† XÃ³a khoáº£ng tráº¯ng Ä‘áº§u/cuá»‘i
    };

    // Extract vÃ  sanitize data
    const data = {
      fullName: getValue('fullName'),
      email: getValue('email'),
      phone: getValue('phone'),
      password: getValue('password'),
      confirmPassword: getValue('confirmPassword'),
      age: event.target.elements.age.value,
    };

    // Validation errors array
    const errors = [];

    // 1. Required fields
    if (!data.fullName) {
      errors.push('Há» tÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    }

    if (!data.email) {
      errors.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    }

    if (!data.password) {
      errors.push('Máº­t kháº©u khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    }

    // 2. Format validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (data.email && !emailRegex.test(data.email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    const phoneRegex = /^[0-9]{10,11}$/;
    if (data.phone && !phoneRegex.test(data.phone)) {
      errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i lÃ  10-11 chá»¯ sá»‘');
    }

    // 3. Length validation
    if (data.fullName && data.fullName.length < 3) {
      errors.push('Há» tÃªn pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    if (data.password && data.password.length < 8) {
      errors.push('Máº­t kháº©u pháº£i Ã­t nháº¥t 8 kÃ½ tá»±');
    }

    // 4. Cross-field validation
    if (data.password !== data.confirmPassword) {
      errors.push('Máº­t kháº©u xÃ¡c nháº­n khÃ´ng khá»›p');
    }

    // 5. Range validation
    const ageNum = parseInt(data.age, 10);
    if (isNaN(ageNum) || ageNum < 18 || ageNum > 100) {
      errors.push('Tuá»•i pháº£i tá»« 18 Ä‘áº¿n 100');
    }

    // 6. Password strength
    const hasUpperCase = /[A-Z]/.test(data.password);
    const hasLowerCase = /[a-z]/.test(data.password);
    const hasNumber = /[0-9]/.test(data.password);
    const hasSpecial = /[^A-Za-z0-9]/.test(data.password);

    if (data.password && !(hasUpperCase && hasLowerCase && hasNumber)) {
      errors.push('Máº­t kháº©u pháº£i cÃ³ chá»¯ hoa, chá»¯ thÆ°á»ng vÃ  sá»‘');
    }

    // Display errors
    if (errors.length > 0) {
      // âš ï¸ Production: NÃªn hiá»ƒn thá»‹ trÃªn UI, khÃ´ng dÃ¹ng alert
      console.error('Form validation errors:', errors);
      alert('Lá»—i:\n\n' + errors.join('\n'));

      // Focus vÃ o field Ä‘áº§u tiÃªn bá»‹ lá»—i (advanced)
      if (!data.fullName) {
        event.target.elements.fullName.focus();
      } else if (!emailRegex.test(data.email)) {
        event.target.elements.email.focus();
      }

      return;
    }

    // Success
    console.log('âœ… Form valid:', data);

    // XÃ³a sensitive data trÆ°á»›c khi log
    const safeData = { ...data };
    delete safeData.password;
    delete safeData.confirmPassword;
    console.log('Safe to send:', safeData);
  };

  // Prevent paste vÃ o confirm password (UX debatable)
  const handleConfirmPasswordPaste = (event) => {
    event.preventDefault();
    alert('Vui lÃ²ng nháº­p láº¡i máº­t kháº©u thay vÃ¬ copy/paste');
  };

  // Format phone number khi gÃµ
  const handlePhoneInput = (event) => {
    let value = event.target.value;

    // Chá»‰ giá»¯ láº¡i sá»‘
    value = value.replace(/[^0-9]/g, '');

    // Limit 11 sá»‘
    if (value.length > 11) {
      value = value.slice(0, 11);
    }

    // âš ï¸ KhÃ´ng thá»ƒ set value vÃ¬ khÃ´ng cÃ³ state
    // Chá»‰ log Ä‘á»ƒ demo
    console.log('Phone formatted:', value);

    // â„¹ï¸ Äá»ƒ format realtime cáº§n Controlled Component (NgÃ y 11)
  };

  return (
    <form
      onSubmit={handleSubmit}
      noValidate
    >
      {/* noValidate: Táº¯t HTML validation Ä‘á»ƒ dÃ¹ng custom */}

      <div>
        <label htmlFor='fullName'>
          Há» tÃªn: <span style={{ color: 'red' }}>*</span>
        </label>
        <input
          type='text'
          id='fullName'
          name='fullName'
          placeholder='Nguyá»…n VÄƒn A'
          autoComplete='name'
          // âŒ KHÃ”NG dÃ¹ng: defaultValue (Ä‘á»ƒ user tá»± nháº­p)
        />
      </div>

      <div>
        <label htmlFor='email'>
          Email: <span style={{ color: 'red' }}>*</span>
        </label>
        <input
          type='email'
          id='email'
          name='email'
          placeholder='example@email.com'
          autoComplete='email'
        />
      </div>

      <div>
        <label htmlFor='phone'>Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
        <input
          type='tel'
          id='phone'
          name='phone'
          placeholder='0901234567'
          onInput={handlePhoneInput}
          maxLength={11}
        />
      </div>

      <div>
        <label htmlFor='age'>
          Tuá»•i: <span style={{ color: 'red' }}>*</span>
        </label>
        <input
          type='number'
          id='age'
          name='age'
          min='18'
          max='100'
          defaultValue='25'
        />
      </div>

      <div>
        <label htmlFor='password'>
          Máº­t kháº©u: <span style={{ color: 'red' }}>*</span>
        </label>
        <input
          type='password'
          id='password'
          name='password'
          placeholder='Ãt nháº¥t 8 kÃ½ tá»±'
          autoComplete='new-password'
        />
        <small style={{ color: '#666', display: 'block' }}>
          Pháº£i cÃ³ chá»¯ hoa, chá»¯ thÆ°á»ng vÃ  sá»‘
        </small>
      </div>

      <div>
        <label htmlFor='confirmPassword'>
          XÃ¡c nháº­n máº­t kháº©u: <span style={{ color: 'red' }}>*</span>
        </label>
        <input
          type='password'
          id='confirmPassword'
          name='confirmPassword'
          placeholder='Nháº­p láº¡i máº­t kháº©u'
          autoComplete='new-password'
          onPaste={handleConfirmPasswordPaste}
        />
      </div>

      <button type='submit'>ÄÄƒng kÃ½</button>
      <button type='reset'>XÃ³a form</button>
    </form>
  );
}
```

**ğŸ¯ Advanced Techniques:**

```jsx
// âœ… Sanitize input
const value = input.value.trim(); // XÃ³a whitespace
const cleaned = value.replace(/[^a-zA-Z0-9]/g, ''); // Chá»‰ giá»¯ alphanumeric

// âœ… Cross-field validation
if (password !== confirmPassword) { /* error */ }

// âœ… Regex validation
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
const isValid = emailRegex.test(email);

// âœ… Focus management
if (hasError) {
  inputElement.focus(); // Focus vÃ o field lá»—i
}

// âœ… Prevent paste
<input onPaste={(e) => e.preventDefault()} />

// âœ… Format while typing (giá»›i háº¡n do khÃ´ng cÃ³ state)
<input onInput={handleFormat} />
```

---

## ğŸ”¨ PHáº¦N 3: BÃ€I Táº¬P THá»°C HÃ€NH (60 phÃºt)

### â­ Exercise 1: Login Form CÆ¡ Báº£n (15 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Táº¡o form Ä‘Äƒng nháº­p Ä‘Æ¡n giáº£n
 * â±ï¸ Thá»i gian: 15 phÃºt
 * ğŸš« KHÃ”NG dÃ¹ng: useState, useEffect, useReducer
 *
 * Requirements:
 * 1. Form cÃ³ 2 fields: email vÃ  password
 * 2. Validate khi submit:
 *    - Email khÃ´ng Ä‘Æ°á»£c rá»—ng vÃ  pháº£i há»£p lá»‡
 *    - Password pháº£i Ã­t nháº¥t 6 kÃ½ tá»±
 * 3. Hiá»ƒn thá»‹ console.log khi login thÃ nh cÃ´ng
 * 4. Reset form sau khi submit thÃ nh cÃ´ng
 *
 * ğŸ’¡ Gá»£i Ã½:
 * - DÃ¹ng event.preventDefault()
 * - DÃ¹ng FormData hoáº·c event.target.elements
 * - DÃ¹ng alert() hoáº·c console.error() cho errors
 */

// âŒ CÃ¡ch SAI: KhÃ´ng validate
function LoginFormWrong() {
  return (
    <form
      onSubmit={(e) => {
        e.preventDefault();
        // âŒ Submit trá»±c tiáº¿p mÃ  khÃ´ng kiá»ƒm tra!
        console.log('Logged in');
      }}
    >
      <input
        type='email'
        name='email'
      />
      <input
        type='password'
        name='password'
      />
      <button type='submit'>ÄÄƒng nháº­p</button>
    </form>
  );
}

// âœ… CÃ¡ch ÄÃšNG: CÃ³ validation
function LoginFormCorrect() {
  const handleSubmit = (event) => {
    event.preventDefault();

    const email = event.target.elements.email.value.trim();
    const password = event.target.elements.password.value;

    // Validation
    const errors = [];

    if (!email) {
      errors.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    if (password.length < 6) {
      errors.push('Máº­t kháº©u pháº£i Ã­t nháº¥t 6 kÃ½ tá»±');
    }

    if (errors.length > 0) {
      alert('Lá»—i:\n' + errors.join('\n'));
      return;
    }

    // Success
    console.log('âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng:', { email });
    event.target.reset();
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor='email'>Email:</label>
        <input
          type='email'
          id='email'
          name='email'
          placeholder='your@email.com'
          required
        />
      </div>

      <div>
        <label htmlFor='password'>Máº­t kháº©u:</label>
        <input
          type='password'
          id='password'
          name='password'
          placeholder='Ãt nháº¥t 6 kÃ½ tá»±'
          required
        />
      </div>

      <button type='submit'>ÄÄƒng nháº­p</button>
    </form>
  );
}

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
function LoginForm() {
  // TODO: Implement handleSubmit function

  // TODO: Validate email (khÃ´ng rá»—ng + format há»£p lá»‡)

  // TODO: Validate password (>= 6 chars)

  // TODO: Console.log khi success

  // TODO: Reset form sau khi submit

  return (
    <form /* TODO: onSubmit handler */>
      {/* TODO: Email input vá»›i label */}

      {/* TODO: Password input vá»›i label */}

      {/* TODO: Submit button */}
    </form>
  );
}
```

**âœ… Self-Check:**

- [ ] Form cÃ³ email vÃ  password inputs?
- [ ] Email Ä‘Æ°á»£c validate (empty + format)?
- [ ] Password Ä‘Æ°á»£c validate (min length)?
- [ ] Console.log hiá»ƒn thá»‹ data khi success?
- [ ] Form reset sau submit?

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Login Form CÆ¡ Báº£n - Uncontrolled pattern
 * Validate email vÃ  password khi submit
 * KhÃ´ng sá»­ dá»¥ng state (useState)
 */
function LoginForm() {
  const handleSubmit = (event) => {
    event.preventDefault();

    // Láº¥y giÃ¡ trá»‹ tá»« form
    const email = event.target.elements.email.value.trim();
    const password = event.target.elements.password.value;

    // Validation
    const errors = [];

    // Kiá»ƒm tra email
    if (!email) {
      errors.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    // Kiá»ƒm tra password
    if (password.length < 6) {
      errors.push('Máº­t kháº©u pháº£i Ã­t nháº¥t 6 kÃ½ tá»±');
    }

    // CÃ³ lá»—i â†’ hiá»ƒn thá»‹ vÃ  dá»«ng
    if (errors.length > 0) {
      alert('Lá»—i:\n' + errors.join('\n'));
      return;
    }

    // ThÃ nh cÃ´ng
    console.log('âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng:', { email });

    // Reset form
    event.target.reset();
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor='email'>Email:</label>
        <input
          type='email'
          id='email'
          name='email'
          placeholder='your@email.com'
          required
        />
      </div>

      <div>
        <label htmlFor='password'>Máº­t kháº©u:</label>
        <input
          type='password'
          id='password'
          name='password'
          placeholder='Ãt nháº¥t 6 kÃ½ tá»±'
          required
        />
      </div>

      <button type='submit'>ÄÄƒng nháº­p</button>
    </form>
  );
}

/* VÃ­ dá»¥ káº¿t quáº£ console khi submit thÃ nh cÃ´ng:
âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng: { email: "test@example.com" }
*/
```

</details>

---

### â­â­ Exercise 2: Survey Form vá»›i Multiple Input Types (25 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Xá»­ lÃ½ nhiá»u loáº¡i input khÃ¡c nhau
 * â±ï¸ Thá»i gian: 25 phÃºt
 *
 * Scenario: Táº¡o form kháº£o sÃ¡t sáº£n pháº©m
 *
 * Requirements:
 * 1. Text input: TÃªn ngÆ°á»i dÃ¹ng (required, min 3 chars)
 * 2. Email input: Email (required, valid format)
 * 3. Radio buttons: Äá»™ tuá»•i (18-25, 26-35, 36-50, 50+)
 * 4. Checkboxes: Sáº£n pháº©m quan tÃ¢m (Ã­t nháº¥t 1)
 *    - Laptop
 *    - Smartphone
 *    - Tablet
 *    - Accessories
 * 5. Select: Táº§n suáº¥t mua hÃ ng
 *    - HÃ ng tuáº§n
 *    - HÃ ng thÃ¡ng
 *    - HÃ ng quÃ½
 *    - HÃ ng nÄƒm
 * 6. Textarea: GÃ³p Ã½ (optional, max 500 chars)
 *
 * ğŸ¤” PHÃ‚N TÃCH:
 * Approach A: Validate táº¥t cáº£ cÃ¹ng lÃºc khi submit
 * Pros: Code Ä‘Æ¡n giáº£n, Ã­t event handlers
 * Cons: User chá»‰ biáº¿t lá»—i sau khi click submit
 *
 * Approach B: Validate tá»«ng field khi blur
 * Pros: UX tá»‘t hÆ¡n, realtime feedback
 * Cons: âš ï¸ Cáº§n state Ä‘á»ƒ lÆ°u errors (chÆ°a há»c!)
 *
 * ğŸ’­ Báº N CHá»ŒN GÃŒ VÃ€ Táº I SAO?
 * - Vá»›i kiáº¿n thá»©c hiá»‡n táº¡i (khÃ´ng cÃ³ state), chá»n Approach A
 * - Document: "Approach A Ä‘Æ°á»£c chá»n vÃ¬ chÆ°a há»c state management"
 */

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
// Implement form theo requirements á»Ÿ trÃªn
```

**âœ… Self-Check:**

- [ ] CÃ³ Ä‘á»§ cÃ¡c loáº¡i input (text, email, radio, checkbox, select, textarea)?
- [ ] Radio buttons dÃ¹ng cÃ¹ng `name` Ä‘á»ƒ chá»‰ chá»n 1?
- [ ] Checkboxes dÃ¹ng `getAll()` Ä‘á»ƒ láº¥y nhiá»u giÃ¡ trá»‹?
- [ ] Select cÃ³ default value rá»—ng + disabled?
- [ ] Validation kiá»ƒm tra Ã­t nháº¥t 1 checkbox Ä‘Æ°á»£c chá»n?
- [ ] Textarea cÃ³ maxLength?

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Survey Form vá»›i Multiple Input Types - Uncontrolled pattern
 * Xá»­ lÃ½ nhiá»u loáº¡i input khÃ¡c nhau vÃ  validate khi submit
 * Approach A Ä‘Æ°á»£c chá»n vÃ¬ chÆ°a há»c state management
 */
function SurveyForm() {
  const handleSubmit = (event) => {
    event.preventDefault();

    const formData = new FormData(event.target);

    // Extract data
    const data = {
      name: formData.get('name')?.trim() || '',
      email: formData.get('email')?.trim() || '',
      ageGroup: formData.get('ageGroup'),
      interests: formData.getAll('interests'),
      frequency: formData.get('frequency'),
      feedback: formData.get('feedback')?.trim() || '',
    };

    // Validation
    const errors = [];

    // 1. TÃªn ngÆ°á»i dÃ¹ng
    if (!data.name || data.name.length < 3) {
      errors.push('TÃªn pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    // 2. Email
    if (!data.email) {
      errors.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(data.email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    // 3. Äá»™ tuá»•i
    if (!data.ageGroup) {
      errors.push('Vui lÃ²ng chá»n Ä‘á»™ tuá»•i');
    }

    // 4. Sáº£n pháº©m quan tÃ¢m (Ã­t nháº¥t 1)
    if (data.interests.length === 0) {
      errors.push('Vui lÃ²ng chá»n Ã­t nháº¥t 1 sáº£n pháº©m quan tÃ¢m');
    }

    // 5. Táº§n suáº¥t mua hÃ ng
    if (!data.frequency) {
      errors.push('Vui lÃ²ng chá»n táº§n suáº¥t mua hÃ ng');
    }

    // 6. GÃ³p Ã½ (optional, max 500 kÃ½ tá»±)
    if (data.feedback && data.feedback.length > 500) {
      errors.push('GÃ³p Ã½ khÃ´ng Ä‘Æ°á»£c quÃ¡ 500 kÃ½ tá»±');
    }

    // Hiá»ƒn thá»‹ lá»—i náº¿u cÃ³
    if (errors.length > 0) {
      alert('Lá»—i:\n\n' + errors.join('\n'));
      return;
    }

    // ThÃ nh cÃ´ng
    console.log('âœ… Survey submitted:', data);

    // Reset form
    event.target.reset();
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* 1. TÃªn ngÆ°á»i dÃ¹ng */}
      <div>
        <label htmlFor='name'>TÃªn cá»§a báº¡n: *</label>
        <input
          type='text'
          id='name'
          name='name'
          placeholder='Nguyá»…n VÄƒn A'
          required
        />
      </div>

      {/* 2. Email */}
      <div>
        <label htmlFor='email'>Email: *</label>
        <input
          type='email'
          id='email'
          name='email'
          placeholder='email@example.com'
          required
        />
      </div>

      {/* 3. Radio buttons - Äá»™ tuá»•i */}
      <fieldset>
        <legend>Äá»™ tuá»•i: *</legend>
        <label>
          <input
            type='radio'
            name='ageGroup'
            value='18-25'
            required
          />{' '}
          18-25
        </label>
        <label>
          <input
            type='radio'
            name='ageGroup'
            value='26-35'
          />{' '}
          26-35
        </label>
        <label>
          <input
            type='radio'
            name='ageGroup'
            value='36-50'
          />{' '}
          36-50
        </label>
        <label>
          <input
            type='radio'
            name='ageGroup'
            value='50+'
          />{' '}
          50+
        </label>
      </fieldset>

      {/* 4. Checkboxes - Sáº£n pháº©m quan tÃ¢m */}
      <fieldset>
        <legend>Sáº£n pháº©m quan tÃ¢m: * (chá»n Ã­t nháº¥t 1)</legend>
        <label>
          <input
            type='checkbox'
            name='interests'
            value='laptop'
          />{' '}
          Laptop
        </label>
        <label>
          <input
            type='checkbox'
            name='interests'
            value='smartphone'
          />{' '}
          Smartphone
        </label>
        <label>
          <input
            type='checkbox'
            name='interests'
            value='tablet'
          />{' '}
          Tablet
        </label>
        <label>
          <input
            type='checkbox'
            name='interests'
            value='accessories'
          />{' '}
          Accessories
        </label>
      </fieldset>

      {/* 5. Select - Táº§n suáº¥t mua hÃ ng */}
      <div>
        <label htmlFor='frequency'>Táº§n suáº¥t mua hÃ ng: *</label>
        <select
          id='frequency'
          name='frequency'
          defaultValue=''
          required
        >
          <option
            value=''
            disabled
          >
            -- Chá»n táº§n suáº¥t --
          </option>
          <option value='weekly'>HÃ ng tuáº§n</option>
          <option value='monthly'>HÃ ng thÃ¡ng</option>
          <option value='quarterly'>HÃ ng quÃ½</option>
          <option value='yearly'>HÃ ng nÄƒm</option>
        </select>
      </div>

      {/* 6. Textarea - GÃ³p Ã½ */}
      <div>
        <label htmlFor='feedback'>GÃ³p Ã½ thÃªm:</label>
        <textarea
          id='feedback'
          name='feedback'
          rows={4}
          maxLength={500}
          placeholder='Chia sáº» Ã½ kiáº¿n cá»§a báº¡n... (tá»‘i Ä‘a 500 kÃ½ tá»±)'
        />
      </div>

      <button type='submit'>Gá»­i kháº£o sÃ¡t</button>
    </form>
  );
}

/* VÃ­ dá»¥ káº¿t quáº£ console khi submit thÃ nh cÃ´ng:
âœ… Survey submitted: {
  name: "Nguyá»…n VÄƒn A",
  email: "vana@example.com",
  ageGroup: "26-35",
  interests: ["laptop", "smartphone"],
  frequency: "monthly",
  feedback: "Sáº£n pháº©m ráº¥t tá»‘t, giao hÃ ng nhanh"
}
*/
```

</details>

---

### â­â­â­ Exercise 3: Dynamic Shipping Form (40 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Form vá»›i conditional fields
 * â±ï¸ Thá»i gian: 40 phÃºt
 *
 * ğŸ“‹ Product Requirements:
 * User Story: "LÃ  khÃ¡ch hÃ ng, tÃ´i muá»‘n nháº­p Ä‘á»‹a chá»‰ giao hÃ ng,
 *              vá»›i option Ä‘á»‹a chá»‰ thanh toÃ¡n khÃ¡c Ä‘á»‹a chá»‰ giao hÃ ng"
 *
 * âœ… Acceptance Criteria:
 * - [ ] Form cÃ³ shipping address (há» tÃªn, Ä‘á»‹a chá»‰, thÃ nh phá»‘, zip)
 * - [ ] Checkbox "Äá»‹a chá»‰ thanh toÃ¡n khÃ¡c Ä‘á»‹a chá»‰ giao hÃ ng"
 * - [ ] Khi check: Hiá»ƒn thá»‹ billing address form
 * - [ ] Khi uncheck: áº¨n billing form, dÃ¹ng shipping address
 * - [ ] Validate táº¥t cáº£ required fields
 * - [ ] Console.log káº¿t quáº£ khi submit
 *
 * ğŸ¨ Technical Constraints:
 * - KHÃ”NG dÃ¹ng state (chÆ°a há»c)
 * - DÃ¹ng CSS Ä‘á»ƒ show/hide billing form
 * - Validate cáº£ shipping vÃ  billing addresses
 *
 * ğŸš¨ Edge Cases cáº§n handle:
 * - User check/uncheck checkbox nhiá»u láº§n
 * - Submit khi billing form Ä‘ang áº©n
 * - Validate fields trong form Ä‘ang áº©n
 *
 * ğŸ“ Implementation Checklist:
 * - [ ] Shipping address form (4 fields)
 * - [ ] Billing checkbox vá»›i onChange handler
 * - [ ] Billing address form (initially hidden)
 * - [ ] CSS class Ä‘á»ƒ show/hide
 * - [ ] Validation logic
 * - [ ] Submit handler tá»•ng há»£p data
 */

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
// Implement theo requirements
```

**ğŸ¯ Challenges:**

1. Show/hide billing section WITHOUT state
2. Clear billing fields khi áº©n
3. Validate conditional fields
4. Handle edge cases (check/uncheck nhiá»u láº§n)

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Dynamic Shipping Form - Uncontrolled + DOM manipulation
 * Hiá»ƒn thá»‹/áº©n billing address dá»±a trÃªn checkbox
 * Validate conditional fields mÃ  khÃ´ng dÃ¹ng state
 */
function ShippingForm() {
  const handleBillingToggle = (event) => {
    const billingSection = document.getElementById('billing-section');
    if (!billingSection) return;

    if (event.target.checked) {
      billingSection.style.display = 'block';
    } else {
      billingSection.style.display = 'none';
      // XÃ³a dá»¯ liá»‡u billing khi áº©n Ä‘á»ƒ trÃ¡nh gá»­i nháº§m dá»¯ liá»‡u cÅ©
      const inputs = billingSection.querySelectorAll('input');
      inputs.forEach((input) => {
        input.value = '';
      });
    }
  };

  const handleSubmit = (event) => {
    event.preventDefault();

    const formData = new FormData(event.target);

    // Láº¥y dá»¯ liá»‡u shipping
    const shipping = {
      name: (formData.get('shipping_name') || '').trim(),
      address: (formData.get('shipping_address') || '').trim(),
      city: (formData.get('shipping_city') || '').trim(),
      zip: (formData.get('shipping_zip') || '').trim(),
    };

    // Kiá»ƒm tra xem cÃ³ dÃ¹ng billing riÃªng khÃ´ng
    const useSeparateBilling = !!formData.get('separate_billing');

    // Láº¥y dá»¯ liá»‡u billing (náº¿u cÃ³)
    let billing = shipping; // máº·c Ä‘á»‹nh dÃ¹ng shipping

    if (useSeparateBilling) {
      billing = {
        name: (formData.get('billing_name') || '').trim(),
        address: (formData.get('billing_address') || '').trim(),
        city: (formData.get('billing_city') || '').trim(),
        zip: (formData.get('billing_zip') || '').trim(),
      };
    }

    // Validation
    const errors = [];

    // Shipping luÃ´n báº¯t buá»™c
    if (!shipping.name) errors.push('Shipping: Há» tÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    if (!shipping.address) errors.push('Shipping: Äá»‹a chá»‰ khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    if (!shipping.city) errors.push('Shipping: ThÃ nh phá»‘ khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    if (!shipping.zip) errors.push('Shipping: MÃ£ ZIP khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');

    // Billing chá»‰ validate khi Ä‘Æ°á»£c chá»n (vÃ  hiá»ƒn thá»‹)
    if (useSeparateBilling) {
      if (!billing.name) errors.push('Billing: Há» tÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
      if (!billing.address) errors.push('Billing: Äá»‹a chá»‰ khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
      if (!billing.city) errors.push('Billing: ThÃ nh phá»‘ khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
      if (!billing.zip) errors.push('Billing: MÃ£ ZIP khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    }

    if (errors.length > 0) {
      alert('Lá»—i:\n\n' + errors.join('\n'));
      return;
    }

    // ThÃ nh cÃ´ng
    console.log('âœ… Order submitted:', {
      shipping,
      billing,
      useSeparateBilling,
    });

    // Reset form (tÃ¹y chá»n)
    event.target.reset();

    // Äáº£m báº£o billing section áº©n láº¡i sau reset
    const billingSection = document.getElementById('billing-section');
    if (billingSection) {
      billingSection.style.display = 'none';
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <h3>Äá»‹a chá»‰ giao hÃ ng</h3>

      <div>
        <label htmlFor='shipping_name'>Há» tÃªn: *</label>
        <input
          type='text'
          id='shipping_name'
          name='shipping_name'
          required
        />
      </div>

      <div>
        <label htmlFor='shipping_address'>Äá»‹a chá»‰: *</label>
        <input
          type='text'
          id='shipping_address'
          name='shipping_address'
          required
        />
      </div>

      <div>
        <label htmlFor='shipping_city'>ThÃ nh phá»‘: *</label>
        <input
          type='text'
          id='shipping_city'
          name='shipping_city'
          required
        />
      </div>

      <div>
        <label htmlFor='shipping_zip'>MÃ£ ZIP: *</label>
        <input
          type='text'
          id='shipping_zip'
          name='shipping_zip'
          pattern='[0-9]{5}'
          placeholder='VÃ­ dá»¥: 700000'
          title='MÃ£ ZIP gá»“m 5 chá»¯ sá»‘'
          required
        />
      </div>

      <hr />

      <div>
        <label>
          <input
            type='checkbox'
            name='separate_billing'
            onChange={handleBillingToggle}
          />{' '}
          Äá»‹a chá»‰ thanh toÃ¡n khÃ¡c Ä‘á»‹a chá»‰ giao hÃ ng
        </label>
      </div>

      {/* Billing section - ban Ä‘áº§u áº©n */}
      <div
        id='billing-section'
        style={{ display: 'none' }}
      >
        <h3>Äá»‹a chá»‰ thanh toÃ¡n</h3>

        <div>
          <label htmlFor='billing_name'>Há» tÃªn: *</label>
          <input
            type='text'
            id='billing_name'
            name='billing_name'
          />
        </div>

        <div>
          <label htmlFor='billing_address'>Äá»‹a chá»‰: *</label>
          <input
            type='text'
            id='billing_address'
            name='billing_address'
          />
        </div>

        <div>
          <label htmlFor='billing_city'>ThÃ nh phá»‘: *</label>
          <input
            type='text'
            id='billing_city'
            name='billing_city'
          />
        </div>

        <div>
          <label htmlFor='billing_zip'>MÃ£ ZIP: *</label>
          <input
            type='text'
            id='billing_zip'
            name='billing_zip'
            pattern='[0-9]{5}'
            placeholder='VÃ­ dá»¥: 700000'
            title='MÃ£ ZIP gá»“m 5 chá»¯ sá»‘'
          />
        </div>
      </div>

      <button type='submit'>Äáº·t hÃ ng</button>
    </form>
  );
}

/* VÃ­ dá»¥ káº¿t quáº£ console khi submit thÃ nh cÃ´ng (billing khÃ¡c shipping):

âœ… Order submitted: {
  shipping: {
    name: "Nguyá»…n VÄƒn A",
    address: "123 ÄÆ°á»ng LÃ¡ng",
    city: "HÃ  Ná»™i",
    zip: "100000"
  },
  billing: {
    name: "CÃ´ng ty XYZ",
    address: "456 Nguyá»…n Huá»‡",
    city: "TP.HCM",
    zip: "700000"
  },
  useSeparateBilling: true
}

VÃ­ dá»¥ khi khÃ´ng check checkbox (dÃ¹ng chung Ä‘á»‹a chá»‰):

âœ… Order submitted: {
  shipping: { ... },
  billing: { ...same as shipping... },
  useSeparateBilling: false
}
*/
```

</details>

---

### â­â­â­â­ Exercise 4: Multi-Step Form Architecture (60 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Thiáº¿t káº¿ form nhiá»u bÆ°á»›c mÃ  khÃ´ng dÃ¹ng state
 * â±ï¸ Thá»i gian: 60 phÃºt
 *
 * ğŸ—ï¸ PHASE 1: Research & Design (20 phÃºt)
 *
 * Nhiá»‡m vá»¥:
 * 1. So sÃ¡nh Ã­t nháº¥t 3 approaches Ä‘á»ƒ lÃ m multi-step form
 * 2. Document pros/cons má»—i approach
 * 3. Chá»n approach phÃ¹ há»£p nháº¥t (khÃ´ng cáº§n state)
 * 4. Viáº¿t ADR (Architecture Decision Record)
 *
 * Approach Options:
 * A. Hidden sections vá»›i CSS (show/hide)
 * B. Multiple <form> elements
 * C. Single form vá»›i navigation buttons
 * D. URL-based steps (query params) - Advanced!
 *
 * ADR Template:
 * - Context: Multi-step registration form (3 steps)
 * - Decision: Approach Ä‘Ã£ chá»n
 * - Rationale: Táº¡i sao chá»n approach nÃ y
 * - Consequences: Trade-offs accepted
 * - Alternatives Considered: CÃ¡c options khÃ¡c
 */

/**
 * ğŸ’» PHASE 2: Implementation (30 phÃºt)
 *
 * Requirements:
 * Step 1: Account Info
 * - Username (min 3 chars)
 * - Email (valid format)
 * - Password (min 8 chars)
 *
 * Step 2: Personal Info
 * - Full Name (min 3 chars)
 * - Date of Birth (18+ years old)
 * - Phone Number (10 digits)
 *
 * Step 3: Preferences
 * - Newsletter (checkbox)
 * - Interests (checkboxes - min 1)
 * - Bio (textarea, max 200 chars)
 *
 * Features:
 * - Validate each step before proceeding
 * - Show current step indicator (1/3, 2/3, 3/3)
 * - Back button (except Step 1)
 * - Next button (Steps 1-2)
 * - Submit button (Step 3)
 * - Preserve data khi navigate steps
 */

// Example Solution using Hidden Sections
function MultiStepForm() {
  // Step data stored in form fields (no state needed!)

  const showStep = (stepNumber) => {
    // Hide all steps
    document.querySelectorAll('.form-step').forEach((step) => {
      step.style.display = 'none';
    });

    // Show target step
    document.getElementById(`step-${stepNumber}`).style.display = 'block';

    // Update indicator
    document.getElementById('step-indicator').textContent =
      `BÆ°á»›c ${stepNumber}/3`;
  };

  const validateStep1 = () => {
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;

    const errors = [];

    if (username.length < 3) {
      errors.push('Username pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    if (password.length < 8) {
      errors.push('Máº­t kháº©u pháº£i Ã­t nháº¥t 8 kÃ½ tá»±');
    }

    return errors;
  };

  const validateStep2 = () => {
    const fullName = document.getElementById('fullName').value.trim();
    const dob = document.getElementById('dob').value;
    const phone = document.getElementById('phone').value;

    const errors = [];

    if (fullName.length < 3) {
      errors.push('Há» tÃªn pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    // Check age >= 18
    const birthDate = new Date(dob);
    const today = new Date();
    const age = today.getFullYear() - birthDate.getFullYear();
    if (age < 18) {
      errors.push('Báº¡n pháº£i tá»« 18 tuá»•i trá»Ÿ lÃªn');
    }

    if (!/^[0-9]{10}$/.test(phone)) {
      errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i lÃ  10 chá»¯ sá»‘');
    }

    return errors;
  };

  const handleNext1 = () => {
    const errors = validateStep1();

    if (errors.length > 0) {
      alert('Lá»—i:\n' + errors.join('\n'));
      return;
    }

    showStep(2);
  };

  const handleNext2 = () => {
    const errors = validateStep2();

    if (errors.length > 0) {
      alert('Lá»—i:\n' + errors.join('\n'));
      return;
    }

    showStep(3);
  };

  const handleBack2 = () => showStep(1);
  const handleBack3 = () => showStep(2);

  const handleSubmit = (event) => {
    event.preventDefault();

    const formData = new FormData(event.target);

    // Validate Step 3
    const interests = formData.getAll('interests');
    if (interests.length === 0) {
      alert('Vui lÃ²ng chá»n Ã­t nháº¥t 1 sá»Ÿ thÃ­ch');
      return;
    }

    // Collect all data
    const data = {
      username: formData.get('username'),
      email: formData.get('email'),
      password: formData.get('password'),
      fullName: formData.get('fullName'),
      dob: formData.get('dob'),
      phone: formData.get('phone'),
      newsletter: !!formData.get('newsletter'),
      interests: interests,
      bio: formData.get('bio'),
    };

    console.log('âœ… Registration complete:', data);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div
        id='step-indicator'
        style={{ fontWeight: 'bold', marginBottom: '20px' }}
      >
        BÆ°á»›c 1/3
      </div>

      {/* Step 1: Account Info */}
      <div
        id='step-1'
        className='form-step'
      >
        <h3>ThÃ´ng tin tÃ i khoáº£n</h3>

        <div>
          <label htmlFor='username'>Username:</label>
          <input
            type='text'
            id='username'
            name='username'
            required
          />
        </div>

        <div>
          <label htmlFor='email'>Email:</label>
          <input
            type='email'
            id='email'
            name='email'
            required
          />
        </div>

        <div>
          <label htmlFor='password'>Máº­t kháº©u:</label>
          <input
            type='password'
            id='password'
            name='password'
            required
          />
        </div>

        <button
          type='button'
          onClick={handleNext1}
        >
          Tiáº¿p theo â†’
        </button>
      </div>

      {/* Step 2: Personal Info */}
      <div
        id='step-2'
        className='form-step'
        style={{ display: 'none' }}
      >
        <h3>ThÃ´ng tin cÃ¡ nhÃ¢n</h3>

        <div>
          <label htmlFor='fullName'>Há» tÃªn:</label>
          <input
            type='text'
            id='fullName'
            name='fullName'
            required
          />
        </div>

        <div>
          <label htmlFor='dob'>NgÃ y sinh:</label>
          <input
            type='date'
            id='dob'
            name='dob'
            required
          />
        </div>

        <div>
          <label htmlFor='phone'>Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
          <input
            type='tel'
            id='phone'
            name='phone'
            pattern='[0-9]{10}'
            required
          />
        </div>

        <button
          type='button'
          onClick={handleBack2}
        >
          â† Quay láº¡i
        </button>
        <button
          type='button'
          onClick={handleNext2}
        >
          Tiáº¿p theo â†’
        </button>
      </div>

      {/* Step 3: Preferences */}
      <div
        id='step-3'
        className='form-step'
        style={{ display: 'none' }}
      >
        <h3>Sá»Ÿ thÃ­ch</h3>

        <div>
          <label>
            <input
              type='checkbox'
              name='newsletter'
            />{' '}
            Nháº­n báº£n tin
          </label>
        </div>

        <fieldset>
          <legend>Sá»Ÿ thÃ­ch: *</legend>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='tech'
            />{' '}
            CÃ´ng nghá»‡
          </label>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='sports'
            />{' '}
            Thá»ƒ thao
          </label>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='music'
            />{' '}
            Ã‚m nháº¡c
          </label>
        </fieldset>

        <div>
          <label htmlFor='bio'>Giá»›i thiá»‡u báº£n thÃ¢n:</label>
          <textarea
            id='bio'
            name='bio'
            rows={4}
            maxLength={200}
          />
        </div>

        <button
          type='button'
          onClick={handleBack3}
        >
          â† Quay láº¡i
        </button>
        <button type='submit'>HoÃ n táº¥t Ä‘Äƒng kÃ½</button>
      </div>
    </form>
  );
}

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
/**
 * 1. Viáº¿t ADR document (20 phÃºt)
 * 2. Implement solution (30 phÃºt)
 * 3. Test all flows (10 phÃºt):
 *    - Next/Back navigation
 *    - Validation má»—i step
 *    - Data preservation
 *    - Final submit
 */
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Multi-Step Registration Form - Uncontrolled + DOM manipulation
 * Sá»­ dá»¥ng approach Hidden sections vá»›i CSS show/hide
 * KhÃ´ng dÃ¹ng state, dá»¯ liá»‡u Ä‘Æ°á»£c báº£o toÃ n trong cÃ¡c input fields
 */

/*
 * ADR (Architecture Decision Record)
 *
 * Context:
 *   XÃ¢y dá»±ng multi-step registration form vá»›i 3 bÆ°á»›c:
 *   - Step 1: Account Info
 *   - Step 2: Personal Info
 *   - Step 3: Preferences
 *   YÃªu cáº§u: KhÃ´ng Ä‘Æ°á»£c dÃ¹ng state (useState/useReducer), cáº§n validate tá»«ng bÆ°á»›c,
 *   giá»¯ dá»¯ liá»‡u khi chuyá»ƒn bÆ°á»›c, cÃ³ nÃºt Back/Next/Submit vÃ  indicator.
 *
 * Decision:
 *   Sá»­ dá»¥ng Approach A - Hidden sections vá»›i CSS (show/hide)
 *
 * Rationale:
 *   - ÄÆ¡n giáº£n nháº¥t trong cÃ¡c lá»±a chá»n khi khÃ´ng dÃ¹ng state
 *   - Dá»¯ liá»‡u tá»± Ä‘á»™ng Ä‘Æ°á»£c báº£o toÃ n trong DOM (input values)
 *   - Dá»… validate tá»«ng bÆ°á»›c báº±ng cÃ¡ch query DOM elements
 *   - KhÃ´ng cáº§n quáº£n lÃ½ routing hay nhiá»u form
 *   - CÃ³ thá»ƒ Ä‘iá»u khiá»ƒn hiá»ƒn thá»‹ hoÃ n toÃ n báº±ng JavaScript + CSS
 *
 * Consequences / Trade-offs accepted:
 *   - Pháº£i dÃ¹ng document.getElementById / querySelector â†’ khÃ´ng "React way"
 *   - Code validation hÆ¡i dÃ i dÃ²ng vÃ¬ pháº£i query tá»«ng field
 *   - KhÃ´ng táº­n dá»¥ng Ä‘Æ°á»£c React re-rendering cho UI updates
 *   - KhÃ³ scale náº¿u cÃ³ nhiá»u bÆ°á»›c hoáº·c logic phá»©c táº¡p hÆ¡n
 *
 * Alternatives Considered:
 *   B. Multiple <form> elements
 *      â†’ KhÃ´ng kháº£ thi vÃ¬ khÃ³ giá»¯ dá»¯ liá»‡u giá»¯a cÃ¡c form riÃªng biá»‡t
 *   C. Single form vá»›i navigation buttons (Ä‘Ã£ chá»n)
 *      â†’ ÄÃ¢y chÃ­nh lÃ  biáº¿n thá»ƒ cá»§a A, Ä‘Æ°á»£c triá»ƒn khai
 *   D. URL-based steps (query params)
 *      â†’ QuÃ¡ phá»©c táº¡p, cáº§n xá»­ lÃ½ history, khÃ´ng cáº§n thiáº¿t cho bÃ i táº­p
 */

function MultiStepForm() {
  // Hiá»ƒn thá»‹ bÆ°á»›c cá»¥ thá»ƒ vÃ  cáº­p nháº­t indicator
  const showStep = (stepNumber) => {
    document.querySelectorAll('.form-step').forEach((step) => {
      step.style.display = 'none';
    });

    const targetStep = document.getElementById(`step-${stepNumber}`);
    if (targetStep) {
      targetStep.style.display = 'block';
    }

    const indicator = document.getElementById('step-indicator');
    if (indicator) {
      indicator.textContent = `BÆ°á»›c ${stepNumber}/3`;
    }
  };

  // Validate Step 1: Account Info
  const validateStep1 = () => {
    const username = document.getElementById('username')?.value.trim() || '';
    const email = document.getElementById('email')?.value.trim() || '';
    const password = document.getElementById('password')?.value || '';

    const errors = [];

    if (username.length < 3) {
      errors.push('Username pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    if (!email) {
      errors.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    if (password.length < 8) {
      errors.push('Máº­t kháº©u pháº£i Ã­t nháº¥t 8 kÃ½ tá»±');
    }

    return errors;
  };

  // Validate Step 2: Personal Info
  const validateStep2 = () => {
    const fullName = document.getElementById('fullName')?.value.trim() || '';
    const dob = document.getElementById('dob')?.value || '';
    const phone = document.getElementById('phone')?.value || '';

    const errors = [];

    if (fullName.length < 3) {
      errors.push('Há» tÃªn pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    if (dob) {
      const birthDate = new Date(dob);
      const today = new Date();
      let age = today.getFullYear() - birthDate.getFullYear();
      const m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      if (age < 18) {
        errors.push('Báº¡n pháº£i tá»« 18 tuá»•i trá»Ÿ lÃªn');
      }
    } else {
      errors.push('Vui lÃ²ng nháº­p ngÃ y sinh');
    }

    if (!/^[0-9]{10}$/.test(phone)) {
      errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i Ä‘Ãºng 10 chá»¯ sá»‘');
    }

    return errors;
  };

  // Next tá»« Step 1
  const handleNext1 = () => {
    const errors = validateStep1();
    if (errors.length > 0) {
      alert('Lá»—i á»Ÿ bÆ°á»›c 1:\n' + errors.join('\n'));
      return;
    }
    showStep(2);
  };

  // Next tá»« Step 2
  const handleNext2 = () => {
    const errors = validateStep2();
    if (errors.length > 0) {
      alert('Lá»—i á»Ÿ bÆ°á»›c 2:\n' + errors.join('\n'));
      return;
    }
    showStep(3);
  };

  // Back buttons
  const handleBack2 = () => showStep(1);
  const handleBack3 = () => showStep(2);

  // Final submit - validate step 3
  const handleSubmit = (event) => {
    event.preventDefault();

    const formData = new FormData(event.target);
    const interests = formData.getAll('interests');

    if (interests.length === 0) {
      alert('Vui lÃ²ng chá»n Ã­t nháº¥t 1 sá»Ÿ thÃ­ch á»Ÿ bÆ°á»›c 3');
      return;
    }

    // Thu tháº­p toÃ n bá»™ dá»¯ liá»‡u
    const data = {
      username: formData.get('username'),
      email: formData.get('email'),
      password: formData.get('password'),
      fullName: formData.get('fullName'),
      dob: formData.get('dob'),
      phone: formData.get('phone'),
      newsletter: !!formData.get('newsletter'),
      interests: interests,
      bio: formData.get('bio') || '',
    };

    console.log('âœ… Registration complete:', data);

    // Optional: reset form sau khi thÃ nh cÃ´ng
    // event.target.reset();
    // showStep(1);
  };

  // Khá»Ÿi táº¡o: hiá»ƒn thá»‹ bÆ°á»›c 1
  // (thÆ°á»ng Ä‘áº·t trong useEffect, nhÆ°ng á»Ÿ Ä‘Ã¢y gá»i trá»±c tiáº¿p)
  // VÃ¬ lÃ  uncontrolled, ta Ä‘á»ƒ JSX render trÆ°á»›c rá»“i má»›i gá»i showStep(1)
  // NhÆ°ng trong React, tá»‘t nháº¥t nÃªn gá»i trong useEffect â†’ á»Ÿ Ä‘Ã¢y ta giáº£ láº­p báº±ng setTimeout ngáº¯n
  setTimeout(() => {
    showStep(1);
  }, 0);

  return (
    <form onSubmit={handleSubmit}>
      <div
        id='step-indicator'
        style={{ fontWeight: 'bold', marginBottom: '24px', fontSize: '1.2rem' }}
      >
        BÆ°á»›c 1/3
      </div>

      {/* Step 1 */}
      <div
        id='step-1'
        className='form-step'
      >
        <h3>ThÃ´ng tin tÃ i khoáº£n</h3>

        <div>
          <label htmlFor='username'>Username:</label>
          <input
            type='text'
            id='username'
            name='username'
            required
          />
        </div>

        <div>
          <label htmlFor='email'>Email:</label>
          <input
            type='email'
            id='email'
            name='email'
            required
          />
        </div>

        <div>
          <label htmlFor='password'>Máº­t kháº©u:</label>
          <input
            type='password'
            id='password'
            name='password'
            required
          />
        </div>

        <div style={{ marginTop: '20px' }}>
          <button
            type='button'
            onClick={handleNext1}
          >
            Tiáº¿p theo â†’
          </button>
        </div>
      </div>

      {/* Step 2 */}
      <div
        id='step-2'
        className='form-step'
        style={{ display: 'none' }}
      >
        <h3>ThÃ´ng tin cÃ¡ nhÃ¢n</h3>

        <div>
          <label htmlFor='fullName'>Há» tÃªn:</label>
          <input
            type='text'
            id='fullName'
            name='fullName'
            required
          />
        </div>

        <div>
          <label htmlFor='dob'>NgÃ y sinh:</label>
          <input
            type='date'
            id='dob'
            name='dob'
            required
          />
        </div>

        <div>
          <label htmlFor='phone'>Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
          <input
            type='tel'
            id='phone'
            name='phone'
            pattern='[0-9]{10}'
            title='Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i cÃ³ Ä‘Ãºng 10 chá»¯ sá»‘'
            required
          />
        </div>

        <div style={{ marginTop: '20px' }}>
          <button
            type='button'
            onClick={handleBack2}
          >
            â† Quay láº¡i
          </button>
          <button
            type='button'
            onClick={handleNext2}
          >
            Tiáº¿p theo â†’
          </button>
        </div>
      </div>

      {/* Step 3 */}
      <div
        id='step-3'
        className='form-step'
        style={{ display: 'none' }}
      >
        <h3>Sá»Ÿ thÃ­ch</h3>

        <div>
          <label>
            <input
              type='checkbox'
              name='newsletter'
            />
            Nháº­n báº£n tin
          </label>
        </div>

        <fieldset>
          <legend>Sá»Ÿ thÃ­ch: *</legend>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='tech'
            />
            CÃ´ng nghá»‡
          </label>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='sports'
            />
            Thá»ƒ thao
          </label>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='music'
            />
            Ã‚m nháº¡c
          </label>
          <label>
            <input
              type='checkbox'
              name='interests'
              value='travel'
            />
            Du lá»‹ch
          </label>
        </fieldset>

        <div>
          <label htmlFor='bio'>Giá»›i thiá»‡u báº£n thÃ¢n:</label>
          <textarea
            id='bio'
            name='bio'
            rows={4}
            maxLength={200}
            placeholder='Tá»‘i Ä‘a 200 kÃ½ tá»±'
          />
        </div>

        <div style={{ marginTop: '20px' }}>
          <button
            type='button'
            onClick={handleBack3}
          >
            â† Quay láº¡i
          </button>
          <button type='submit'>HoÃ n táº¥t Ä‘Äƒng kÃ½</button>
        </div>
      </div>
    </form>
  );
}

/* VÃ­ dá»¥ káº¿t quáº£ console khi submit thÃ nh cÃ´ng:
âœ… Registration complete: {
  username: "nguyenvana",
  email: "vana@example.com",
  password: "MatKhau123",
  fullName: "Nguyá»…n VÄƒn A",
  dob: "1995-05-20",
  phone: "0912345678",
  newsletter: true,
  interests: ["tech", "music"],
  bio: "YÃªu thÃ­ch cÃ´ng nghá»‡ vÃ  Ã¢m nháº¡c hiá»‡n Ä‘áº¡i."
}
*/
```

</details>

---

### â­â­â­â­â­ Exercise 5: Production-Ready Contact Form (90 phÃºt)

```jsx
/**
 * ğŸ¯ Má»¥c tiÃªu: Form Ä‘áº¡t chuáº©n production
 * â±ï¸ Thá»i gian: 90 phÃºt
 *
 * ğŸ“‹ Feature Specification:
 * Táº¡o contact form cho enterprise website vá»›i cÃ¡c yÃªu cáº§u:
 *
 * Functional Requirements:
 * - Name, Email, Phone, Subject, Message fields
 * - Department dropdown (Sales, Support, HR, Other)
 * - Priority radio (Low, Medium, High, Urgent)
 * - File attachment (optional, max 5MB, pdf/doc/docx only)
 * - Privacy policy checkbox (required)
 * - Form submission vá»›i validation Ä‘áº§y Ä‘á»§
 * - Success/Error feedback
 * - Form reset sau submit thÃ nh cÃ´ng
 *
 * Non-Functional Requirements:
 * - Accessibility (WCAG 2.1 Level AA)
 * - Responsive design
 * - Loading state during submission
 * - Error messages inline & summary
 * - Client-side validation
 * - Security considerations
 *
 * ğŸ—ï¸ Technical Design Doc:
 *
 * 1. Component Architecture
 *    - Single ContactForm component
 *    - Helper validation functions
 *    - Error display component (inline)
 *
 * 2. State Management Strategy
 *    - NO STATE (uncontrolled form)
 *    - DOM manipulation for error display
 *    - FormData API for value extraction
 *
 * 3. API Integration Points
 *    - Mock API endpoint (console.log)
 *    - Timeout Ä‘á»ƒ simulate network delay
 *
 * 4. Performance Considerations
 *    - Debounce file validation
 *    - Lazy load file reader
 *
 * 5. Error Handling Strategy
 *    - Inline errors per field
 *    - Error summary at top
 *    - Focus management
 *
 * âœ… Production Checklist:
 * - [ ] All inputs have labels (for screen readers)
 * - [ ] Required fields marked with *
 * - [ ] ARIA attributes (aria-required, aria-invalid)
 * - [ ] Error messages with role="alert"
 * - [ ] Keyboard navigation works
 * - [ ] Form submits with Enter key
 * - [ ] Loading state prevents double submit
 * - [ ] File upload validation (size, type)
 * - [ ] XSS prevention (sanitize input)
 * - [ ] Responsive layout (mobile-first)
 * - [ ] High contrast mode support
 * - [ ] Focus visible indicators
 *
 * ğŸ“ Documentation:
 * - Inline comments giáº£i thÃ­ch logic
 * - JSDoc cho functions
 * - Usage examples
 */

/**
 * File upload validator
 * @param {File} file
 * @returns {string|null} Error message hoáº·c null náº¿u valid
 */
function validateFile(file) {
  if (!file) return null;

  const MAX_SIZE = 5 * 1024 * 1024; // 5MB
  const ALLOWED_TYPES = [
    'application/pdf',
    'application/msword',
    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
  ];

  if (file.size > MAX_SIZE) {
    return `File quÃ¡ lá»›n. Tá»‘i Ä‘a 5MB (file cá»§a báº¡n: ${(file.size / 1024 / 1024).toFixed(2)}MB)`;
  }

  if (!ALLOWED_TYPES.includes(file.type)) {
    return 'Chá»‰ cháº¥p nháº­n file PDF, DOC, DOCX';
  }

  return null;
}

/**
 * Sanitize user input Ä‘á»ƒ prevent XSS
 * @param {string} str
 * @returns {string}
 */
function sanitizeInput(str) {
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

function ProductionContactForm() {
  // Track submission state
  let isSubmitting = false;

  /**
   * Display error message for specific field
   */
  const showFieldError = (fieldName, message) => {
    const errorId = `${fieldName}-error`;
    let errorEl = document.getElementById(errorId);

    if (!errorEl) {
      errorEl = document.createElement('div');
      errorEl.id = errorId;
      errorEl.className = 'field-error';
      errorEl.setAttribute('role', 'alert');

      const field = document.getElementById(fieldName);
      field.parentNode.appendChild(errorEl);
    }

    errorEl.textContent = message;
    errorEl.style.display = 'block';

    // Mark field as invalid for screen readers
    const field = document.getElementById(fieldName);
    field.setAttribute('aria-invalid', 'true');
  };

  /**
   * Clear all error messages
   */
  const clearErrors = () => {
    document.querySelectorAll('.field-error').forEach((el) => {
      el.style.display = 'none';
    });

    document.querySelectorAll('[aria-invalid]').forEach((el) => {
      el.removeAttribute('aria-invalid');
    });

    const summary = document.getElementById('error-summary');
    if (summary) {
      summary.style.display = 'none';
    }
  };

  /**
   * Display error summary
   */
  const showErrorSummary = (errors) => {
    let summary = document.getElementById('error-summary');

    if (!summary) {
      summary = document.createElement('div');
      summary.id = 'error-summary';
      summary.className = 'error-summary';
      summary.setAttribute('role', 'alert');
      summary.setAttribute('aria-live', 'assertive');

      const form = document.getElementById('contact-form');
      form.insertBefore(summary, form.firstChild);
    }

    summary.innerHTML = `
      <h3>Vui lÃ²ng sá»­a cÃ¡c lá»—i sau:</h3>
      <ul>
        ${errors.map((err) => `<li>${sanitizeInput(err)}</li>`).join('')}
      </ul>
    `;
    summary.style.display = 'block';

    // Focus vÃ o summary Ä‘á»ƒ screen reader Ä‘á»c
    summary.focus();
  };

  /**
   * Validate all form fields
   */
  const validateForm = (formData, fileInput) => {
    const errors = [];

    // Extract data
    const data = {
      name: formData.get('name')?.trim(),
      email: formData.get('email')?.trim(),
      phone: formData.get('phone')?.trim(),
      department: formData.get('department'),
      priority: formData.get('priority'),
      subject: formData.get('subject')?.trim(),
      message: formData.get('message')?.trim(),
      privacy: formData.get('privacy'),
      file: fileInput.files[0],
    };

    // Clear previous errors
    clearErrors();

    // Validate name
    if (!data.name || data.name.length < 2) {
      errors.push('TÃªn pháº£i Ã­t nháº¥t 2 kÃ½ tá»±');
      showFieldError('name', 'TÃªn pháº£i Ã­t nháº¥t 2 kÃ½ tá»±');
    }

    // Validate email
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!data.email || !emailRegex.test(data.email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
      showFieldError('email', 'Email khÃ´ng há»£p lá»‡');
    }

    // Validate phone (optional but if provided must be valid)
    if (data.phone) {
      const phoneRegex = /^[0-9]{10,11}$/;
      if (!phoneRegex.test(data.phone)) {
        errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i lÃ  10-11 chá»¯ sá»‘');
        showFieldError('phone', 'Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i lÃ  10-11 chá»¯ sá»‘');
      }
    }

    // Validate department
    if (!data.department) {
      errors.push('Vui lÃ²ng chá»n phÃ²ng ban');
      showFieldError('department', 'Vui lÃ²ng chá»n phÃ²ng ban');
    }

    // Validate priority
    if (!data.priority) {
      errors.push('Vui lÃ²ng chá»n má»©c Ä‘á»™ Æ°u tiÃªn');
    }

    // Validate subject
    if (!data.subject || data.subject.length < 5) {
      errors.push('TiÃªu Ä‘á» pháº£i Ã­t nháº¥t 5 kÃ½ tá»±');
      showFieldError('subject', 'TiÃªu Ä‘á» pháº£i Ã­t nháº¥t 5 kÃ½ tá»±');
    }

    // Validate message
    if (!data.message || data.message.length < 20) {
      errors.push('Ná»™i dung pháº£i Ã­t nháº¥t 20 kÃ½ tá»±');
      showFieldError('message', 'Ná»™i dung pháº£i Ã­t nháº¥t 20 kÃ½ tá»±');
    }

    // Validate privacy
    if (!data.privacy) {
      errors.push('Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i chÃ­nh sÃ¡ch báº£o máº­t');
      showFieldError('privacy', 'Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i chÃ­nh sÃ¡ch báº£o máº­t');
    }

    // Validate file
    const fileError = validateFile(data.file);
    if (fileError) {
      errors.push(fileError);
      showFieldError('attachment', fileError);
    }

    return { valid: errors.length === 0, errors, data };
  };

  /**
   * Simulate API call
   */
  const submitToAPI = async (data) => {
    // Simulate network delay
    await new Promise((resolve) => setTimeout(resolve, 2000));

    // Simulate random success/failure (90% success)
    if (Math.random() > 0.1) {
      return { success: true };
    } else {
      throw new Error('Server error. Please try again.');
    }
  };

  /**
   * Handle form submission
   */
  const handleSubmit = async (event) => {
    event.preventDefault();

    // Prevent double submit
    if (isSubmitting) {
      return;
    }

    const form = event.target;
    const formData = new FormData(form);
    const fileInput = document.getElementById('attachment');

    // Validate
    const { valid, errors, data } = validateForm(formData, fileInput);

    if (!valid) {
      showErrorSummary(errors);

      // Focus first error field
      const firstErrorField = document.querySelector('[aria-invalid="true"]');
      if (firstErrorField) {
        firstErrorField.focus();
      }

      return;
    }

    // Show loading state
    isSubmitting = true;
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Äang gá»­i...';
    submitBtn.disabled = true;

    try {
      // Submit to API
      await submitToAPI(data);

      // Success feedback
      alert('âœ… Gá»­i thÃ nh cÃ´ng! ChÃºng tÃ´i sáº½ liÃªn há»‡ báº¡n sá»›m.');

      // Reset form
      form.reset();
      clearErrors();

      // Log success (in production: analytics tracking)
      console.log('âœ… Contact form submitted:', {
        ...data,
        file: data.file
          ? {
              name: data.file.name,
              size: data.file.size,
              type: data.file.type,
            }
          : null,
      });
    } catch (error) {
      // Error feedback
      alert('âŒ CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i sau.');
      console.error('Submission error:', error);
    } finally {
      // Reset loading state
      isSubmitting = false;
      submitBtn.textContent = originalText;
      submitBtn.disabled = false;
    }
  };

  /**
   * Handle file input change
   */
  const handleFileChange = (event) => {
    const file = event.target.files[0];
    const error = validateFile(file);

    if (error) {
      showFieldError('attachment', error);
      event.target.value = ''; // Clear invalid file
    } else {
      clearErrors();
    }
  };

  return (
    <form
      id='contact-form'
      onSubmit={handleSubmit}
      noValidate // Use custom validation
      style={{
        maxWidth: '600px',
        margin: '0 auto',
        padding: '20px',
      }}
    >
      <h2>LiÃªn há»‡ vá»›i chÃºng tÃ´i</h2>
      <p>Äiá»n thÃ´ng tin bÃªn dÆ°á»›i, chÃºng tÃ´i sáº½ liÃªn há»‡ báº¡n sá»›m nháº¥t.</p>

      {/* Name */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='name'>
          Há» tÃªn:{' '}
          <span
            style={{ color: 'red' }}
            aria-label='required'
          >
            *
          </span>
        </label>
        <input
          type='text'
          id='name'
          name='name'
          aria-required='true'
          autoComplete='name'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Email */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='email'>
          Email:{' '}
          <span
            style={{ color: 'red' }}
            aria-label='required'
          >
            *
          </span>
        </label>
        <input
          type='email'
          id='email'
          name='email'
          aria-required='true'
          autoComplete='email'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Phone */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='phone'>Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
        <input
          type='tel'
          id='phone'
          name='phone'
          autoComplete='tel'
          placeholder='0901234567'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Department */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='department'>
          PhÃ²ng ban:{' '}
          <span
            style={{ color: 'red' }}
            aria-label='required'
          >
            *
          </span>
        </label>
        <select
          id='department'
          name='department'
          aria-required='true'
          defaultValue=''
          style={{ width: '100%', padding: '8px' }}
        >
          <option
            value=''
            disabled
          >
            -- Chá»n phÃ²ng ban --
          </option>
          <option value='sales'>Sales</option>
          <option value='support'>Support</option>
          <option value='hr'>HR</option>
          <option value='other'>Other</option>
        </select>
      </div>

      {/* Priority */}
      <fieldset
        style={{
          marginBottom: '20px',
          border: '1px solid #ccc',
          padding: '10px',
        }}
      >
        <legend>
          Má»©c Ä‘á»™ Æ°u tiÃªn:{' '}
          <span
            style={{ color: 'red' }}
            aria-label='required'
          >
            *
          </span>
        </legend>
        <label style={{ display: 'block', marginBottom: '5px' }}>
          <input
            type='radio'
            name='priority'
            value='low'
          />{' '}
          Tháº¥p
        </label>
        <label style={{ display: 'block', marginBottom: '5px' }}>
          <input
            type='radio'
            name='priority'
            value='medium'
            defaultChecked
          />{' '}
          Trung bÃ¬nh
        </label>
        <label style={{ display: 'block', marginBottom: '5px' }}>
          <input
            type='radio'
            name='priority'
            value='high'
          />{' '}
          Cao
        </label>
        <label style={{ display: 'block' }}>
          <input
            type='radio'
            name='priority'
            value='urgent'
          />{' '}
          Kháº©n cáº¥p
        </label>
      </fieldset>

      {/* Subject */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='subject'>
          TiÃªu Ä‘á»:{' '}
          <span
            style={{ color: 'red' }}
            aria-label='required'
          >
            *
          </span>
        </label>
        <input
          type='text'
          id='subject'
          name='subject'
          aria-required='true'
          placeholder='TÃ³m táº¯t ná»™i dung liÃªn há»‡'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Message */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='message'>
          Ná»™i dung:{' '}
          <span
            style={{ color: 'red' }}
            aria-label='required'
          >
            *
          </span>
        </label>
        <textarea
          id='message'
          name='message'
          aria-required='true'
          rows={6}
          placeholder='MÃ´ táº£ chi tiáº¿t yÃªu cáº§u cá»§a báº¡n (Ã­t nháº¥t 20 kÃ½ tá»±)'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* File Attachment */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='attachment'>
          ÄÃ­nh kÃ¨m file: <small>(PDF, DOC, DOCX - Max 5MB)</small>
        </label>
        <input
          type='file'
          id='attachment'
          name='attachment'
          accept='.pdf,.doc,.docx'
          onChange={handleFileChange}
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Privacy Checkbox */}
      <div style={{ marginBottom: '20px' }}>
        <label>
          <input
            type='checkbox'
            id='privacy'
            name='privacy'
            aria-required='true'
          />{' '}
          <span>
            TÃ´i Ä‘á»“ng Ã½ vá»›i{' '}
            <a
              href='/privacy'
              target='_blank'
              rel='noopener noreferrer'
            >
              chÃ­nh sÃ¡ch báº£o máº­t
            </a>{' '}
            <span
              style={{ color: 'red' }}
              aria-label='required'
            >
              *
            </span>
          </span>
        </label>
      </div>

      {/* Submit Button */}
      <button
        type='submit'
        style={{
          backgroundColor: '#007bff',
          color: 'white',
          padding: '12px 24px',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer',
          fontSize: '16px',
        }}
      >
        Gá»­i liÃªn há»‡
      </button>

      {/* CSS for error messages */}
      <style>{`
        .field-error {
          color: #d32f2f;
          font-size: 14px;
          margin-top: 4px;
          display: none;
        }
        
        .error-summary {
          background-color: #ffebee;
          border-left: 4px solid #d32f2f;
          padding: 16px;
          margin-bottom: 24px;
          display: none;
        }
        
        .error-summary h3 {
          color: #d32f2f;
          margin-top: 0;
        }
        
        .error-summary ul {
          margin: 8px 0 0 0;
          padding-left: 20px;
        }
        
        [aria-invalid="true"] {
          border-color: #d32f2f;
          border-width: 2px;
        }
        
        /* Focus styles for accessibility */
        input:focus,
        select:focus,
        textarea:focus,
        button:focus {
          outline: 2px solid #007bff;
          outline-offset: 2px;
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
          input, select, textarea {
            border: 2px solid currentColor;
          }
        }
      `}</style>
    </form>
  );
}

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
/**
 * Implement production-ready contact form vá»›i:
 * - âœ… Full validation (client-side)
 * - âœ… Accessibility (WCAG 2.1 AA)
 * - âœ… Error handling (inline + summary)
 * - âœ… Loading states
 * - âœ… File upload validation
 * - âœ… Security (input sanitization)
 * - âœ… Responsive design
 * - âœ… Focus management
 * - âœ… Screen reader support
 */
```

**ğŸ” Code Review Self-Checklist:**

- [ ] All labels have `htmlFor` attribute?
- [ ] Required fields marked with `aria-required="true"`?
- [ ] Error messages have `role="alert"`?
- [ ] Focus moves to errors?
- [ ] Keyboard navigation works?
- [ ] File upload validated (size + type)?
- [ ] Double submit prevented?
- [ ] Input sanitized before display?
- [ ] Loading state shown during submit?
- [ ] Success/error feedback clear?

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Production-Ready Contact Form (Uncontrolled + DOM manipulation)
 * Äáº¡t chuáº©n accessibility WCAG 2.1 AA, client-side validation,
 * error handling (inline + summary), loading state, file validation,
 * input sanitization, focus management, khÃ´ng sá»­ dá»¥ng state
 */
function ProductionContactForm() {
  // Biáº¿n theo dÃµi tráº¡ng thÃ¡i submit (khÃ´ng pháº£i React state)
  let isSubmitting = false;

  /**
   * Hiá»ƒn thá»‹ lá»—i cho má»™t field cá»¥ thá»ƒ
   * @param {string} fieldName - id cá»§a input
   * @param {string} message - thÃ´ng bÃ¡o lá»—i
   */
  const showFieldError = (fieldName, message) => {
    const errorId = `${fieldName}-error`;
    let errorEl = document.getElementById(errorId);

    if (!errorEl) {
      errorEl = document.createElement('div');
      errorEl.id = errorId;
      errorEl.className = 'field-error';
      errorEl.setAttribute('role', 'alert');
      errorEl.setAttribute('aria-live', 'assertive');

      const field = document.getElementById(fieldName);
      if (field && field.parentNode) {
        field.parentNode.appendChild(errorEl);
      }
    }

    errorEl.textContent = message;
    errorEl.style.display = 'block';

    const field = document.getElementById(fieldName);
    if (field) {
      field.setAttribute('aria-invalid', 'true');
      field.setAttribute('aria-describedby', errorId);
    }
  };

  /**
   * XÃ³a toÃ n bá»™ lá»—i hiá»ƒn thá»‹
   */
  const clearErrors = () => {
    document.querySelectorAll('.field-error').forEach((el) => {
      el.style.display = 'none';
      el.textContent = '';
    });

    document.querySelectorAll('[aria-invalid="true"]').forEach((el) => {
      el.removeAttribute('aria-invalid');
      el.removeAttribute('aria-describedby');
    });

    const summary = document.getElementById('error-summary');
    if (summary) {
      summary.style.display = 'none';
      summary.innerHTML = '';
    }
  };

  /**
   * Hiá»ƒn thá»‹ tÃ³m táº¯t lá»—i á»Ÿ Ä‘áº§u form
   * @param {string[]} errors
   */
  const showErrorSummary = (errors) => {
    let summary = document.getElementById('error-summary');

    if (!summary) {
      summary = document.createElement('div');
      summary.id = 'error-summary';
      summary.className = 'error-summary';
      summary.setAttribute('role', 'alert');
      summary.setAttribute('aria-live', 'assertive');

      const form = document.getElementById('contact-form');
      if (form) form.insertBefore(summary, form.firstChild);
    }

    summary.innerHTML = `
      <h3>Vui lÃ²ng sá»­a cÃ¡c lá»—i sau:</h3>
      <ul>
        ${errors.map((err) => `<li>${sanitizeInput(err)}</li>`).join('')}
      </ul>
    `;
    summary.style.display = 'block';
    summary.focus(); // Há»— trá»£ screen reader
  };

  /**
   * Validate toÃ n bá»™ form
   * @param {FormData} formData
   * @param {HTMLInputElement} fileInput
   * @returns {{valid: boolean, errors: string[], data: object}}
   */
  const validateForm = (formData, fileInput) => {
    const errors = [];

    const data = {
      name: (formData.get('name') || '').trim(),
      email: (formData.get('email') || '').trim(),
      phone: (formData.get('phone') || '').trim(),
      department: formData.get('department'),
      priority: formData.get('priority'),
      subject: (formData.get('subject') || '').trim(),
      message: (formData.get('message') || '').trim(),
      privacy: formData.get('privacy'),
      file: fileInput?.files?.[0] || null,
    };

    clearErrors();

    // Name
    if (!data.name || data.name.length < 2) {
      errors.push('Há» tÃªn pháº£i Ã­t nháº¥t 2 kÃ½ tá»±');
      showFieldError('name', 'Há» tÃªn pháº£i Ã­t nháº¥t 2 kÃ½ tá»±');
    }

    // Email
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!data.email || !emailRegex.test(data.email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
      showFieldError('email', 'Email khÃ´ng há»£p lá»‡');
    }

    // Phone (optional)
    if (data.phone && !/^[0-9]{10,11}$/.test(data.phone)) {
      errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i lÃ  10-11 chá»¯ sá»‘');
      showFieldError('phone', 'Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i lÃ  10-11 chá»¯ sá»‘');
    }

    // Department
    if (!data.department) {
      errors.push('Vui lÃ²ng chá»n phÃ²ng ban');
      showFieldError('department', 'Vui lÃ²ng chá»n phÃ²ng ban');
    }

    // Priority
    if (!data.priority) {
      errors.push('Vui lÃ²ng chá»n má»©c Ä‘á»™ Æ°u tiÃªn');
      // KhÃ´ng cÃ³ id cho radio group â†’ khÃ´ng show inline error cho group
    }

    // Subject
    if (!data.subject || data.subject.length < 5) {
      errors.push('TiÃªu Ä‘á» pháº£i Ã­t nháº¥t 5 kÃ½ tá»±');
      showFieldError('subject', 'TiÃªu Ä‘á» pháº£i Ã­t nháº¥t 5 kÃ½ tá»±');
    }

    // Message
    if (!data.message || data.message.length < 20) {
      errors.push('Ná»™i dung pháº£i Ã­t nháº¥t 20 kÃ½ tá»±');
      showFieldError('message', 'Ná»™i dung pháº£i Ã­t nháº¥t 20 kÃ½ tá»±');
    }

    // Privacy
    if (!data.privacy) {
      errors.push('Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i chÃ­nh sÃ¡ch báº£o máº­t');
      showFieldError('privacy', 'Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i chÃ­nh sÃ¡ch báº£o máº­t');
    }

    // File
    const fileError = validateFile(data.file);
    if (fileError) {
      errors.push(fileError);
      showFieldError('attachment', fileError);
    }

    return { valid: errors.length === 0, errors, data };
  };

  /**
   * Giáº£ láº­p gá»i API
   * @param {object} data
   */
  const submitToAPI = async (data) => {
    await new Promise((resolve) => setTimeout(resolve, 1800));

    // 92% thÃ nh cÃ´ng Ä‘á»ƒ test error hiáº¿m
    if (Math.random() > 0.08) {
      return { success: true, message: 'Gá»­i thÃ nh cÃ´ng' };
    }
    throw new Error('Lá»—i server táº¡m thá»i. Vui lÃ²ng thá»­ láº¡i sau.');
  };

  /**
   * Xá»­ lÃ½ submit form
   */
  const handleSubmit = async (event) => {
    event.preventDefault();

    if (isSubmitting) return;

    const form = event.target;
    const formData = new FormData(form);
    const fileInput = document.getElementById('attachment');

    const { valid, errors, data } = validateForm(formData, fileInput);

    if (!valid) {
      showErrorSummary(errors);

      const firstInvalid = document.querySelector('[aria-invalid="true"]');
      if (firstInvalid) {
        firstInvalid.focus();
      }
      return;
    }

    isSubmitting = true;
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Äang gá»­i...';

    try {
      await submitToAPI(data);

      alert('âœ… Gá»­i thÃ nh cÃ´ng! ChÃºng tÃ´i sáº½ pháº£n há»“i sá»›m nháº¥t cÃ³ thá»ƒ.');

      form.reset();
      clearErrors();

      // Reset file input visual
      const fileLabel = document.querySelector('label[for="attachment"]');
      if (fileLabel)
        fileLabel.textContent = 'ÄÃ­nh kÃ¨m file: (PDF, DOC, DOCX - Max 5MB)';

      console.log('âœ… Contact form submitted:', {
        ...data,
        file: data.file
          ? {
              name: data.file.name,
              size: `${(data.file.size / 1024 / 1024).toFixed(2)} MB`,
              type: data.file.type,
            }
          : null,
      });
    } catch (err) {
      alert(
        'âŒ ' + (err.message || 'CÃ³ lá»—i xáº£y ra khi gá»­i. Vui lÃ²ng thá»­ láº¡i.'),
      );
      console.error('Submission failed:', err);
    } finally {
      isSubmitting = false;
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  };

  /**
   * Validate file ngay khi chá»n
   */
  const handleFileChange = (e) => {
    const file = e.target.files[0];
    const error = validateFile(file);

    if (error) {
      showFieldError('attachment', error);
      e.target.value = '';
    } else {
      // XÃ³a lá»—i náº¿u cÃ³
      const errorEl = document.getElementById('attachment-error');
      if (errorEl) errorEl.style.display = 'none';
      document.getElementById('attachment')?.removeAttribute('aria-invalid');
    }
  };

  return (
    <form
      id='contact-form'
      onSubmit={handleSubmit}
      noValidate
      style={{
        maxWidth: '680px',
        margin: '0 auto',
        padding: '24px',
        fontFamily: 'system-ui, sans-serif',
      }}
    >
      <h2>LiÃªn há»‡ vá»›i chÃºng tÃ´i</h2>
      <p>
        Äiá»n thÃ´ng tin bÃªn dÆ°á»›i, chÃºng tÃ´i sáº½ pháº£n há»“i trong vÃ²ng 24-48 giá».
      </p>

      {/* Error Summary sáº½ Ä‘Æ°á»£c táº¡o Ä‘á»™ng */}

      {/* Name */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='name'>
          Há» tÃªn{' '}
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </label>
        <input
          type='text'
          id='name'
          name='name'
          aria-required='true'
          autoComplete='name'
          required
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        />
      </div>

      {/* Email */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='email'>
          Email{' '}
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </label>
        <input
          type='email'
          id='email'
          name='email'
          aria-required='true'
          autoComplete='email'
          required
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        />
      </div>

      {/* Phone */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='phone'>Sá»‘ Ä‘iá»‡n thoáº¡i</label>
        <input
          type='tel'
          id='phone'
          name='phone'
          autoComplete='tel'
          placeholder='VÃ­ dá»¥: 0901234567'
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        />
      </div>

      {/* Department */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='department'>
          PhÃ²ng ban{' '}
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </label>
        <select
          id='department'
          name='department'
          aria-required='true'
          required
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        >
          <option
            value=''
            disabled
            selected
          >
            -- Chá»n phÃ²ng ban --
          </option>
          <option value='sales'>Sales</option>
          <option value='support'>Support</option>
          <option value='hr'>HR</option>
          <option value='other'>Other</option>
        </select>
      </div>

      {/* Priority */}
      <fieldset
        style={{
          marginBottom: '24px',
          border: '1px solid #ddd',
          padding: '16px',
        }}
      >
        <legend>
          Má»©c Ä‘á»™ Æ°u tiÃªn{' '}
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </legend>
        {['low', 'medium', 'high', 'urgent'].map((val, i) => (
          <label
            key={val}
            style={{ display: 'block', marginBottom: '8px' }}
          >
            <input
              type='radio'
              name='priority'
              value={val}
              defaultChecked={i === 1}
              required
            />{' '}
            {val === 'low'
              ? 'Tháº¥p'
              : val === 'medium'
                ? 'Trung bÃ¬nh'
                : val === 'high'
                  ? 'Cao'
                  : 'Kháº©n cáº¥p'}
          </label>
        ))}
      </fieldset>

      {/* Subject */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='subject'>
          TiÃªu Ä‘á»{' '}
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </label>
        <input
          type='text'
          id='subject'
          name='subject'
          aria-required='true'
          placeholder='TÃ³m táº¯t ná»™i dung liÃªn há»‡'
          required
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        />
      </div>

      {/* Message */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='message'>
          Ná»™i dung{' '}
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </label>
        <textarea
          id='message'
          name='message'
          aria-required='true'
          rows={6}
          placeholder='MÃ´ táº£ chi tiáº¿t yÃªu cáº§u cá»§a báº¡n (Ã­t nháº¥t 20 kÃ½ tá»±)'
          required
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        />
      </div>

      {/* File */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='attachment'>ÄÃ­nh kÃ¨m tÃ i liá»‡u (tÃ¹y chá»n)</label>
        <input
          type='file'
          id='attachment'
          name='attachment'
          accept='.pdf,.doc,.docx'
          onChange={handleFileChange}
          style={{ width: '100%', padding: '10px', boxSizing: 'border-box' }}
        />
      </div>

      {/* Privacy */}
      <div style={{ marginBottom: '28px' }}>
        <label>
          <input
            type='checkbox'
            id='privacy'
            name='privacy'
            aria-required='true'
            required
          />{' '}
          TÃ´i Ä‘Ã£ Ä‘á»c vÃ  Ä‘á»“ng Ã½ vá»›i{' '}
          <a
            href='/privacy-policy'
            target='_blank'
            rel='noopener noreferrer'
          >
            ChÃ­nh sÃ¡ch báº£o máº­t
          </a>
          <span
            style={{ color: 'red' }}
            aria-label='báº¯t buá»™c'
          >
            *
          </span>
        </label>
      </div>

      {/* Submit */}
      <button
        type='submit'
        disabled={isSubmitting}
        style={{
          backgroundColor: isSubmitting ? '#6c757d' : '#0d6efd',
          color: 'white',
          padding: '12px 32px',
          border: 'none',
          borderRadius: '6px',
          fontSize: '16px',
          cursor: isSubmitting ? 'not-allowed' : 'pointer',
          minWidth: '160px',
        }}
      >
        {isSubmitting ? 'Äang gá»­i...' : 'Gá»­i thÃ´ng tin'}
      </button>

      {/* Inline CSS */}
      <style>{`
        .field-error {
          color: #dc3545;
          font-size: 14px;
          margin-top: 6px;
          display: none;
        }
        .error-summary {
          background: #f8d7da;
          border-left: 5px solid #dc3545;
          padding: 16px 20px;
          margin-bottom: 28px;
          border-radius: 4px;
          display: none;
        }
        .error-summary h3 {
          margin: 0 0 12px 0;
          color: #721c24;
        }
        .error-summary ul {
          margin: 0;
          padding-left: 24px;
        }
        [aria-invalid="true"] {
          border: 2px solid #dc3545 !important;
        }
        input:focus, select:focus, textarea:focus {
          outline: 3px solid #0d6efd;
          outline-offset: 2px;
        }
        @media (prefers-contrast: high) {
          input, select, textarea, button {
            border: 2px solid currentColor !important;
          }
        }
        @media (max-width: 600px) {
          form { padding: 16px; }
          button { width: 100%; }
        }
      `}</style>
    </form>
  );
}

/* VÃ­ dá»¥ káº¿t quáº£ console khi submit thÃ nh cÃ´ng:
âœ… Contact form submitted: {
  name: "Tráº§n Thá»‹ B",
  email: "b.tran@company.vn",
  phone: "0918123456",
  department: "support",
  priority: "high",
  subject: "Há»— trá»£ ká»¹ thuáº­t kháº©n cáº¥p",
  message: "MÃ¡y chá»§ bá»‹ lá»—i 502 liÃªn tá»¥c tá»« 14h hÃ´m nay...",
  privacy: "on",
  file: { name: "error-log.pdf", size: "2.34 MB", type: "application/pdf" }
}
*/
```

</details>

---

## ğŸ“Š PHáº¦N 4: SO SÃNH PATTERNS (30 phÃºt)

### Báº£ng So SÃ¡nh: Controlled vs Uncontrolled Forms

| Aspect                     | **Uncontrolled Form**               | **Controlled Form** (Preview)                 |
| -------------------------- | ----------------------------------- | --------------------------------------------- |
| **Value Source**           | DOM (HTML elements)                 | React state                                   |
| **Access Method**          | `FormData`, `event.target.elements` | State variables                               |
| **Update Trigger**         | User types directly to DOM          | User types â†’ Event â†’ State update â†’ Re-render |
| **Validation**             | On submit hoáº·c onBlur               | Realtime (má»—i keystroke)                      |
| **Code Complexity**        | âœ… ÄÆ¡n giáº£n (Ã­t code)               | âš ï¸ Phá»©c táº¡p hÆ¡n (cáº§n state)                   |
| **Re-renders**             | âœ… Ãt (chá»‰ khi submit)              | âš ï¸ Nhiá»u (má»—i keystroke)                      |
| **Dynamic UI**             | âŒ KhÃ³ (cáº§n DOM manipulation)       | âœ… Dá»… (dá»±a vÃ o state)                         |
| **Default Values**         | `defaultValue`                      | `value={state}`                               |
| **Reset Form**             | `form.reset()`                      | Set state vá» initial                          |
| **Format Input**           | âŒ KhÃ³ (pháº£i dÃ¹ng onInput + DOM)    | âœ… Dá»… (format state)                          |
| **Conditional Fields**     | âš ï¸ CSS show/hide                    | âœ… Conditional rendering                      |
| **Cross-field Validation** | âœ… Dá»… (cÃ³ táº¥t cáº£ giÃ¡ trá»‹)           | âœ… Dá»… (cÃ³ táº¥t cáº£ state)                       |
| **Performance**            | âœ… Tá»‘t hÆ¡n (Ã­t renders)             | âš ï¸ CÃ³ thá»ƒ cháº­m (nhiá»u renders)                |
| **Testing**                | âš ï¸ KhÃ³ (cáº§n query DOM)              | âœ… Dá»… (check state)                           |

**When to use Uncontrolled:**

- âœ… Simple forms (1-5 fields)
- âœ… Chá»‰ cáº§n data khi submit
- âœ… KhÃ´ng cáº§n realtime validation
- âœ… Performance critical
- âœ… Third-party form libraries

**When to use Controlled:** (Sáº½ há»c NgÃ y 11)

- âœ… Realtime validation
- âœ… Format input while typing
- âœ… Conditional form logic
- âœ… Dynamic form fields
- âœ… Complex UX requirements

---

### Decision Tree: Chá»n Form Pattern

```
START: Báº¡n cáº§n build form?
â”‚
â”œâ”€> Form cÃ³ <3 fields?
â”‚   â”œâ”€> YES â”€â”€> Chá»‰ cáº§n data khi submit?
â”‚   â”‚           â”œâ”€> YES â”€â”€> âœ… UNCONTROLLED (Simple)
â”‚   â”‚           â””â”€> NO â”€â”€â”€> âš ï¸ Cáº§n realtime feedback?
â”‚   â”‚                       â”œâ”€> YES â”€â”€> ğŸ”œ CONTROLLED (NgÃ y 11)
â”‚   â”‚                       â””â”€> NO â”€â”€â”€> âœ… UNCONTROLLED
â”‚   â””â”€> NO
â”‚
â”œâ”€> Cáº§n validate realtime (má»—i keystroke)?
â”‚   â”œâ”€> YES â”€â”€> ğŸ”œ CONTROLLED (NgÃ y 11)
â”‚   â””â”€> NO
â”‚
â”œâ”€> Cáº§n format input while typing?
â”‚   â”‚   (VÃ­ dá»¥: credit card 1234-5678-9012-3456)
â”‚   â”œâ”€> YES â”€â”€> ğŸ”œ CONTROLLED (NgÃ y 11)
â”‚   â””â”€> NO
â”‚
â”œâ”€> Cáº§n disable button dá»±a vÃ o input values?
â”‚   â”œâ”€> YES â”€â”€> ğŸ”œ CONTROLLED (NgÃ y 11)
â”‚   â””â”€> NO
â”‚
â”œâ”€> Form fields thay Ä‘á»•i Ä‘á»™ng?
â”‚   â”‚   (VÃ­ dá»¥: Add/remove fields)
â”‚   â”œâ”€> YES â”€â”€> ğŸ”œ CONTROLLED (NgÃ y 11)
â”‚   â””â”€> NO
â”‚
â””â”€> Default: âœ… UNCONTROLLED
    (Simple, performant, Ä‘á»§ cho most cases)
```

---

### Pattern Combinations

```jsx
// âœ… Hybrid Pattern: Uncontrolled + Manual Validation
function HybridForm() {
  const handleSubmit = (event) => {
    event.preventDefault();

    // Uncontrolled: Láº¥y data tá»« DOM
    const data = new FormData(event.target);

    // Manual validation
    if (validate(data)) {
      submitToAPI(data);
    }
  };

  return <form onSubmit={handleSubmit}>...</form>;
}

// ğŸ”œ Controlled Pattern (NgÃ y 11)
function ControlledForm() {
  const [email, setEmail] = useState('');
  const [isValid, setIsValid] = useState(false);

  const handleChange = (e) => {
    const value = e.target.value;
    setEmail(value);
    setIsValid(validateEmail(value));
  };

  return (
    <form>
      <input
        value={email}
        onChange={handleChange}
      />
      {!isValid && <span>Invalid email</span>}
    </form>
  );
}
```

---

## ğŸ§ª PHáº¦N 5: DEBUG LAB (20 phÃºt)

### Bug 1: Form Submit Reloads Page âš ï¸

```jsx
// âŒ BUG: Page reloads sau khi submit
function BuggyForm1() {
  const handleSubmit = () => {
    // âŒ Thiáº¿u event.preventDefault()!
    const data = new FormData(document.getElementById('myform'));
    console.log(data);
  };

  return (
    <form
      id='myform'
      onSubmit={handleSubmit}
    >
      <input name='email' />
      <button type='submit'>Submit</button>
    </form>
  );
}

// ğŸ¤” QUESTIONS:
// 1. Táº¡i sao page reload?
// 2. Console.log cÃ³ cháº¡y khÃ´ng?
// 3. LÃ m sao fix?

// âœ… SOLUTION:
function FixedForm1() {
  const handleSubmit = (event) => {
    event.preventDefault(); // â† KEY FIX!
    const data = new FormData(event.target);
    console.log(Object.fromEntries(data));
  };

  return (
    <form onSubmit={handleSubmit}>
      <input name='email' />
      <button type='submit'>Submit</button>
    </form>
  );
}

// ğŸ“š EXPLANATION:
// - HTML form máº·c Ä‘á»‹nh submit Ä‘áº¿n server (page reload)
// - event.preventDefault() ngÄƒn behavior máº·c Ä‘á»‹nh
// - LuÃ´n LUÃ”N cáº§n preventDefault trong React forms!
```

---

### Bug 2: Cannot Read Checkbox Value âš ï¸

```jsx
// âŒ BUG: Checkbox value luÃ´n lÃ  null
function BuggyForm2() {
  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);

    const terms = formData.get('terms');
    console.log('Terms:', terms); // âŒ null hoáº·c "on"?

    if (terms === true) {
      // âŒ SAI! KhÃ´ng bao giá» true
      console.log('Accepted');
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type='checkbox'
        name='terms'
      />
      <button type='submit'>Submit</button>
    </form>
  );
}

// ğŸ¤” QUESTIONS:
// 1. Checkbox value lÃ  gÃ¬ khi checked/unchecked?
// 2. LÃ m sao convert sang boolean?
// 3. Táº¡i sao khÃ´ng dÃ¹ng === true?

// âœ… SOLUTION:
function FixedForm2() {
  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);

    const termsValue = formData.get('terms');
    // termsValue is "on" (checked) or null (unchecked)

    const termsAccepted = !!termsValue; // Convert to boolean
    // OR: termsValue !== null
    // OR: formData.has('terms')

    console.log('Terms accepted:', termsAccepted);

    if (termsAccepted) {
      console.log('âœ… User accepted terms');
    } else {
      console.log('âŒ User did NOT accept terms');
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <label>
        <input
          type='checkbox'
          name='terms'
        />{' '}
        I accept terms
      </label>
      <button type='submit'>Submit</button>
    </form>
  );
}

// ğŸ“š EXPLANATION:
// - Unchecked checkbox: formData.get() returns null
// - Checked checkbox: formData.get() returns "on" (string!)
// - Convert to boolean: !!value or value !== null
// - formData.has('key') is cleaner for existence check
```

---

### Bug 3: Cannot Get Multiple Checkbox Values âš ï¸

```jsx
// âŒ BUG: Chá»‰ láº¥y Ä‘Æ°á»£c 1 checkbox value
function BuggyForm3() {
  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);

    // âŒ SAI: get() chá»‰ tráº£ vá» GIÃ TRá»Š Äáº¦U TIÃŠN!
    const interests = formData.get('interests');
    console.log('Interests:', interests); // Chá»‰ 1 value!
  };

  return (
    <form onSubmit={handleSubmit}>
      <label>
        <input
          type='checkbox'
          name='interests'
          value='sports'
        />{' '}
        Sports
      </label>
      <label>
        <input
          type='checkbox'
          name='interests'
          value='music'
        />{' '}
        Music
      </label>
      <label>
        <input
          type='checkbox'
          name='interests'
          value='tech'
        />{' '}
        Tech
      </label>
      <button type='submit'>Submit</button>
    </form>
  );
}

// ğŸ¤” QUESTIONS:
// 1. Táº¡i sao chá»‰ láº¥y Ä‘Æ°á»£c 1 value?
// 2. LÃ m sao láº¥y táº¥t cáº£ checked values?
// 3. Náº¿u khÃ´ng cÃ³ checkbox nÃ o checked thÃ¬ sao?

// âœ… SOLUTION:
function FixedForm3() {
  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = new FormData(event.target);

    // âœ… ÄÃšNG: DÃ¹ng getAll() cho multiple values
    const interests = formData.getAll('interests');
    console.log('Interests:', interests); // Array of values

    if (interests.length === 0) {
      console.log('No interests selected');
    } else {
      console.log('Selected:', interests.join(', '));
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <fieldset>
        <legend>Select your interests:</legend>
        <label style={{ display: 'block' }}>
          <input
            type='checkbox'
            name='interests'
            value='sports'
          />{' '}
          Sports
        </label>
        <label style={{ display: 'block' }}>
          <input
            type='checkbox'
            name='interests'
            value='music'
          />{' '}
          Music
        </label>
        <label style={{ display: 'block' }}>
          <input
            type='checkbox'
            name='interests'
            value='tech'
          />{' '}
          Tech
        </label>
      </fieldset>
      <button type='submit'>Submit</button>
    </form>
  );
}

// ğŸ“š EXPLANATION:
// - get(name): Returns first value only
// - getAll(name): Returns ARRAY of all values
// - Unchecked checkboxes: NOT included in array
// - Always use getAll() for multiple checkboxes with same name
```

---

## âœ… PHáº¦N 6: Tá»° ÄÃNH GIÃ (15 phÃºt)

### Knowledge Check

ÄÃ¡nh dáº¥u âœ… nhá»¯ng Ä‘iá»u báº¡n Ä‘Ã£ hiá»ƒu:

**Form Basics:**

- [ ] Hiá»ƒu sá»± khÃ¡c biá»‡t giá»¯a HTML form vÃ  React form
- [ ] Biáº¿t khi nÃ o cáº§n `event.preventDefault()`
- [ ]Biáº¿t cÃ¡ch truy xuáº¥t form values báº±ng `FormData` API
- [ ] Biáº¿t cÃ¡ch truy xuáº¥t form values báº±ng `event.target.elements`
- [ ] Hiá»ƒu `name` attribute quan trá»ng nhÆ° tháº¿ nÃ o

**Input Types:**

- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c text, email, password inputs
- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c checkboxes (single & multiple)
- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c radio buttons
- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c select dropdowns
- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c textarea
- [ ] Xá»­ lÃ½ Ä‘Æ°á»£c file uploads

**Validation:**

- [ ] Validate required fields
- [ ] Validate email format
- [ ] Validate string length (min/max)
- [ ] Cross-field validation (password confirm)
- [ ] Regex validation
- [ ] File validation (size, type)

**Event Handling:**

- [ ] Hiá»ƒu sá»± khÃ¡c biá»‡t `onChange` React vs HTML
- [ ] DÃ¹ng Ä‘Æ°á»£c `onSubmit`, `onChange`, `onBlur`
- [ ] Prevent paste (`onPaste`)
- [ ] Format input (`onInput`)

**Best Practices:**

- [ ] Accessibility (labels, aria attributes)
- [ ] Error handling (inline + summary)
- [ ] Loading states
- [ ] Security (input sanitization)
- [ ] Form reset

**Uncontrolled vs Controlled (Conceptual):**

- [ ] Hiá»ƒu khÃ¡i niá»‡m controlled component
- [ ] Biáº¿t limitations cá»§a uncontrolled forms
- [ ] Biáº¿t khi nÃ o cáº§n controlled (prepare for NgÃ y 11)

---

### Code Review Checklist

Review code cá»§a báº¡n:

**Functionality:**

- [ ] Form submit khÃ´ng reload page?
- [ ] Validation cháº¡y Ä‘Ãºng?
- [ ] Error messages hiá»ƒn thá»‹ rÃµ rÃ ng?
- [ ] Form reset sau submit thÃ nh cÃ´ng?

**Code Quality:**

- [ ] Event handlers cÃ³ `event.preventDefault()`?
- [ ] DÃ¹ng `FormData.get()` cho single value?
- [ ] DÃ¹ng `FormData.getAll()` cho multiple values?
- [ ] Convert checkbox value sang boolean?
- [ ] Trim whitespace tá»« text inputs?

**Accessibility:**

- [ ] All inputs cÃ³ labels?
- [ ] Labels cÃ³ `htmlFor` attribute?
- [ ] Required fields marked (aria-required)?
- [ ] Error messages cÃ³ role="alert"?

**User Experience:**

- [ ] Placeholder text há»¯u Ã­ch?
- [ ] Error messages dá»… hiá»ƒu?
- [ ] Submit button cÃ³ loading state?
- [ ] Focus management há»£p lÃ½?

---

## ğŸ  BÃ€I Táº¬P Vá»€ NHÃ€

### Báº¯t buá»™c (30 phÃºt): Event Registration Form

Táº¡o form Ä‘Äƒng kÃ½ sá»± kiá»‡n vá»›i:

- Event name (select dropdown: Workshop, Conference, Meetup)
- Attendee name (text, required, min 3 chars)
- Email (email, required, valid format)
- Number of tickets (number, 1-10)
- Dietary restrictions (checkboxes: Vegetarian, Vegan, Gluten-free, None)
- Special requests (textarea, optional, max 300 chars)

Requirements:

- Validate all fields
- Calculate total price (ticket price varies by event type)
- Display summary before submit
- Console.log final data

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Event Registration Form - Uncontrolled pattern
 * - Validate táº¥t cáº£ fields khi submit
 * - TÃ­nh tá»•ng giÃ¡ tiá»n dá»±a trÃªn loáº¡i sá»± kiá»‡n
 * - Hiá»ƒn thá»‹ summary trÆ°á»›c khi submit tháº­t (confirm dialog)
 * - Console.log dá»¯ liá»‡u cuá»‘i cÃ¹ng khi hoÃ n táº¥t
 */
function EventRegistrationForm() {
  const TICKET_PRICES = {
    workshop: 300000, // 300.000 VNÄ
    conference: 1200000, // 1.200.000 VNÄ
    meetup: 150000, // 150.000 VNÄ
  };

  const handleSubmit = (event) => {
    event.preventDefault();

    const formData = new FormData(event.target);

    // Láº¥y dá»¯ liá»‡u
    const data = {
      eventType: formData.get('eventType'),
      attendeeName: (formData.get('attendeeName') || '').trim(),
      email: (formData.get('email') || '').trim(),
      tickets: parseInt(formData.get('tickets') || '0', 10),
      restrictions: formData.getAll('restrictions'),
      requests: (formData.get('requests') || '').trim(),
    };

    // Validation
    const errors = [];

    // Event type
    if (!data.eventType) {
      errors.push('Vui lÃ²ng chá»n loáº¡i sá»± kiá»‡n');
    }

    // Attendee name
    if (!data.attendeeName || data.attendeeName.length < 3) {
      errors.push('TÃªn ngÆ°á»i tham dá»± pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    }

    // Email
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!data.email) {
      errors.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
    } else if (!emailRegex.test(data.email)) {
      errors.push('Email khÃ´ng há»£p lá»‡');
    }

    // Number of tickets
    if (isNaN(data.tickets) || data.tickets < 1 || data.tickets > 10) {
      errors.push('Sá»‘ lÆ°á»£ng vÃ© pháº£i tá»« 1 Ä‘áº¿n 10');
    }

    // Dietary restrictions - khÃ´ng báº¯t buá»™c, nhÆ°ng náº¿u chá»n "None" thÃ¬ khÃ´ng nÃªn chá»n cÃ¡i khÃ¡c
    if (data.restrictions.includes('none') && data.restrictions.length > 1) {
      errors.push(
        'Náº¿u chá»n "KhÃ´ng cÃ³ háº¡n cháº¿" thÃ¬ khÃ´ng nÃªn chá»n háº¡n cháº¿ khÃ¡c',
      );
    }

    // Special requests - optional, chá»‰ check Ä‘á»™ dÃ i
    if (data.requests.length > 300) {
      errors.push('YÃªu cáº§u Ä‘áº·c biá»‡t khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ 300 kÃ½ tá»±');
    }

    if (errors.length > 0) {
      alert('Vui lÃ²ng sá»­a cÃ¡c lá»—i sau:\n\n' + errors.join('\n'));
      return;
    }

    // TÃ­nh giÃ¡
    const ticketPrice = TICKET_PRICES[data.eventType];
    const totalPrice = ticketPrice * data.tickets;

    // Táº¡o summary Ä‘á»ƒ confirm
    const restrictionsText =
      data.restrictions.length === 0
        ? 'KhÃ´ng'
        : data.restrictions
            .map((r) => {
              switch (r) {
                case 'vegetarian':
                  return 'Chay';
                case 'vegan':
                  return 'Thuáº§n chay';
                case 'glutenfree':
                  return 'KhÃ´ng gluten';
                case 'none':
                  return 'KhÃ´ng cÃ³ háº¡n cháº¿';
                default:
                  return r;
              }
            })
            .join(', ');

    const summary = `
ÄÄ‚NG KÃ Sá»° KIá»†N - XÃC NHáº¬N

Loáº¡i sá»± kiá»‡n: ${
      data.eventType === 'workshop'
        ? 'Workshop'
        : data.eventType === 'conference'
          ? 'Há»™i nghá»‹'
          : 'Meetup'
    }

TÃªn ngÆ°á»i tham dá»±: ${data.attendeeName}
Email: ${data.email}
Sá»‘ lÆ°á»£ng vÃ©: ${data.tickets}
GiÃ¡ má»—i vÃ©: ${ticketPrice.toLocaleString('vi-VN')} VNÄ
Tá»•ng tiá»n: ${totalPrice.toLocaleString('vi-VN')} VNÄ

Háº¡n cháº¿ Äƒn uá»‘ng: ${restrictionsText}

YÃªu cáº§u Ä‘áº·c biá»‡t:
${data.requests || 'KhÃ´ng cÃ³'}

Báº¡n cÃ³ muá»‘n gá»­i Ä‘Äƒng kÃ½ nÃ y khÃ´ng?
    `;

    if (!confirm(summary)) {
      return; // User há»§y
    }

    // Submit thÃ nh cÃ´ng
    const finalData = {
      ...data,
      totalPrice,
      ticketPrice,
      submittedAt: new Date().toISOString(),
    };

    console.log('âœ… ÄÄƒng kÃ½ sá»± kiá»‡n thÃ nh cÃ´ng:', finalData);

    alert('ÄÄƒng kÃ½ thÃ nh cÃ´ng! ChÃºng tÃ´i Ä‘Ã£ nháº­n Ä‘Æ°á»£c thÃ´ng tin cá»§a báº¡n.');

    event.target.reset();
  };

  return (
    <form
      onSubmit={handleSubmit}
      style={{ maxWidth: '540px', margin: '0 auto' }}
    >
      <h2>ÄÄƒng kÃ½ tham dá»± sá»± kiá»‡n</h2>

      {/* Event Type */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='eventType'>Loáº¡i sá»± kiá»‡n: *</label>
        <select
          id='eventType'
          name='eventType'
          required
          style={{ width: '100%', padding: '8px' }}
        >
          <option
            value=''
            disabled
            selected
          >
            -- Chá»n loáº¡i sá»± kiá»‡n --
          </option>
          <option value='workshop'>Workshop</option>
          <option value='conference'>Conference</option>
          <option value='meetup'>Meetup</option>
        </select>
      </div>

      {/* Attendee Name */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='attendeeName'>Há» vÃ  tÃªn: *</label>
        <input
          type='text'
          id='attendeeName'
          name='attendeeName'
          required
          minLength={3}
          placeholder='VÃ­ dá»¥: Nguyá»…n VÄƒn A'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Email */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='email'>Email: *</label>
        <input
          type='email'
          id='email'
          name='email'
          required
          placeholder='example@email.com'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Number of Tickets */}
      <div style={{ marginBottom: '20px' }}>
        <label htmlFor='tickets'>Sá»‘ lÆ°á»£ng vÃ© (1-10): *</label>
        <input
          type='number'
          id='tickets'
          name='tickets'
          min='1'
          max='10'
          defaultValue='1'
          required
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      {/* Dietary Restrictions */}
      <fieldset style={{ marginBottom: '20px' }}>
        <legend>Háº¡n cháº¿ vá» Äƒn uá»‘ng:</legend>
        <label style={{ display: 'block', margin: '6px 0' }}>
          <input
            type='checkbox'
            name='restrictions'
            value='vegetarian'
          />
          Chay (Vegetarian)
        </label>
        <label style={{ display: 'block', margin: '6px 0' }}>
          <input
            type='checkbox'
            name='restrictions'
            value='vegan'
          />
          Thuáº§n chay (Vegan)
        </label>
        <label style={{ display: 'block', margin: '6px 0' }}>
          <input
            type='checkbox'
            name='restrictions'
            value='glutenfree'
          />
          KhÃ´ng gluten (Gluten-free)
        </label>
        <label style={{ display: 'block', margin: '6px 0' }}>
          <input
            type='checkbox'
            name='restrictions'
            value='none'
          />
          KhÃ´ng cÃ³ háº¡n cháº¿ nÃ o
        </label>
      </fieldset>

      {/* Special Requests */}
      <div style={{ marginBottom: '24px' }}>
        <label htmlFor='requests'>YÃªu cáº§u Ä‘áº·c biá»‡t (tÃ¹y chá»n):</label>
        <textarea
          id='requests'
          name='requests'
          rows={4}
          maxLength={300}
          placeholder='VÃ­ dá»¥: cáº§n chá»— ngá»“i gáº§n sÃ¢n kháº¥u, dá»‹ á»©ng háº£i sáº£n...'
          style={{ width: '100%', padding: '8px' }}
        />
      </div>

      <button
        type='submit'
        style={{
          backgroundColor: '#28a745',
          color: 'white',
          padding: '12px 28px',
          border: 'none',
          borderRadius: '6px',
          fontSize: '16px',
          cursor: 'pointer',
        }}
      >
        ÄÄƒng kÃ½ ngay
      </button>
    </form>
  );
}

/* VÃ­ dá»¥ káº¿t quáº£ console khi submit thÃ nh cÃ´ng:
âœ… ÄÄƒng kÃ½ sá»± kiá»‡n thÃ nh cÃ´ng: {
  eventType: "conference",
  attendeeName: "Tráº§n Thá»‹ BÃ­ch",
  email: "bich.tran@example.com",
  tickets: 2,
  restrictions: ["vegetarian", "glutenfree"],
  requests: "Cáº§n chá»— ngá»“i gáº§n loa, khÃ´ng uá»‘ng cÃ  phÃª",
  totalPrice: 2400000,
  ticketPrice: 1200000,
  submittedAt: "2026-01-21T08:15:32.123Z"
}
*/
```

</details>

---

### NÃ¢ng cao (60 phÃºt): Job Application Form

Build form á»©ng tuyá»ƒn cÃ´ng viá»‡c:

- Personal info (name, email, phone)
- Position applying (dropdown)
- Experience level (radio: Junior/Mid/Senior)
- Resume upload (PDF only, max 2MB)
- Cover letter (textarea, 50-500 words)
- References (checkbox: "I have 2+ references")
- Portfolio URL (optional, must be valid URL if provided)

Advanced requirements:

- Word count for cover letter
- URL validation for portfolio
- Conditional field: If Senior â†’ "Years of experience" (number input)
- Multi-step: Step 1 (Personal), Step 2 (Application), Step 3 (Review & Submit)
- Accessibility: Full ARIA support
- Error handling: Inline + summary

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Job Application Form - Production-ready, uncontrolled, multi-step
 * Vá»›i conditional fields, validation Ä‘áº§y Ä‘á»§, accessibility ARIA,
 * error inline + summary, file validation, word count display
 */
function JobApplicationForm() {
  // Track submission state (non-React)
  let isSubmitting = false;

  // Ticket prices or other constants if needed - not here

  // Show specific step
  const showStep = (stepNumber) => {
    document.querySelectorAll('.form-step').forEach((step) => {
      step.style.display = 'none';
    });
    const target = document.getElementById(`step-${stepNumber}`);
    if (target) target.style.display = 'block';

    const indicator = document.getElementById('step-indicator');
    if (indicator) indicator.textContent = `BÆ°á»›c ${stepNumber}/3`;
  };

  // Show/hide conditional field based on experience level
  const handleExperienceChange = (event) => {
    const yearsSection = document.getElementById('years-experience-section');
    if (yearsSection) {
      yearsSection.style.display =
        event.target.value === 'senior' ? 'block' : 'none';
      if (event.target.value !== 'senior') {
        const input = document.getElementById('yearsExperience');
        if (input) input.value = '';
      }
    }
  };

  // Update word count for cover letter
  const handleCoverLetterInput = (event) => {
    const text = event.target.value.trim();
    const words = text ? text.split(/\s+/).length : 0;
    const countEl = document.getElementById('cover-letter-word-count');
    if (countEl) {
      countEl.textContent = `Sá»‘ tá»«: ${words} (50-500 tá»«)`;
      countEl.style.color = words < 50 || words > 500 ? '#dc3545' : '#198754';
    }
  };

  // Validate file resume
  const handleResumeChange = (event) => {
    const file = event.target.files[0];
    const errorEl = document.getElementById('resume-error');

    if (errorEl) errorEl.style.display = 'none';

    if (!file) return;

    const maxSize = 2 * 1024 * 1024; // 2MB
    if (file.size > maxSize) {
      showFieldError(
        'resume',
        `File quÃ¡ lá»›n (tá»‘i Ä‘a 2MB). KÃ­ch thÆ°á»›c: ${(file.size / 1024 / 1024).toFixed(2)}MB`,
      );
      event.target.value = '';
      return;
    }

    if (file.type !== 'application/pdf') {
      showFieldError('resume', 'Chá»‰ cháº¥p nháº­n file PDF');
      event.target.value = '';
      return;
    }
  };

  // Validate step 1: Personal info
  const validateStep1 = () => {
    const name = document.getElementById('name')?.value.trim() || '';
    const email = document.getElementById('email')?.value.trim() || '';
    const phone = document.getElementById('phone')?.value.trim() || '';

    const errors = [];
    if (name.length < 3) errors.push('Há» tÃªn pháº£i Ã­t nháº¥t 3 kÃ½ tá»±');
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email))
      errors.push('Email khÃ´ng há»£p lá»‡');
    if (phone && !/^[0-9]{10,11}$/.test(phone))
      errors.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i 10-11 chá»¯ sá»‘');

    return errors;
  };

  // Validate step 2: Application info
  const validateStep2 = () => {
    const position = document.getElementById('position')?.value || '';
    const experience =
      document.querySelector('input[name="experience"]:checked')?.value || '';
    const years = document.getElementById('yearsExperience')?.value || '';
    const portfolio = document.getElementById('portfolio')?.value.trim() || '';

    const errors = [];
    if (!position) errors.push('Vui lÃ²ng chá»n vá»‹ trÃ­ á»©ng tuyá»ƒn');
    if (!experience) errors.push('Vui lÃ²ng chá»n má»©c Ä‘á»™ kinh nghiá»‡m');
    if (experience === 'senior' && (isNaN(years) || years < 5 || years > 50)) {
      errors.push('Sá»‘ nÄƒm kinh nghiá»‡m pháº£i tá»« 5 Ä‘áº¿n 50');
    }
    if (portfolio && !/^https?:\/\/[^\s$.?#].[^\s]*$/.test(portfolio)) {
      errors.push('Portfolio URL khÃ´ng há»£p lá»‡ (pháº£i báº¯t Ä‘áº§u báº±ng http/https)');
    }

    return errors;
  };

  // Next handlers with validation
  const handleNext1 = () => {
    clearErrors();
    const errors = validateStep1();
    if (errors.length > 0) {
      showErrorSummary(errors);
      return;
    }
    showStep(2);
  };

  const handleNext2 = () => {
    clearErrors();
    const errors = validateStep2();
    if (errors.length > 0) {
      showErrorSummary(errors);
      return;
    }
    // Generate review summary in step 3
    generateReviewSummary();
    showStep(3);
  };

  // Back handlers
  const handleBack2 = () => showStep(1);
  const handleBack3 = () => showStep(2);

  // Generate summary for step 3
  const generateReviewSummary = () => {
    const form = document.querySelector('form');
    if (!form) return;

    const formData = new FormData(form);

    const data = {
      name: formData.get('name')?.trim(),
      email: formData.get('email')?.trim(),
      phone: formData.get('phone')?.trim(),
      position: formData.get('position'),
      experience: formData.get('experience'),
      yearsExperience: formData.get('yearsExperience'),
      portfolio: formData.get('portfolio')?.trim(),
      coverLetter: formData.get('coverLetter')?.trim(),
      references: !!formData.get('references'),
      resume: document.getElementById('resume')?.files[0],
    };

    const positionMap = {
      developer: 'Developer',
      designer: 'Designer',
      manager: 'Manager',
    };

    const experienceMap = {
      junior: 'Junior',
      mid: 'Mid-level',
      senior: 'Senior',
    };

    const summaryEl = document.getElementById('review-summary');
    if (summaryEl) {
      summaryEl.innerHTML = `
        <h4>ThÃ´ng tin cÃ¡ nhÃ¢n</h4>
        <p>Há» tÃªn: ${sanitizeInput(data.name || 'N/A')}</p>
        <p>Email: ${sanitizeInput(data.email || 'N/A')}</p>
        <p>Sá»‘ Ä‘iá»‡n thoáº¡i: ${sanitizeInput(data.phone || 'N/A')}</p>

        <h4>ThÃ´ng tin á»©ng tuyá»ƒn</h4>
        <p>Vá»‹ trÃ­: ${positionMap[data.position] || 'N/A'}</p>
        <p>Má»©c Ä‘á»™ kinh nghiá»‡m: ${experienceMap[data.experience] || 'N/A'}</p>
        ${data.experience === 'senior' ? `<p>Sá»‘ nÄƒm kinh nghiá»‡m: ${data.yearsExperience || 'N/A'}</p>` : ''}
        <p>Portfolio URL: ${sanitizeInput(data.portfolio || 'KhÃ´ng cÃ³')}</p>

        <h4>TÃ i liá»‡u</h4>
        <p>Resume: ${data.resume ? sanitizeInput(data.resume.name) : 'ChÆ°a upload'}</p>
        <p>ThÆ° xin viá»‡c: ${data.coverLetter ? `${data.coverLetter.substring(0, 100)}... (${data.coverLetter.split(/\s+/).length} tá»«)` : 'KhÃ´ng cÃ³'}</p>
        <p>Tham chiáº¿u: ${data.references ? 'CÃ³ (2+ references)' : 'KhÃ´ng'}</p>
      `;
    }
  };

  // Full validation for submit
  const validateAll = (formData, resumeInput) => {
    const errors = [...validateStep1(), ...validateStep2()];

    const data = {
      coverLetter: formData.get('coverLetter')?.trim() || '',
      references: !!formData.get('references'),
      resume: resumeInput.files[0],
    };

    const wordCount = data.coverLetter.split(/\s+/).filter((w) => w).length;
    if (wordCount < 50 || wordCount > 500) {
      errors.push(`ThÆ° xin viá»‡c pháº£i tá»« 50-500 tá»« (hiá»‡n táº¡i: ${wordCount})`);
    }

    if (data.resume) {
      if (data.resume.type !== 'application/pdf')
        errors.push('Resume pháº£i lÃ  file PDF');
      if (data.resume.size > 2 * 1024 * 1024) errors.push('Resume tá»‘i Ä‘a 2MB');
    } else {
      errors.push('Vui lÃ²ng upload resume');
    }

    // Show inline errors where possible
    if (errors.find((e) => e.includes('ThÆ° xin viá»‡c')))
      showFieldError('coverLetter', 'ThÆ° xin viá»‡c pháº£i 50-500 tá»«');
    if (errors.find((e) => e.includes('Resume')))
      showFieldError('resume', 'Resume pháº£i PDF, <2MB');

    return {
      valid: errors.length === 0,
      errors,
      data: { ...data /* add others if needed */ },
    };
  };

  // Submit handler
  const handleSubmit = async (event) => {
    event.preventDefault();
    if (isSubmitting) return;

    clearErrors();

    const form = event.target;
    const formData = new FormData(form);
    const resumeInput = document.getElementById('resume');

    const { valid, errors } = validateAll(formData, resumeInput);

    if (!valid) {
      showErrorSummary(errors);
      const firstInvalid = document.querySelector('[aria-invalid="true"]');
      if (firstInvalid) firstInvalid.focus();
      return;
    }

    isSubmitting = true;
    const submitBtn = form.querySelector('button[type="submit"]');
    const origText = submitBtn.textContent;
    submitBtn.textContent = 'Äang gá»­i...';
    submitBtn.disabled = true;

    try {
      // Simulate API
      await new Promise((r) => setTimeout(r, 1500));

      console.log('âœ… á»¨ng tuyá»ƒn thÃ nh cÃ´ng:', Object.fromEntries(formData));

      alert('ÄÄƒng kÃ½ á»©ng tuyá»ƒn thÃ nh cÃ´ng!');
      form.reset();
      showStep(1);
    } catch (e) {
      alert('Lá»—i: ' + e.message);
    } finally {
      isSubmitting = false;
      submitBtn.textContent = origText;
      submitBtn.disabled = false;
    }
  };

  // Helper functions from previous (sanitizeInput, showFieldError, clearErrors, showErrorSummary)

  /**
   * Sanitize to prevent XSS
   */
  function sanitizeInput(str) {
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }

  // Show field error (similar to prev)
  const showFieldError = (fieldId, message) => {
    const errorId = `${fieldId}-error`;
    let errorEl = document.getElementById(errorId);
    if (!errorEl) {
      errorEl = document.createElement('span');
      errorEl.id = errorId;
      errorEl.className = 'error-message';
      errorEl.setAttribute('role', 'alert');
      const field = document.getElementById(fieldId);
      if (field) field.parentNode.appendChild(errorEl);
    }
    errorEl.textContent = message;
    errorEl.style.display = 'block';

    const field = document.getElementById(fieldId);
    if (field) field.setAttribute('aria-invalid', 'true');
  };

  // Clear errors (similar)
  const clearErrors = () => {
    document
      .querySelectorAll('.error-message')
      .forEach((el) => (el.style.display = 'none'));
    document
      .querySelectorAll('[aria-invalid="true"]')
      .forEach((el) => el.removeAttribute('aria-invalid'));
    const summary = document.getElementById('error-summary');
    if (summary) summary.style.display = 'none';
  };

  // Show summary (similar)
  const showErrorSummary = (errors) => {
    let summary = document.getElementById('error-summary');
    if (!summary) {
      summary = document.createElement('div');
      summary.id = 'error-summary';
      summary.setAttribute('role', 'alert');
      const form = document.querySelector('form');
      form.insertBefore(summary, form.firstChild);
    }
    summary.innerHTML =
      '<h3>Lá»—i:</h3><ul>' +
      errors.map((e) => `<li>${e}</li>`).join('') +
      '</ul>';
    summary.style.display = 'block';
    summary.focus();
  };

  // Initial setup
  setTimeout(() => showStep(1), 0);

  return (
    <form onSubmit={handleSubmit}>
      <div
        id='step-indicator'
        style={{ fontWeight: 'bold' }}
      >
        BÆ°á»›c 1/3
      </div>
      <div
        id='error-summary'
        style={{ display: 'none', color: 'red' }}
      ></div>

      {/* Step 1: Personal */}
      <div
        id='step-1'
        className='form-step'
      >
        <h3>ThÃ´ng tin cÃ¡ nhÃ¢n</h3>
        <label htmlFor='name'>Há» tÃªn *</label>
        <input
          id='name'
          name='name'
          aria-required='true'
        />

        <label htmlFor='email'>Email *</label>
        <input
          id='email'
          name='email'
          type='email'
          aria-required='true'
        />

        <label htmlFor='phone'>Sá»‘ Ä‘iá»‡n thoáº¡i</label>
        <input
          id='phone'
          name='phone'
          type='tel'
        />

        <button
          type='button'
          onClick={handleNext1}
        >
          Tiáº¿p theo
        </button>
      </div>

      {/* Step 2: Application */}
      <div
        id='step-2'
        className='form-step'
        style={{ display: 'none' }}
      >
        <h3>ThÃ´ng tin á»©ng tuyá»ƒn</h3>

        <label htmlFor='position'>Vá»‹ trÃ­ á»©ng tuyá»ƒn *</label>
        <select
          id='position'
          name='position'
          aria-required='true'
        >
          <option value=''>Chá»n vá»‹ trÃ­</option>
          <option value='developer'>Developer</option>
          <option value='designer'>Designer</option>
          <option value='manager'>Manager</option>
        </select>

        <fieldset aria-required='true'>
          <legend>Má»©c Ä‘á»™ kinh nghiá»‡m *</legend>
          <label>
            <input
              type='radio'
              name='experience'
              value='junior'
              onChange={handleExperienceChange}
            />{' '}
            Junior
          </label>
          <label>
            <input
              type='radio'
              name='experience'
              value='mid'
              onChange={handleExperienceChange}
            />{' '}
            Mid
          </label>
          <label>
            <input
              type='radio'
              name='experience'
              value='senior'
              onChange={handleExperienceChange}
            />{' '}
            Senior
          </label>
        </fieldset>

        <div
          id='years-experience-section'
          style={{ display: 'none' }}
        >
          <label htmlFor='yearsExperience'>Sá»‘ nÄƒm kinh nghiá»‡m *</label>
          <input
            id='yearsExperience'
            name='yearsExperience'
            type='number'
            min='5'
            max='50'
            aria-required='true'
          />
        </div>

        <label htmlFor='portfolio'>Portfolio URL (tÃ¹y chá»n)</label>
        <input
          id='portfolio'
          name='portfolio'
          type='url'
        />

        <button
          type='button'
          onClick={handleBack2}
        >
          Quay láº¡i
        </button>
        <button
          type='button'
          onClick={handleNext2}
        >
          Tiáº¿p theo
        </button>
      </div>

      {/* Step 3: Review & Submit */}
      <div
        id='step-3'
        className='form-step'
        style={{ display: 'none' }}
      >
        <h3>Xem láº¡i thÃ´ng tin</h3>
        <div id='review-summary'></div>

        <button
          type='button'
          onClick={handleBack3}
        >
          Quay láº¡i
        </button>
        <button type='submit'>Gá»­i á»©ng tuyá»ƒn</button>
      </div>

      {/* Global styles */}
      <style>{`
        .form-step { margin: 20px 0; }
        label { display: block; margin-top: 10px; }
        input, select, textarea { width: 100%; margin-bottom: 10px; }
        .error-message { color: red; display: none; font-size: 0.9em; }
      `}</style>
    </form>
  );
}

/* VÃ­ dá»¥ console khi submit thÃ nh cÃ´ng:
âœ… á»¨ng tuyá»ƒn thÃ nh cÃ´ng: {
  name: "Nguyá»…n VÄƒn A",
  email: "a@example.com",
  phone: "0123456789",
  position: "developer",
  experience: "senior",
  yearsExperience: "10",
  portfolio: "https://portfolio.com",
  resume: File { name: "resume.pdf", ... },
  coverLetter: "Long text here...",
  references: "on"
}
*/
```

</details>

---

## ğŸ“š TÃ€I LIá»†U THAM KHáº¢O

### Báº¯t buá»™c Ä‘á»c

1. **React Docs - Forms**
   - https://react.dev/reference/react-dom/components/form
   - Äá»c: Form elements, Controlled vs Uncontrolled

2. **MDN - FormData API**
   - https://developer.mozilla.org/en-US/docs/Web/API/FormData
   - Äá»c: get(), getAll(), has() methods

### Äá»c thÃªm

3. **Web.dev - Form Best Practices**
   - https://web.dev/sign-in-form-best-practices/
   - Accessibility, UX, Security

4. **WCAG 2.1 - Forms**
   - https://www.w3.org/WAI/tutorials/forms/
   - Accessibility guidelines

---

## ğŸ”— Káº¾T Ná»I KIáº¾N THá»¨C

### Kiáº¿n thá»©c ná»n (ÄÃ£ há»c)

- **NgÃ y 1-2**: ES6+ (destructuring, spread operator)
- **NgÃ y 3**: JSX syntax
- **NgÃ y 4**: Props & Components
- **NgÃ y 5**: Event handling, Conditional rendering
- **NgÃ y 6**: Lists & Keys
- **NgÃ y 7**: Component composition

### HÆ°á»›ng tá»›i (Sáº½ há»c)

- **NgÃ y 11**: useState - Controlled Components
- **NgÃ y 12**: useReducer - Complex form state
- **NgÃ y 36-38**: Advanced Form Management (React Hook Form, Formik)
- **NgÃ y 42**: Form Testing
- **NgÃ y 44**: Accessibility Testing

---

## ğŸ’¡ SENIOR INSIGHTS

### CÃ¢n Nháº¯c Production

**1. Form Validation Strategies:**

```jsx
// âŒ Amateur: Validate chá»‰ khi submit
// âš ï¸ Mid: Validate onBlur
// âœ… Senior: Progressive validation
//    - onChange: Format (e.g., phone number)
//    - onBlur: Validate & show error
//    - onSubmit: Final check
```

**2. Error Handling:**

```jsx
// âŒ Amateur: alert() cho errors
// âš ï¸ Mid: Inline errors
// âœ… Senior: Inline + Summary + Focus management + Screen reader
```

**3. Performance:**

```jsx
// Uncontrolled form: ~0 re-renders (best)
// Controlled with debounce: ~10 re-renders (good)
// Controlled without debounce: ~100 re-renders (avoid!)
```

**4. Security:**

```jsx
// ALWAYS sanitize trÆ°á»›c khi:
// - Display to DOM (XSS prevention)
// - Send to server (SQL injection prevention)
// - Store to localStorage (XSS prevention)
```

---

### CÃ¢u Há»i Phá»ng Váº¥n

**Junior Level:**

1. **Q**: Sá»± khÃ¡c biá»‡t giá»¯a controlled vÃ  uncontrolled components?

   **A**: Controlled: React quáº£n lÃ½ value qua state. Uncontrolled: DOM quáº£n lÃ½ value, React Ä‘á»c khi cáº§n.

2. **Q**: `event.preventDefault()` lÃ m gÃ¬?

   **A**: NgÄƒn form submit máº·c Ä‘á»‹nh (page reload).

3. **Q**: LÃ m sao láº¥y giÃ¡ trá»‹ tá»« multiple checkboxes?

   **A**: `formData.getAll('name')` returns array.

**Mid Level:**

4. **Q**: Khi nÃ o dÃ¹ng controlled vs uncontrolled?

**A**: Controlled khi cáº§n realtime validation/formatting. Uncontrolled cho simple forms.

5. **Q**: LÃ m sao validate file upload?

   **A**: Check `file.size` (max size) vÃ  `file.type` (MIME type).

6. **Q**: Accessibility concerns cho forms?

   **A**: Labels, aria-required, aria-invalid, error announcements, keyboard navigation.

**Senior Level:**

7. **Q**: Design multi-step form architecture

**A**: Options: Hidden sections, URL-based, Wizard component. Consider: State persistence, validation per step, back button UX.

8. **Q**: Optimize form performance

   **A**: Uncontrolled for simple forms, debounce for controlled, memo for complex validation logic.

9. **Q**: Security trong form handling

   **A**: Sanitize inputs, CSRF tokens, rate limiting, file upload restrictions, HTTPS only.

---

### War Stories

**Story 1: The Million-Dollar Typo**

```
Dá»± Ã¡n: E-commerce checkout form
Váº¥n Ä‘á»: User gÃµ email sai â†’ KhÃ´ng nháº­n order confirmation
Giáº£i phÃ¡p:
- Typo detection (did you mean?)
- Email confirmation field
- Preview trÆ°á»›c submit
Lesson: UX > Validation rules
```

**Story 2: The Invisible Error**

```
Dá»± Ã¡n: Job application form
Váº¥n Ä‘á»: Screen reader users khÃ´ng nghe tháº¥y errors
Giáº£i phÃ¡p:
- role="alert" cho errors
- aria-describedby link input â†’ error
- Focus management
Lesson: Accessibility = Legal requirement
```

**Story 3: The Performance Nightmare**

```
Dá»± Ã¡n: Survey vá»›i 50+ fields
Váº¥n Ä‘á»: Controlled form re-renders 1000+ times/second
Giáº£i phÃ¡p:
- Switch to uncontrolled
- Validate onBlur instead of onChange
- Debounce expensive validations
Lesson: Choose right tool for the job
```

---

## ğŸ¯ PREVIEW NGÃ€Y MAI

**NgÃ y 10: âš¡ Mini Project 1 - Static Product Catalog**

NgÃ y mai chÃºng ta sáº½ tá»•ng há»£p TOÃ€N Bá»˜ kiáº¿n thá»©c tá»« NgÃ y 1-9:

- Component hierarchy (NgÃ y 4, 7)
- Props drilling (NgÃ y 4)
- Lists & Keys (NgÃ y 6)
- Events (NgÃ y 5)
- Forms (NgÃ y 9) â† HÃ”M NAY!
- Conditional rendering (NgÃ y 5)
- Styling (NgÃ y 8)

Project: Build má»™t product catalog vá»›i search, filter, vÃ  contact form!

**Chuáº©n bá»‹:**

- Review láº¡i concepts NgÃ y 1-9
- Äáº£m báº£o dev environment sáºµn sÃ ng
- Nghá»‰ ngÆ¡i Ä‘á»§ - ngÃ y mai intensive coding! ğŸ’ª

---

**ğŸ‰ ChÃºc má»«ng! Báº¡n Ä‘Ã£ hoÃ n thÃ nh NgÃ y 9!**

Forms lÃ  ná»n táº£ng cá»§a háº§u háº¿t web apps. Kiáº¿n thá»©c hÃ´m nay sáº½ Ä‘Æ°á»£c dÃ¹ng LIÃŠN Tá»¤C trong cÃ¡c ngÃ y sau. Practice nhiá»u Ä‘á»ƒ thÃ nh tháº¡o! ğŸš€
