# ğŸ“… NGÃ€Y 7: COMPONENT COMPOSITION - XÃ‚Y Dá»°NG UI LINH HOáº T

## ğŸ¯ Má»¥c tiÃªu há»c táº­p (5 phÃºt)

Sau bÃ i há»c hÃ´m nay, báº¡n sáº½:

- [ ] **Hiá»ƒu rÃµ** Composition vs Inheritance trong React
- [ ] **Náº¯m vá»¯ng** Children prop patterns (basic â†’ advanced)
- [ ] **ThÃ nh tháº¡o** Slot pattern (named children props)
- [ ] **Sá»­ dá»¥ng Ä‘Æ°á»£c** Compound Components pattern
- [ ] **PhÃ¢n biá»‡t** Container vs Presentational components
- [ ] **Biáº¿t khi nÃ o** dÃ¹ng pattern nÃ o cho tá»«ng use case

---

## ğŸ¤” Kiá»ƒm tra Ä‘áº§u vÃ o (5 phÃºt)

TrÆ°á»›c khi báº¯t Ä‘áº§u, hÃ£y tráº£ lá»i 3 cÃ¢u há»i nÃ y:

1. **Children prop** lÃ  gÃ¬? Cho vÃ­ dá»¥ cÃ¡ch dÃ¹ng.
2. **Props** cÃ³ thá»ƒ truyá»n nhá»¯ng gÃ¬? (string, number, function...?)
3. **Component** cÃ³ thá»ƒ return component khÃ¡c khÃ´ng?

<details>
<summary>ğŸ’¡ Xem Ä‘Ã¡p Ã¡n</summary>

1. **Children prop**:

```jsx
// Children lÃ  ná»™i dung bÃªn trong component tags
<Card>
  <h3>Title</h3> {/* â† This is children */}
  <p>Content</p>
</Card>;

function Card({ children }) {
  return <div className='card'>{children}</div>;
}
```

2. **Props cÃ³ thá»ƒ lÃ **:

```jsx
<Component
  text='string' // String
  count={42} // Number
  isActive={true} // Boolean
  items={[1, 2, 3]} // Array
  user={{ name: 'John' }} // Object
  onClick={() => {}} // Function
  icon={<Icon />} // JSX/Component
/>
```

3. **Component return component**:

```jsx
function Parent() {
  return <Child />; // âœ… ÄÆ°á»£c!
}

function Wrapper() {
  return (
    <div>
      <Header />
      <Content />
      <Footer />
    </div>
  );
}
```

</details>

---

## ğŸ“– PHáº¦N 1: GIá»šI THIá»†U KHÃI NIá»†M (30 phÃºt)

### 1.1 Váº¥n Äá» Thá»±c Táº¿

Báº¡n cáº§n xÃ¢y dá»±ng Dialog component. CÃ³ 3 loáº¡i:

```jsx
// Type 1: Alert Dialog
<AlertDialog>
  <h3>Warning!</h3>
  <p>Are you sure?</p>
  <button>OK</button>
</AlertDialog>

// Type 2: Confirm Dialog
<ConfirmDialog>
  <h3>Delete Item?</h3>
  <p>This cannot be undone</p>
  <button>Cancel</button>
  <button>Delete</button>
</ConfirmDialog>

// Type 3: Form Dialog
<FormDialog>
  <h3>Login</h3>
  <input type="text" />
  <input type="password" />
  <button>Submit</button>
</FormDialog>
```

**CÃ¡ch tiáº¿p cáº­n cÅ© (Inheritance):**

```jsx
// âŒ Inheritance approach (khÃ´ng dÃ¹ng trong React)
class Dialog {
  render() {
    /* base dialog */
  }
}

class AlertDialog extends Dialog {
  render() {
    /* alert specific */
  }
}

class ConfirmDialog extends Dialog {
  render() {
    /* confirm specific */
  }
}

// Váº¥n Ä‘á»:
// - Rigid hierarchy (cá»©ng nháº¯c)
// - Hard to share behavior across branches
// - Tight coupling
```

**CÃ¡ch React (Composition):**

```jsx
// âœ… Composition approach
function Dialog({ children, title }) {
  return (
    <div className="dialog">
      {title && <h3>{title}</h3>}
      {children}
    </div>
  );
}

// TÃ¡i sá»­ dá»¥ng linh hoáº¡t
<Dialog title="Warning">
  <p>Are you sure?</p>
  <button>OK</button>
</Dialog>

<Dialog title="Login">
  <input type="text" />
  <button>Submit</button>
</Dialog>
```

### 1.2 Composition vs Inheritance

**React Philosophy:** "Composition over Inheritance"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         INHERITANCE (OOP)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   class Animal {              â”‚      â”‚
â”‚  â”‚     eat() {}                  â”‚      â”‚
â”‚  â”‚   }                           â”‚      â”‚
â”‚  â”‚        â†‘                      â”‚      â”‚
â”‚  â”‚   class Dog extends Animal {  â”‚      â”‚
â”‚  â”‚     bark() {}                 â”‚      â”‚
â”‚  â”‚   }                           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â€¢ Tightly coupled (káº¿t dÃ­nh cháº·t)      â”‚
â”‚  â€¢ Rigid hierarchy (phÃ¢n cáº¥p cá»©ng)      â”‚
â”‚  â€¢ Hard to change (khÃ³ thay Ä‘á»•i)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                VS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         COMPOSITION (React)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   <Layout>                    â”‚      â”‚
â”‚  â”‚     <Sidebar />               â”‚      â”‚
â”‚  â”‚     <Content>                 â”‚      â”‚
â”‚  â”‚       {children}              â”‚      â”‚
â”‚  â”‚     </Content>                â”‚      â”‚
â”‚  â”‚   </Layout>                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â€¢ Loosely coupled (liÃªn káº¿t lá»ng)      â”‚
â”‚  â€¢ Flexible (linh hoáº¡t)                 â”‚
â”‚  â€¢ Easy to change (dá»… thay Ä‘á»•i)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ”‘ NguyÃªn táº¯c:**

1. **Components nhÆ° LEGO blocks** - láº¯p ghÃ©p linh hoáº¡t
2. **Behavior qua Props** - khÃ´ng pháº£i inheritance
3. **Reuse qua Composition** - khÃ´ng pháº£i class hierarchy

### 1.3 Mental Model: Containment (Chá»©a Ä‘á»±ng)

```jsx
// Component lÃ  "container" chá»©a ná»™i dung
function Box({ children, color }) {
  return (
    <div style={{ border: `2px solid ${color}`, padding: 20 }}>
      {children}  {/* Ná»™i dung linh Ä‘á»™ng */}
    </div>
  );
}

// Sá»­ dá»¥ng
<Box color="blue">
  <h3>Title</h3>
  <p>Any content!</p>
  <Button>Click</Button>
</Box>

<Box color="red">
  <Image src="..." />
  <Video src="..." />
</Box>
```

**Analogy (so sÃ¡nh):**

- Component = **CÃ¡i há»™p** (container)
- Children = **Ná»™i dung** (content)
- Props = **Cáº¥u hÃ¬nh há»™p** (box configuration)

### 1.4 Hiá»ƒu Láº§m Phá»• Biáº¿n

âŒ **Hiá»ƒu láº§m 1:** "Children chá»‰ cÃ³ thá»ƒ lÃ  JSX"

```jsx
// âŒ SAI - nghÄ© children chá»‰ lÃ  JSX
function Component({ children }) {
  return <div>{children}</div>;
}

// âœ… ÄÃšNG - children cÃ³ thá»ƒ lÃ  GÃŒ CÅ¨NG ÄÆ¯á»¢C!
<Component>Hello</Component>              // String
<Component>{123}</Component>              // Number
<Component>{true && <div>Yes</div>}</Component> // Conditional
<Component>{items.map(...)}</Component>   // Array
<Component>{() => <div>Render</div>}</Component> // Function (Render prop)
```

---

âŒ **Hiá»ƒu láº§m 2:** "Chá»‰ cÃ³ 1 children prop"

```jsx
// âŒ Limitation thinking
function Card({ children }) {
  return (
    <div className='card'>
      {children} {/* Táº¥t cáº£ Ä‘á»u vÃ o Ä‘Ã¢y? */}
    </div>
  );
}

// âœ… BETTER - Multiple "slots" (nhiá»u vá»‹ trÃ­)
function Card({ header, body, footer }) {
  return (
    <div className='card'>
      <div className='card-header'>{header}</div>
      <div className='card-body'>{body}</div>
      <div className='card-footer'>{footer}</div>
    </div>
  );
}

// Usage - rÃµ rÃ ng hÆ¡n
<Card
  header={<h3>Title</h3>}
  body={<p>Content</p>}
  footer={<Button>OK</Button>}
/>;
```

---

âŒ **Hiá»ƒu láº§m 3:** "Composition = phá»©c táº¡p"

```jsx
// âŒ Over-engineering
function SuperComplexComponent({
  renderHeader,
  renderBody,
  renderFooter,
  headerProps,
  bodyProps,
  footerProps,
  onHeaderClick,
  onBodyScroll,
  ...rest
}) {
  // Too many abstractions!
}

// âœ… KISS (Keep It Simple, Stupid)
function Card({ children }) {
  return <div className='card'>{children}</div>;
}

// ÄÆ¡n giáº£n, dá»… hiá»ƒu, dá»… maintain
```

---

## ğŸ’» PHáº¦N 2: LIVE CODING - PATTERNS CÆ  Báº¢N (45 phÃºt)

### Demo 1: Basic Children Pattern â­

```jsx
// Pattern 1: Simple Wrapper
function Container({ children }) {
  return <div className='container'>{children}</div>;
}

// Usage
<Container>
  <h1>Welcome</h1>
  <p>This is content</p>
</Container>;
```

```jsx
// Pattern 2: Wrapper vá»›i Logic
function ProtectedRoute({ children, isAuthenticated }) {
  if (!isAuthenticated) {
    return <div>Please login!</div>;
  }

  return children;
}

// Usage
<ProtectedRoute isAuthenticated={user.loggedIn}>
  <Dashboard />
</ProtectedRoute>;
```

```jsx
// Pattern 3: Wrapper vá»›i Enhancement (thÃªm tÃ­nh nÄƒng)
function ErrorBoundary({ children }) {
  // Giáº£ sá»­ cÃ³ error state (sáº½ há»c useState sau)
  const hasError = false;

  if (hasError) {
    return <div>Something went wrong!</div>;
  }

  return children;
}

// Usage - wrap báº¥t ká»³ component nÃ o
<ErrorBoundary>
  <ComplexComponent />
</ErrorBoundary>;
```

---

### Demo 2: Slot Pattern (Named Children) â­â­

```jsx
// Problem: Children khÃ´ng rÃµ rÃ ng vá»‹ trÃ­
function Modal({ children }) {
  return (
    <div className='modal'>
      {/* Header á»Ÿ Ä‘Ã¢u? Body á»Ÿ Ä‘Ã¢u? Footer á»Ÿ Ä‘Ã¢u? */}
      {children}
    </div>
  );
}

// âœ… Solution: Named slots (props)
function Modal({ title, content, actions }) {
  return (
    <div className='modal'>
      <div className='modal-header'>
        <h3>{title}</h3>
      </div>
      <div className='modal-body'>{content}</div>
      <div className='modal-footer'>{actions}</div>
    </div>
  );
}

// Usage - rÃµ rÃ ng tá»«ng pháº§n
<Modal
  title={<h3>Confirm Delete</h3>}
  content={<p>Are you sure you want to delete this item?</p>}
  actions={
    <>
      <button>Cancel</button>
      <button>Delete</button>
    </>
  }
/>;
```

**Real-world Example: Layout vá»›i Sidebar**

```jsx
function PageLayout({ sidebar, main, footer }) {
  return (
    <div className='page-layout'>
      <aside className='sidebar'>{sidebar}</aside>
      <main className='main-content'>{main}</main>
      {footer && <footer className='footer'>{footer}</footer>}
    </div>
  );
}

// Usage
<PageLayout
  sidebar={
    <nav>
      <a href='/'>Home</a>
      <a href='/about'>About</a>
    </nav>
  }
  main={
    <article>
      <h1>Welcome</h1>
      <p>Main content here...</p>
    </article>
  }
  footer={<p>&copy; 2025 Company</p>}
/>;
```

---

### Demo 3: Compound Components â­â­â­

**Pattern máº¡nh nháº¥t cho complex UIs!**

```jsx
// Compound Components - cÃ¡c components "biáº¿t" vá» nhau
function Tabs({ children }) {
  // Giáº£ sá»­ activeTab state (sáº½ dÃ¹ng useState sau)
  let activeTab = 'tab1';

  return <div className='tabs'>{children}</div>;
}

// Sub-components
Tabs.List = function TabsList({ children }) {
  return <div className='tabs-list'>{children}</div>;
};

Tabs.Tab = function Tab({ id, children }) {
  const isActive = id === 'tab1'; // Simplified

  return (
    <button
      className={`tab ${isActive ? 'active' : ''}`}
      onClick={() => console.log('Switch to', id)}
    >
      {children}
    </button>
  );
};

Tabs.Panel = function TabPanel({ id, children }) {
  const isActive = id === 'tab1'; // Simplified

  if (!isActive) return null;

  return <div className='tab-panel'>{children}</div>;
};

// Usage - API rÃµ rÃ ng, linh hoáº¡t
function App() {
  return (
    <Tabs>
      <Tabs.List>
        <Tabs.Tab id='tab1'>Profile</Tabs.Tab>
        <Tabs.Tab id='tab2'>Settings</Tabs.Tab>
        <Tabs.Tab id='tab3'>Notifications</Tabs.Tab>
      </Tabs.List>

      <Tabs.Panel id='tab1'>
        <h3>Profile Content</h3>
        <p>Your profile information...</p>
      </Tabs.Panel>

      <Tabs.Panel id='tab2'>
        <h3>Settings Content</h3>
        <p>Your settings...</p>
      </Tabs.Panel>

      <Tabs.Panel id='tab3'>
        <h3>Notifications Content</h3>
        <p>Your notifications...</p>
      </Tabs.Panel>
    </Tabs>
  );
}
```

**ğŸ”¥ Lá»£i Ã­ch Compound Components:**

- âœ… Flexible API - ngÆ°á»i dÃ¹ng control structure
- âœ… Clear intent - rÃµ rÃ ng tá»«ng pháº§n lÃ m gÃ¬
- âœ… Shared state - components "communicate" vá»›i nhau
- âœ… Customizable - dá»… customize tá»«ng pháº§n

---

### Demo 4: Render Props Pattern â­â­â­

**Legacy pattern nhÆ°ng quan trá»ng Ä‘á»ƒ hiá»ƒu**

```jsx
// Pattern: Component nháº­n function as child
function MouseTracker({ children }) {
  // Giáº£ sá»­ cÃ³ mouse position (sáº½ dÃ¹ng state + events)
  const mouseX = 100;
  const mouseY = 50;

  return children({ x: mouseX, y: mouseY });
}

// Usage - function as children
<MouseTracker>
  {({ x, y }) => (
    <div>
      <h3>Mouse Position</h3>
      <p>
        X: {x}, Y: {y}
      </p>
    </div>
  )}
</MouseTracker>;

// Hoáº·c dÃ¹ng prop 'render'
function MouseTracker({ render }) {
  const mouseX = 100;
  const mouseY = 50;

  return render({ x: mouseX, y: mouseY });
}

<MouseTracker
  render={({ x, y }) => (
    <p>
      Position: {x}, {y}
    </p>
  )}
/>;
```

**ğŸ¯ Khi nÃ o dÃ¹ng Render Props:**

- âš ï¸ **Legacy code** - code cÅ© cÃ²n dÃ¹ng
- âš ï¸ **Library APIs** - má»™t sá»‘ libraries dÃ¹ng pattern nÃ y
- âœ… **Modern alternative:** Custom Hooks (sáº½ há»c NgÃ y 24)

---

## ğŸ’» PHáº¦N 2B: LIVE CODING - PATTERNS NÃ‚NG CAO (45 phÃºt)

### Demo 5: Container vs Presentational â­â­â­

**Separation of Concerns (TÃ¡ch biá»‡t logic & UI)**

```jsx
// âŒ BAD: Logic + UI láº«n lá»™n
function UserProfile() {
  // Logic: fetch data, handle events
  let user = null;

  const fetchUser = async () => {
    const response = await fetch('/api/user/123');
    user = await response.json();
  };

  const handleUpdate = () => {
    console.log('Update user');
  };

  // UI: render
  return (
    <div className='profile'>
      <img
        src={user?.avatar}
        alt={user?.name}
      />
      <h3>{user?.name}</h3>
      <p>{user?.email}</p>
      <button onClick={handleUpdate}>Update</button>
    </div>
  );
}
// Problem: Logic & UI coupled â†’ hard to reuse, test
```

```jsx
// âœ… GOOD: TÃ¡ch Container (logic) & Presentational (UI)

// Presentational Component - CHá»ˆ UI, nháº­n props
function UserProfileView({ user, onUpdate }) {
  return (
    <div className='profile'>
      <img
        src={user.avatar}
        alt={user.name}
      />
      <h3>{user.name}</h3>
      <p>{user.email}</p>
      <button onClick={onUpdate}>Update</button>
    </div>
  );
}

// Container Component - CHá»ˆ logic
function UserProfileContainer() {
  // Logic: data fetching, state management
  let user = {
    name: 'John Doe',
    email: 'john@example.com',
    avatar: 'https://i.pravatar.cc/150',
  };

  const handleUpdate = () => {
    console.log('Update user');
  };

  // Render presentational component
  return (
    <UserProfileView
      user={user}
      onUpdate={handleUpdate}
    />
  );
}

// Benefits:
// âœ… UserProfileView cÃ³ thá»ƒ reuse vá»›i data khÃ¡c
// âœ… Dá»… test UI riÃªng (pass mock data)
// âœ… Dá»… style (UI designer chá»‰ cáº§n sá»­a View)
```

**Pattern Summary:**

| Component Type     | Responsibility     | Example              |
| ------------------ | ------------------ | -------------------- |
| **Container**      | Logic, data, state | UserProfileContainer |
| **Presentational** | UI, styling        | UserProfileView      |

---

### Demo 6: Higher-Order Components (HOC) â­â­

**Pattern: Function nháº­n Component, return Enhanced Component**

```jsx
// HOC: withLoading - thÃªm loading state vÃ o component
function withLoading(Component) {
  return function WithLoadingComponent({ isLoading, ...props }) {
    if (isLoading) {
      return <div className="loading">Loading...</div>;
    }

    return <Component {...props} />;
  };
}

// Original component
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}

// Enhanced component
const UserListWithLoading = withLoading(UserList);

// Usage
<UserListWithLoading
  isLoading={true}
  users={[]}
/>
// Shows "Loading..."

<UserListWithLoading
  isLoading={false}
  users={[{ id: 1, name: 'John' }]}
/>
// Shows user list
```

**âš ï¸ HOC lÃ  Legacy Pattern:**

- Used heavily pre-Hooks (trÆ°á»›c React 16.8)
- Modern alternative: **Custom Hooks** (sáº½ há»c sau)
- Váº«n tháº¥y trong legacy code & má»™t sá»‘ libraries

---

### Demo 7: Specialization Pattern â­â­

**Táº¡o specialized version tá»« generic component**

```jsx
// Generic Button
function Button({ children, variant = 'default', size = 'medium', ...props }) {
  const className = `btn btn-${variant} btn-${size}`;

  return (
    <button className={className} {...props}>
      {children}
    </button>
  );
}

// Specialized Buttons - pre-configured
function PrimaryButton(props) {
  return <Button variant="primary" {...props} />;
}

function DangerButton(props) {
  return <Button variant="danger" {...props} />;
}

function LargeButton(props) {
  return <Button size="large" {...props} />;
}

// Usage - cleaner, semantic
<PrimaryButton onClick={handleSave}>Save</PrimaryButton>
<DangerButton onClick={handleDelete}>Delete</DangerButton>
<LargeButton>Big Action</LargeButton>

// Thay vÃ¬
<Button variant="primary" onClick={handleSave}>Save</Button>
<Button variant="danger" onClick={handleDelete}>Delete</Button>
<Button size="large">Big Action</Button>
```

---

### Demo 8: React.Children API & cloneElement â­â­â­

**Pattern: Manipulate children elements ( Thao tÃ¡c vá»›i cÃ¡c pháº§n tá»­ children )**

```jsx
// React.Children API - cÃ¡c utility Ä‘á»ƒ lÃ m viá»‡c vá»›i prop children
import React from 'react';

// 1. React.Children.map - Duyá»‡t qua children (an toÃ n hÆ¡n children.map)
function List({ children }) {
  // âŒ KHÃ”NG AN TOÃ€N: children.map() - lá»—i náº¿u children chá»‰ lÃ  1 pháº§n tá»­
  // children.map(child => ...) // Error náº¿u chá»‰ cÃ³ 1 child!

  // âœ… AN TOÃ€N: React.Children.map - luÃ´n hoáº¡t Ä‘á»™ng
  return (
    <ul>
      {React.Children.map(children, (child, index) => (
        <li key={index}>{child}</li>
      ))}
    </ul>
  );
}

// CÃ¡ch sá»­ dá»¥ng
<List>
  <span>Item 1</span>
  <span>Item 2</span>
</List>;
```

```jsx
// 2. React.Children.count - Äáº¿m sá»‘ children
function ParentInfo({ children }) {
  const count = React.Children.count(children);

  return (
    <div>
      <p>This component has {count} children</p>
      {children}
    </div>
  );
}

// Usage
<ParentInfo>
  <div>Child 1</div>
  <div>Child 2</div>
  <div>Child 3</div>
</ParentInfo>;
// Output: "This component has 3 children"
```

```jsx
// 3. React.cloneElement - Clone element vÃ  thÃªm/ghi Ä‘Ã¨ props
function Button({ children, ...props }) {
  // Clone children vÃ  inject thÃªm props
  const enhancedChildren = React.Children.map(children, (child) => {
    // Kiá»ƒm tra child cÃ³ pháº£i lÃ  React element há»£p lá»‡ khÃ´ng
    if (React.isValidElement(child)) {
      // Clone vÃ  thÃªm className
      return React.cloneElement(child, {
        className: 'button-icon',
        ...child.props, // Giá»¯ láº¡i props gá»‘c
      });
    }
    return child;
  });

  return <button {...props}>{enhancedChildren}</button>;
}

// CÃ¡ch sá»­ dá»¥ng
<Button>
  <span>Click</span> {/* Sáº½ nháº­n className="button-icon" */}
</Button>;
```

**ğŸ”¥ Pattern thá»±c táº¿: Compound Components vá»›i Shared State**

```jsx
// Component Tabs - chia sáº» state activeTab xuá»‘ng cÃ¡c children
function Tabs({ children }) {
  let activeTab = 'tab1'; // State mÃ´ phá»ng

  // Inject activeTab vÃ o children thÃ´ng qua cloneElement
  const enhancedChildren = React.Children.map(children, (child) => {
    if (React.isValidElement(child)) {
      // Clone child vÃ  truyá»n prop activeTab
      return React.cloneElement(child, { activeTab });
    }
    return child;
  });

  return <div className='tabs'>{enhancedChildren}</div>;
}

Tabs.Tab = function Tab({ id, children, activeTab }) {
  const isActive = activeTab === id;

  return <button className={isActive ? 'active' : ''}>{children}</button>;
};

// CÃ¡ch sá»­ dá»¥ng - cÃ¡c Tab tá»± Ä‘á»™ng nháº­n activeTab!
<Tabs>
  <Tabs.Tab id='tab1'>Profile</Tabs.Tab>
  <Tabs.Tab id='tab2'>Settings</Tabs.Tab>
</Tabs>;
```

**ğŸ“š TÃ³m táº¯t React.Children API:**

| Method                                 | Má»¥c Ä‘Ã­ch                     | VÃ­ dá»¥                     |
| -------------------------------------- | ---------------------------- | ------------------------- |
| `React.Children.map(children, fn)`     | Duyá»‡t qua children (an toÃ n) | Biáº¿n Ä‘á»•i / bá»c children   |
| `React.Children.forEach(children, fn)` | Láº·p qua children             | Chá»‰ dÃ¹ng cho side effects |
| `React.Children.count(children)`       | Äáº¿m sá»‘ children              | Logic Ä‘iá»u kiá»‡n           |
| `React.Children.only(children)`        | Äáº£m báº£o chá»‰ cÃ³ 1 child       | Component wrapper         |
| `React.Children.toArray(children)`     | Chuyá»ƒn thÃ nh array           | Xá»­ lÃ½ nÃ¢ng cao            |

**âš ï¸ Khi nÃ o nÃªn dÃ¹ng:**

- âœ… Compound Components â€“ inject shared state
- âœ… Layout components â€“ bá»c / tÄƒng cÆ°á»ng children
- âœ… HOC patterns â€“ thÃªm props cho children
- âŒ Wrapper Ä‘Æ¡n giáº£n â€“ chá»‰ cáº§n `{children}`
- âŒ Over-engineering â€“ nguyÃªn táº¯c KISS!

**ğŸ¯ VÃ­ dá»¥ Dropdown (HoÃ n chá»‰nh):**

```jsx
function Dropdown({ children }) {
  let isOpen = false;

  const toggle = () => {
    isOpen = !isOpen;
    console.log('isOpen:', isOpen);
  };

  return (
    <div className='dropdown'>
      {React.Children.map(children, (child) => {
        // Inject props dá»±a trÃªn loáº¡i component con
        if (child.type === Dropdown.Trigger) {
          return React.cloneElement(child, { onToggle: toggle });
        }
        if (child.type === Dropdown.Menu) {
          return React.cloneElement(child, { isOpen });
        }
        return child;
      })}
    </div>
  );
}

Dropdown.Trigger = function DropdownTrigger({ children, onToggle }) {
  return (
    <div
      onClick={onToggle}
      style={{ cursor: 'pointer' }}
    >
      {children}
    </div>
  );
};

Dropdown.Menu = function DropdownMenu({ isOpen, children }) {
  if (!isOpen) return null;
  return <div className='dropdown-menu'>{children}</div>;
};

/*
Luá»“ng hoáº¡t Ä‘á»™ng:
1. Dropdown duyá»‡t qua children
2. Gáº·p Trigger â†’ inject onToggle
3. Gáº·p Menu â†’ inject isOpen
4. Click Trigger â†’ gá»i toggle()
5. isOpen thay Ä‘á»•i (nhÆ°ng UI khÃ´ng cáº­p nháº­t - cáº§n useState!)
*/
```

---

**ğŸ“ Ã chÃ­nh cáº§n nhá»›:**

1. `React.Children.map` an toÃ n hÆ¡n `children.map()` (xá»­ lÃ½ Ä‘Æ°á»£c trÆ°á»ng há»£p chá»‰ cÃ³ 1 child)
2. `React.cloneElement` dÃ¹ng Ä‘á»ƒ inject props vÃ o children
3. Pattern phá»• biáº¿n trong Compound Components
4. Cáº§n `useState` Ä‘á»ƒ state thá»±c sá»± hoáº¡t Ä‘á»™ng (Day 11)

---

## ğŸ”¨ PHáº¦N 3: BÃ€I Táº¬P THá»°C HÃ€NH (60 phÃºt)

### â­ Exercise 1: Card Component vá»›i Slots (15 phÃºt)

**ğŸ¯ Má»¥c tiÃªu:** Táº¡o flexible Card vá»›i named slots  
**â±ï¸ Thá»i gian:** 15 phÃºt

**Requirements:**

1. Card component nháº­n: image, title, description, actions
2. Táº¥t cáº£ slots Ä‘á»u optional
3. Náº¿u khÃ´ng cÃ³ image â†’ khÃ´ng render image section
4. Náº¿u khÃ´ng cÃ³ actions â†’ khÃ´ng render footer

```jsx
/**
 * ğŸ’¡ Gá»£i Ã½:
 * - DÃ¹ng props destructuring
 * - Conditional rendering cho optional slots
 * - Semantic HTML structure
 */

// ğŸ¯ NHIá»†M Vá»¤ Cá»¦A Báº N:
function Card({ image, title, description, actions }) {
  return (
    <div className='card'>
      {/* TODO: Conditional render image */}
      {/* TODO: Render title & description */}
      {/* TODO: Conditional render actions */}
    </div>
  );
}

// Test cases
function App() {
  return (
    <div>
      {/* Full card */}
      <Card
        image={
          <img
            src='https://picsum.photos/300/200'
            alt='Product'
          />
        }
        title={<h3>Product Name</h3>}
        description={<p>Product description goes here...</p>}
        actions={
          <>
            <button>Buy Now</button>
            <button>Add to Cart</button>
          </>
        }
      />

      {/* Card without image */}
      <Card
        title={<h3>Text Only</h3>}
        description={<p>No image card</p>}
      />

      {/* Card without actions */}
      <Card
        image={
          <img
            src='https://picsum.photos/300/200'
            alt='Info'
          />
        }
        title={<h3>Info Card</h3>}
        description={<p>Read-only information</p>}
      />
    </div>
  );
}
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
function Card({ image, title, description, actions }) {
  return (
    <div className='card'>
      {image && <div className='card-image'>{image}</div>}

      <div className='card-content'>
        {title && <div className='card-title'>{title}</div>}
        {description && <div className='card-description'>{description}</div>}
      </div>

      {actions && <div className='card-actions'>{actions}</div>}
    </div>
  );
}

// Test
function App() {
  return (
    <div className='app'>
      <h2>Card Component Examples</h2>

      <div className='card-grid'>
        <Card
          image={
            <img
              src='https://picsum.photos/seed/1/300/200'
              alt='Product'
            />
          }
          title={<h3>Premium Laptop</h3>}
          description={
            <p>
              High-performance laptop for professionals. Latest specs, great
              battery life.
            </p>
          }
          actions={
            <>
              <button className='btn-primary'>Buy Now - $1299</button>
              <button className='btn-secondary'>Add to Cart</button>
            </>
          }
        />

        <Card
          title={<h3>Announcement</h3>}
          description={
            <p>We're launching new features next week. Stay tuned!</p>
          }
        />

        <Card
          image={
            <img
              src='https://picsum.photos/seed/2/300/200'
              alt='Article'
            />
          }
          title={<h3>How to Learn React</h3>}
          description={<p>A comprehensive guide to mastering React in 2025.</p>}
        />
      </div>
    </div>
  );
}
```

**ğŸ“š Key Learning:**

- Named slots rÃµ rÃ ng hÆ¡n single children
- Conditional rendering cho flexibility
- Semantic HTML structure

</details>

---

### â­â­ Exercise 2: Accordion Component (25 phÃºt)

**ğŸ¯ Má»¥c tiÃªu:** Táº¡o Accordion vá»›i Compound Components  
**â±ï¸ Thá»i gian:** 25 phÃºt

**Scenario:** Táº¡o FAQ accordion (click Ä‘á»ƒ expand/collapse)

**Requirements:**

1. Accordion container
2. Accordion.Item - má»—i item Ä‘á»™c láº­p
3. Accordion.Header - clickable Ä‘á»ƒ toggle
4. Accordion.Content - ná»™i dung expand/collapse
5. Click header â†’ toggle content visibility

```jsx
// ğŸ¯ NHIá»†M Vá»¤:
function Accordion({ children }) {
  return <div className='accordion'>{children}</div>;
}

Accordion.Item = function AccordionItem({ children, id }) {
  // TODO: Track if this item is open
  let isOpen = false;

  return (
    <div className={`accordion-item ${isOpen ? 'open' : ''}`}>{children}</div>
  );
};

Accordion.Header = function AccordionHeader({ children }) {
  const handleClick = () => {
    console.log('Toggle accordion');
    // TODO: Toggle isOpen
  };

  return (
    <div
      className='accordion-header'
      onClick={handleClick}
    >
      {children}
      <span className='accordion-icon'>
        {/* TODO: Show â–¼ or â–² based on isOpen */}
      </span>
    </div>
  );
};

Accordion.Content = function AccordionContent({ children }) {
  // TODO: Only show if isOpen
  return <div className='accordion-content'>{children}</div>;
};

// Test
function App() {
  return (
    <Accordion>
      <Accordion.Item id='item1'>
        <Accordion.Header>
          <h3>What is React?</h3>
        </Accordion.Header>
        <Accordion.Content>
          <p>React is a JavaScript library for building user interfaces.</p>
        </Accordion.Content>
      </Accordion.Item>

      <Accordion.Item id='item2'>
        <Accordion.Header>
          <h3>Why use React?</h3>
        </Accordion.Header>
        <Accordion.Content>
          <p>
            React makes it easy to build complex UIs with reusable components.
          </p>
        </Accordion.Content>
      </Accordion.Item>
    </Accordion>
  );
}
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
function Accordion({ children }) {
  return <div className='accordion'>{children}</div>;
}

Accordion.Item = function AccordionItem({ children, id }) {
  // Simulated state (will use useState on Day 11)
  let isOpen = false;

  const handleToggle = () => {
    isOpen = !isOpen;
    console.log(`Item ${id} is now ${isOpen ? 'open' : 'closed'}`);
  };

  return (
    <div
      className={`accordion-item ${isOpen ? 'open' : ''}`}
      data-id={id}
    >
      {/* Pass toggle function to children via context pattern */}
      {children}
    </div>
  );
};

Accordion.Header = function AccordionHeader({ children, onClick }) {
  return (
    <div
      className='accordion-header'
      onClick={onClick}
    >
      <div className='accordion-title'>{children}</div>
      <span className='accordion-icon'>â–¼</span>
    </div>
  );
};

Accordion.Content = function AccordionContent({ children, isOpen }) {
  if (!isOpen) return null;

  return <div className='accordion-content'>{children}</div>;
};

// Better implementation with shared state
function AccordionDemo() {
  // Simplified: track which item is open
  let openItem = 'item1';

  const createToggleHandler = (id) => () => {
    openItem = openItem === id ? null : id;
    console.log('Open item:', openItem);
  };

  const faqs = [
    {
      id: 'item1',
      question: 'What is React?',
      answer:
        'React is a JavaScript library for building user interfaces, maintained by Meta.',
    },
    {
      id: 'item2',
      question: 'Why use React?',
      answer:
        'React makes it easy to build complex UIs with reusable components and efficient rendering.',
    },
    {
      id: 'item3',
      question: 'What are components?',
      answer:
        'Components are independent, reusable pieces of UI that can be composed together.',
    },
  ];

  return (
    <div className='faq-container'>
      <h2>Frequently Asked Questions</h2>
      <Accordion>
        {faqs.map((faq) => {
          const isOpen = openItem === faq.id;

          return (
            <Accordion.Item
              key={faq.id}
              id={faq.id}
            >
              <Accordion.Header onClick={createToggleHandler(faq.id)}>
                <h3>{faq.question}</h3>
              </Accordion.Header>
              <Accordion.Content isOpen={isOpen}>
                <p>{faq.answer}</p>
              </Accordion.Content>
            </Accordion.Item>
          );
        })}
      </Accordion>

      <div className='note'>
        <strong>Note:</strong> State won't persist (need useState - Day 11).
        Current open: <strong>{openItem || 'None'}</strong>
      </div>
    </div>
  );
}
```

**ğŸ“š Key Concepts:**

- Compound components pattern
- Shared state between sibling components
- Flexible, declarative API
- Easy to customize individual items

</details>

---

### â­â­â­ Exercise 3: Modal System (40 phÃºt)

**ğŸ¯ Má»¥c tiÃªu:** Táº¡o flexible Modal vá»›i composition  
**â±ï¸ Thá»i gian:** 40 phÃºt

**ğŸ“‹ Product Requirements:**

User Story: "LÃ  developer, tÃ´i muá»‘n Modal component linh hoáº¡t Ä‘á»ƒ táº¡o cÃ¡c loáº¡i dialog khÃ¡c nhau mÃ  khÃ´ng cáº§n viáº¿t láº¡i code."

**âœ… Acceptance Criteria:**

- [ ] Modal vá»›i backdrop (click backdrop â†’ close)
- [ ] Modal.Header vá»›i title vÃ  close button
- [ ] Modal.Body cho content
- [ ] Modal.Footer cho actions
- [ ] Keyboard support (Esc â†’ close)
- [ ] Flexible - cÃ³ thá»ƒ skip header/footer

```jsx
// ğŸ¯ NHIá»†M Vá»¤:

// Main Modal container
function Modal({ children, isOpen, onClose }) {
  if (!isOpen) return null;

  const handleBackdropClick = (event) => {
    // TODO: Close modal if click backdrop (not content)
  };

  const handleKeyDown = (event) => {
    if (event.key === 'Escape') {
      onClose();
    }
  };

  // TODO: Add keyboard listener (simplified)

  return (
    <>
      <div
        className='modal-backdrop'
        onClick={handleBackdropClick}
      />
      <div className='modal-wrapper'>
        <div
          className='modal-content'
          onClick={(e) => e.stopPropagation()}
        >
          {children}
        </div>
      </div>
    </>
  );
}

// Sub-components
Modal.Header = function ModalHeader({ children, onClose }) {
  return (
    <div className='modal-header'>
      <div className='modal-title'>{children}</div>
      {onClose && (
        <button
          className='modal-close'
          onClick={onClose}
        >
          âœ•
        </button>
      )}
    </div>
  );
};

Modal.Body = function ModalBody({ children }) {
  return <div className='modal-body'>{children}</div>;
};

Modal.Footer = function ModalFooter({ children }) {
  return <div className='modal-footer'>{children}</div>;
};

// Test cases
function App() {
  let isOpen = true; // Will use useState later

  const handleClose = () => {
    isOpen = false;
    console.log('Modal closed');
  };

  return (
    <div className='app'>
      <button
        onClick={() => {
          isOpen = true;
        }}
      >
        Open Modal
      </button>

      {/* Example 1: Full modal */}
      <Modal
        isOpen={isOpen}
        onClose={handleClose}
      >
        <Modal.Header onClose={handleClose}>
          <h3>Confirm Action</h3>
        </Modal.Header>
        <Modal.Body>
          <p>Are you sure you want to delete this item?</p>
          <p>This action cannot be undone.</p>
        </Modal.Body>
        <Modal.Footer>
          <button onClick={handleClose}>Cancel</button>
          <button className='btn-danger'>Delete</button>
        </Modal.Footer>
      </Modal>

      {/* Example 2: Modal without footer */}
      <Modal
        isOpen={isOpen}
        onClose={handleClose}
      >
        <Modal.Header onClose={handleClose}>
          <h3>Information</h3>
        </Modal.Header>
        <Modal.Body>
          <p>This is just informational content.</p>
        </Modal.Body>
      </Modal>
    </div>
  );
}
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
function Modal({ children, isOpen, onClose }) {
  if (!isOpen) return null;

  const handleBackdropClick = () => {
    onClose();
  };

  const handleContentClick = (event) => {
    event.stopPropagation(); // Prevent close when clicking content
  };

  // Keyboard support
  const handleKeyDown = (event) => {
    if (event.key === 'Escape') {
      onClose();
    }
  };

  // Add/remove keyboard listener (simplified - in real app use useEffect)
  if (typeof window !== 'undefined') {
    window.addEventListener('keydown', handleKeyDown);
  }

  return (
    <>
      <div
        className='modal-backdrop'
        onClick={handleBackdropClick}
      />
      <div className='modal-wrapper'>
        <div
          className='modal-content'
          onClick={handleContentClick}
        >
          {children}
        </div>
      </div>
    </>
  );
}

Modal.Header = function ModalHeader({ children, onClose, showClose = true }) {
  return (
    <div className='modal-header'>
      <div className='modal-title'>{children}</div>
      {showClose && onClose && (
        <button
          className='modal-close'
          onClick={onClose}
          aria-label='Close modal'
        >
          âœ•
        </button>
      )}
    </div>
  );
};

Modal.Body = function ModalBody({ children }) {
  return <div className='modal-body'>{children}</div>;
};

Modal.Footer = function ModalFooter({ children, align = 'right' }) {
  return <div className={`modal-footer modal-footer-${align}`}>{children}</div>;
};

// Demo with different modal types
function ModalDemo() {
  let confirmModalOpen = false;
  let infoModalOpen = false;
  let formModalOpen = false;

  const handleOpenConfirm = () => {
    confirmModalOpen = true;
    console.log('Confirm modal opened');
  };

  const handleOpenInfo = () => {
    infoModalOpen = true;
    console.log('Info modal opened');
  };

  const handleOpenForm = () => {
    formModalOpen = true;
    console.log('Form modal opened');
  };

  const handleClose = (modalName) => () => {
    console.log(`Closed ${modalName} modal`);
    // Will update state with useState on Day 11
  };

  return (
    <div className='app'>
      <h2>Modal Component Demo</h2>

      <div className='button-group'>
        <button onClick={handleOpenConfirm}>Open Confirm Modal</button>
        <button onClick={handleOpenInfo}>Open Info Modal</button>
        <button onClick={handleOpenForm}>Open Form Modal</button>
      </div>

      {/* Confirm Modal */}
      <Modal
        isOpen={confirmModalOpen}
        onClose={handleClose('confirm')}
      >
        <Modal.Header onClose={handleClose('confirm')}>
          <h3>âš ï¸ Confirm Delete</h3>
        </Modal.Header>
        <Modal.Body>
          <p>Are you sure you want to delete this item?</p>
          <p className='warning-text'>This action cannot be undone!</p>
        </Modal.Body>
        <Modal.Footer>
          <button
            className='btn-secondary'
            onClick={handleClose('confirm')}
          >
            Cancel
          </button>
          <button
            className='btn-danger'
            onClick={() => {
              console.log('Item deleted');
              handleClose('confirm')();
            }}
          >
            Delete
          </button>
        </Modal.Footer>
      </Modal>

      {/* Info Modal - No footer */}
      <Modal
        isOpen={infoModalOpen}
        onClose={handleClose('info')}
      >
        <Modal.Header onClose={handleClose('info')}>
          <h3>â„¹ï¸ Information</h3>
        </Modal.Header>
        <Modal.Body>
          <p>This is an informational message.</p>
          <ul>
            <li>Point 1: Important info</li>
            <li>Point 2: More details</li>
            <li>Point 3: Additional context</li>
          </ul>
        </Modal.Body>
      </Modal>

      {/* Form Modal */}
      <Modal
        isOpen={formModalOpen}
        onClose={handleClose('form')}
      >
        <Modal.Header onClose={handleClose('form')}>
          <h3>ğŸ“ Create New Item</h3>
        </Modal.Header>
        <Modal.Body>
          <form className='modal-form'>
            <div className='form-group'>
              <label htmlFor='item-name'>Item Name</label>
              <input
                type='text'
                id='item-name'
                placeholder='Enter name...'
              />
            </div>
            <div className='form-group'>
              <label htmlFor='item-desc'>Description</label>
              <textarea
                id='item-desc'
                rows='4'
                placeholder='Enter description...'
              />
            </div>
          </form>
        </Modal.Body>
        <Modal.Footer>
          <button
            className='btn-secondary'
            onClick={handleClose('form')}
          >
            Cancel
          </button>
          <button
            className='btn-primary'
            onClick={() => {
              console.log('Form submitted');
              handleClose('form')();
            }}
          >
            Create
          </button>
        </Modal.Footer>
      </Modal>

      <div className='note'>
        <strong>Note:</strong> Modal state won't persist (need useState - Day
        11). Press <kbd>Esc</kbd> to close modal.
      </div>
    </div>
  );
}
```

**ğŸ“š Production Features:**

1. **Backdrop click** â†’ close modal
2. **Esc key** â†’ close modal
3. **Click content** â†’ khÃ´ng close (stopPropagation)
4. **Flexible composition** â†’ cÃ³ thá»ƒ skip header/footer
5. **Accessibility** â†’ aria-label, keyboard support

</details>

---

### â­â­â­â­ Exercise 4: Page Layout System (60 phÃºt)

**ğŸ¯ Má»¥c tiÃªu:** Táº¡o layout system vá»›i nested composition  
**â±ï¸ Thá»i gian:** 60 phÃºt

**ğŸ—ï¸ PHASE 1: Research & Design (20 phÃºt)**

Thiáº¿t káº¿ má»™t layout system cho app (giá»‘ng Admin Dashboard).

**Features cáº§n cÃ³:**

- Page wrapper (full height)
- Header (fixed top)
- Sidebar (collapsible)
- Main content area (scrollable)
- Footer (optional)

**ğŸ¤” DESIGN DECISIONS:**

1. **Layout Structure:**
   - Option A: Flat structure vá»›i positioning
   - Option B: Nested structure vá»›i composition
   - Decision: ?

2. **Sidebar Behavior:**
   - Always visible?
   - Collapsible?
   - Responsive (hide on mobile)?

**ADR:**

```markdown
## Decision: Layout System Architecture

### Context

Need flexible layout system for app pages.

### Decision

[Your choice]

### Rationale

1. [Reason 1]
2. [Reason 2]

### Implementation

[Approach]
```

---

**ğŸ’» PHASE 2: Implementation (30 phÃºt)**

```jsx
// ğŸ¯ NHIá»†M Vá»¤:

// Main Layout component
function AppLayout({ children }) {
  return <div className='app-layout'>{children}</div>;
}

// Sub-components
AppLayout.Header = function LayoutHeader({ children }) {
  return <header className='layout-header'>{children}</header>;
};

AppLayout.Sidebar = function LayoutSidebar({ children, isCollapsed }) {
  return (
    <aside className={`layout-sidebar ${isCollapsed ? 'collapsed' : ''}`}>
      {children}
    </aside>
  );
};

AppLayout.Main = function LayoutMain({ children }) {
  return <main className='layout-main'>{children}</main>;
};

AppLayout.Footer = function LayoutFooter({ children }) {
  return <footer className='layout-footer'>{children}</footer>;
};

// Usage
function DashboardPage() {
  let sidebarCollapsed = false;

  const handleToggleSidebar = () => {
    sidebarCollapsed = !sidebarCollapsed;
    console.log('Sidebar:', sidebarCollapsed ? 'collapsed' : 'expanded');
  };

  return (
    <AppLayout>
      <AppLayout.Header>
        <div className='header-content'>
          <button onClick={handleToggleSidebar}>â˜°</button>
          <h1>Dashboard</h1>
          <div className='header-actions'>
            <button>Profile</button>
            <button>Logout</button>
          </div>
        </div>
      </AppLayout.Header>

      <div className='layout-body'>
        <AppLayout.Sidebar isCollapsed={sidebarCollapsed}>
          {/* TODO: Navigation menu */}
        </AppLayout.Sidebar>

        <AppLayout.Main>{/* TODO: Page content */}</AppLayout.Main>
      </div>

      <AppLayout.Footer>
        <p>&copy; 2025 Company Name</p>
      </AppLayout.Footer>
    </AppLayout>
  );
}
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
// Complete Layout System
function AppLayout({ children }) {
  return <div className='app-layout'>{children}</div>;
}

AppLayout.Header = function LayoutHeader({ children }) {
  return <header className='layout-header'>{children}</header>;
};

AppLayout.Sidebar = function LayoutSidebar({ children, isCollapsed = false }) {
  return (
    <aside className={`layout-sidebar ${isCollapsed ? 'collapsed' : ''}`}>
      <div className='sidebar-content'>{children}</div>
    </aside>
  );
};

AppLayout.Main = function LayoutMain({ children }) {
  return (
    <main className='layout-main'>
      <div className='main-content'>{children}</div>
    </main>
  );
};

AppLayout.Footer = function LayoutFooter({ children }) {
  return <footer className='layout-footer'>{children}</footer>;
};

// Navigation component for sidebar
function NavMenu() {
  const menuItems = [
    { icon: 'ğŸ“Š', label: 'Dashboard', path: '/dashboard' },
    { icon: 'ğŸ‘¥', label: 'Users', path: '/users' },
    { icon: 'ğŸ“¦', label: 'Products', path: '/products' },
    { icon: 'ğŸ“ˆ', label: 'Analytics', path: '/analytics' },
    { icon: 'âš™ï¸', label: 'Settings', path: '/settings' },
  ];

  return (
    <nav className='nav-menu'>
      {menuItems.map((item) => (
        <a
          key={item.path}
          href={item.path}
          className='nav-item'
          onClick={(e) => {
            e.preventDefault();
            console.log('Navigate to:', item.path);
          }}
        >
          <span className='nav-icon'>{item.icon}</span>
          <span className='nav-label'>{item.label}</span>
        </a>
      ))}
    </nav>
  );
}

// Complete Dashboard Demo
function DashboardPage() {
  let sidebarCollapsed = false;

  const handleToggleSidebar = () => {
    sidebarCollapsed = !sidebarCollapsed;
    console.log('Sidebar:', sidebarCollapsed ? 'collapsed' : 'expanded');
  };

  return (
    <AppLayout>
      {/* Header */}
      <AppLayout.Header>
        <div className='header-content'>
          <div className='header-left'>
            <button
              className='sidebar-toggle'
              onClick={handleToggleSidebar}
              aria-label='Toggle sidebar'
            >
              â˜°
            </button>
            <h1 className='header-title'>My Dashboard</h1>
          </div>

          <div className='header-right'>
            <input
              type='search'
              placeholder='Search...'
              className='header-search'
            />
            <button className='header-btn'>ğŸ””</button>
            <button className='header-btn'>ğŸ‘¤ Profile</button>
          </div>
        </div>
      </AppLayout.Header>

      {/* Body with Sidebar + Main */}
      <div className='layout-body'>
        <AppLayout.Sidebar isCollapsed={sidebarCollapsed}>
          <div className='sidebar-header'>
            <h2>{sidebarCollapsed ? 'M' : 'Menu'}</h2>
          </div>
          <NavMenu />
        </AppLayout.Sidebar>

        <AppLayout.Main>
          <div className='page-header'>
            <h2>Welcome Back!</h2>
            <p>Here's what's happening with your projects today.</p>
          </div>

          {/* Dashboard cards */}
          <div className='dashboard-grid'>
            {[
              { title: 'Total Users', value: '1,234', trend: '+12%' },
              { title: 'Revenue', value: '$45,678', trend: '+8%' },
              { title: 'Orders', value: '567', trend: '-3%' },
              { title: 'Visitors', value: '8,901', trend: '+15%' },
            ].map((stat, index) => (
              <div
                key={index}
                className='stat-card'
              >
                <h3 className='stat-title'>{stat.title}</h3>
                <p className='stat-value'>{stat.value}</p>
                <span
                  className={`stat-trend ${
                    stat.trend.startsWith('+') ? 'positive' : 'negative'
                  }`}
                >
                  {stat.trend}
                </span>
              </div>
            ))}
          </div>

          {/* Recent activity */}
          <div className='activity-section'>
            <h3>Recent Activity</h3>
            <div className='activity-list'>
              {[
                'User John Doe registered',
                'New order #1234 received',
                'Product "Laptop" updated',
                'Payment processed successfully',
              ].map((activity, index) => (
                <div
                  key={index}
                  className='activity-item'
                >
                  <span className='activity-dot'></span>
                  <p>{activity}</p>
                  <span className='activity-time'>{index + 1}h ago</span>
                </div>
              ))}
            </div>
          </div>
        </AppLayout.Main>
      </div>

      {/* Footer */}
      <AppLayout.Footer>
        <div className='footer-content'>
          <p>&copy; 2025 My Company. All rights reserved.</p>
          <div className='footer-links'>
            <a href='/privacy'>Privacy</a>
            <a href='/terms'>Terms</a>
            <a href='/contact'>Contact</a>
          </div>
        </div>
      </AppLayout.Footer>

      <div className='note'>
        <strong>Note:</strong> Sidebar state won't persist (need useState - Day
        11).
      </div>
    </AppLayout>
  );
}
```

**ğŸ“š Architecture Benefits:**

1. **Flexible composition** - báº¥t ká»³ layout nÃ o
2. **Clear structure** - dá»… Ä‘á»c, dá»… maintain
3. **Reusable** - dÃ¹ng cho nhiá»u pages
4. **Responsive** - dá»… thÃªm responsive logic sau
5. **Semantic** - HTML tags Ä‘Ãºng nghÄ©a

</details>

---

### â­â­â­â­â­ Exercise 5: Theme Provider System (90 phÃºt)

**ğŸ¯ Má»¥c tiÃªu:** Táº¡o theme system vá»›i context-like pattern  
**â±ï¸ Thá»i gian:** 90 phÃºt

**ğŸ“‹ Feature Specification:**

Táº¡o ThemeProvider cho Dark/Light mode:

- ThemeProvider wrap toÃ n app
- Theme data truyá»n xuá»‘ng children
- Components access theme Ä‘á»ƒ styling
- Toggle button switch themes

**Requirements:**

- ThemeProvider component
- Theme object (colors, fonts, spacing)
- CÃ¡c components dÃ¹ng theme
- Toggle functionality

```jsx
// Theme definitions
const themes = {
  light: {
    colors: {
      primary: '#1976d2',
      background: '#ffffff',
      text: '#333333',
      border: '#e0e0e0',
    },
    fonts: {
      body: 'Arial, sans-serif',
      heading: 'Georgia, serif',
    },
  },
  dark: {
    colors: {
      primary: '#90caf9',
      background: '#121212',
      text: '#ffffff',
      border: '#333333',
    },
    fonts: {
      body: 'Arial, sans-serif',
      heading: 'Georgia, serif',
    },
  },
};

// ğŸ¯ NHIá»†M Vá»¤:
function ThemeProvider({ children, theme }) {
  // TODO: Provide theme to children
  // (Will use Context on Day 36)

  return <div data-theme={theme}>{children}</div>;
}

// Components that use theme
function ThemedButton({ children, ...props }) {
  // TODO: Access theme
  const theme = themes.light; // Hardcoded for now

  const style = {
    backgroundColor: theme.colors.primary,
    color: '#fff',
    border: 'none',
    padding: '10px 20px',
    borderRadius: '4px',
  };

  return (
    <button
      style={style}
      {...props}
    >
      {children}
    </button>
  );
}

function ThemedCard({ children }) {
  const theme = themes.light;

  const style = {
    backgroundColor: theme.colors.background,
    color: theme.colors.text,
    border: `1px solid ${theme.colors.border}`,
    padding: '20px',
    borderRadius: '8px',
  };

  return <div style={style}>{children}</div>;
}

// App
function App() {
  let currentTheme = 'light';

  const toggleTheme = () => {
    currentTheme = currentTheme === 'light' ? 'dark' : 'light';
    console.log('Theme:', currentTheme);
  };

  return (
    <ThemeProvider theme={currentTheme}>
      <div className='app'>
        <button onClick={toggleTheme}>
          Toggle Theme (Current: {currentTheme})
        </button>

        <ThemedCard>
          <h2>Themed Components</h2>
          <p>This card adapts to the theme.</p>
          <ThemedButton>Click Me</ThemedButton>
        </ThemedCard>
      </div>
    </ThemeProvider>
  );
}
```

<details>
<summary>ğŸ’¡ Solution (Simplified without Context)</summary>

```jsx
// Theme definitions
const themes = {
  light: {
    colors: {
      primary: '#1976d2',
      secondary: '#dc004e',
      background: '#ffffff',
      surface: '#f5f5f5',
      text: '#333333',
      textSecondary: '#666666',
      border: '#e0e0e0',
    },
    fonts: {
      body: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
      heading: 'Georgia, serif',
    },
    spacing: {
      small: '8px',
      medium: '16px',
      large: '24px',
    },
  },
  dark: {
    colors: {
      primary: '#90caf9',
      secondary: '#f48fb1',
      background: '#121212',
      surface: '#1e1e1e',
      text: '#ffffff',
      textSecondary: '#b0b0b0',
      border: '#333333',
    },
    fonts: {
      body: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
      heading: 'Georgia, serif',
    },
    spacing: {
      small: '8px',
      medium: '16px',
      large: '24px',
    },
  },
};

// Theme Provider (simplified - will use Context later)
function ThemeProvider({ children, themeName }) {
  const theme = themes[themeName] || themes.light;

  // Apply theme to root element
  const rootStyle = {
    backgroundColor: theme.colors.background,
    color: theme.colors.text,
    fontFamily: theme.fonts.body,
    minHeight: '100vh',
    transition: 'all 0.3s ease',
  };

  return (
    <div
      style={rootStyle}
      data-theme={themeName}
    >
      {/* Pass theme to children via props (simplified) */}
      {typeof children === 'function' ? children(theme) : children}
    </div>
  );
}

// Themed components
function ThemedButton({ children, variant = 'primary', theme, ...props }) {
  const style = {
    backgroundColor: theme.colors[variant],
    color: variant === 'primary' ? '#fff' : theme.colors.text,
    border: 'none',
    padding: `${theme.spacing.small} ${theme.spacing.medium}`,
    borderRadius: '4px',
    fontFamily: theme.fonts.body,
    cursor: 'pointer',
    transition: 'all 0.2s',
  };

  return (
    <button
      style={style}
      {...props}
    >
      {children}
    </button>
  );
}

function ThemedCard({ children, theme }) {
  const style = {
    backgroundColor: theme.colors.surface,
    color: theme.colors.text,
    border: `1px solid ${theme.colors.border}`,
    padding: theme.spacing.large,
    borderRadius: '8px',
    marginBottom: theme.spacing.medium,
  };

  return <div style={style}>{children}</div>;
}

function ThemedInput({ placeholder, theme, ...props }) {
  const style = {
    backgroundColor: theme.colors.background,
    color: theme.colors.text,
    border: `2px solid ${theme.colors.border}`,
    padding: theme.spacing.small,
    borderRadius: '4px',
    fontFamily: theme.fonts.body,
    width: '100%',
    fontSize: '14px',
  };

  return (
    <input
      style={style}
      placeholder={placeholder}
      {...props}
    />
  );
}

// Demo App
function ThemeDemo() {
  let currentTheme = 'light';

  const toggleTheme = () => {
    currentTheme = currentTheme === 'light' ? 'dark' : 'light';
    console.log('Switched to theme:', currentTheme);
  };

  return (
    <ThemeProvider themeName={currentTheme}>
      {(theme) => (
        <div style={{ padding: theme.spacing.large }}>
          <div
            style={{
              display: 'flex',
              justifyContent: 'space-between',
              alignItems: 'center',
              marginBottom: theme.spacing.large,
            }}
          >
            <h1
              style={{
                fontFamily: theme.fonts.heading,
                margin: 0,
              }}
            >
              Theme System Demo
            </h1>
            <ThemedButton
              theme={theme}
              onClick={toggleTheme}
            >
              ğŸŒ“ Toggle Theme (Current: {currentTheme})
            </ThemedButton>
          </div>

          <ThemedCard theme={theme}>
            <h2
              style={{
                fontFamily: theme.fonts.heading,
                marginTop: 0,
              }}
            >
              Welcome!
            </h2>
            <p style={{ color: theme.colors.textSecondary }}>
              This is a themed card component. All colors and spacing come from
              the theme system.
            </p>
            <div style={{ marginTop: theme.spacing.medium }}>
              <ThemedButton
                theme={theme}
                variant='primary'
              >
                Primary Action
              </ThemedButton>{' '}
              <ThemedButton
                theme={theme}
                variant='secondary'
              >
                Secondary Action
              </ThemedButton>
            </div>
          </ThemedCard>

          <ThemedCard theme={theme}>
            <h3 style={{ marginTop: 0 }}>Form Example</h3>
            <div style={{ marginBottom: theme.spacing.medium }}>
              <label
                style={{
                  display: 'block',
                  marginBottom: theme.spacing.small,
                }}
              >
                Username
              </label>
              <ThemedInput
                theme={theme}
                placeholder='Enter username...'
              />
            </div>
            <div style={{ marginBottom: theme.spacing.medium }}>
              <label
                style={{
                  display: 'block',
                  marginBottom: theme.spacing.small,
                }}
              >
                Email
              </label>
              <ThemedInput
                theme={theme}
                placeholder='Enter email...'
              />
            </div>
            <ThemedButton theme={theme}>Submit</ThemedButton>
          </ThemedCard>

          <div
            style={{
              padding: theme.spacing.medium,
              background: theme.colors.surface,
              borderRadius: '8px',
              border: `1px solid ${theme.colors.border}`,
            }}
          >
            <strong>Note:</strong> Theme won't persist (need useState - Day 11).
            On Day 36, we'll learn Context API to properly share theme across
            components!
          </div>
        </div>
      )}
    </ThemeProvider>
  );
}
```

**ğŸ“š Key Concepts:**

1. **Theme object** - centralized design tokens
2. **Provider pattern** - wrap app to provide theme
3. **Render props** - pass theme to children via function
4. **Inline styles** - dynamic styling based on theme
5. **Future:** Context API will make this much cleaner!

</details>

---

## ğŸ“Š PHáº¦N 4: SO SÃNH PATTERNS (30 phÃºt)

### Báº£ng So SÃ¡nh: Composition Patterns

| Pattern                 | Use Case               | Pros âœ…                                               | Cons âŒ                                           | Example                             |
| ----------------------- | ---------------------- | ----------------------------------------------------- | ------------------------------------------------- | ----------------------------------- |
| **Children Prop**       | Simple wrappers        | â€¢ Simple<br>â€¢ Flexible content                        | â€¢ No structure<br>â€¢ Hard to target specific parts | `<Card>{content}</Card>`            |
| **Named Slots**         | Structured layouts     | â€¢ Clear structure<br>â€¢ Easy to style parts            | â€¢ More props<br>â€¢ Verbose                         | `<Card header={...} body={...} />`  |
| **Compound Components** | Complex UIs            | â€¢ Flexible API<br>â€¢ Shared state<br>â€¢ Clear hierarchy | â€¢ More complex<br>â€¢ Learning curve                | `<Tabs><Tabs.Tab /></Tabs>`         |
| **Render Props**        | Logic reuse            | â€¢ Maximum flexibility<br>â€¢ Access to internals        | â€¢ Complex syntax<br>â€¢ Callback hell               | `<Mouse render={({x,y}) => ...} />` |
| **HOC**                 | Cross-cutting concerns | â€¢ Reuse logic<br>â€¢ Composition                        | â€¢ Props collision<br>â€¢ Wrapper hell               | `withAuth(Component)`               |

---

### Decision Tree: Chá»n Pattern

```
Cáº§n compose components?
â”‚
â”œâ”€ Wrapper Ä‘Æ¡n giáº£n, ná»™i dung linh Ä‘á»™ng?
â”‚   â””â”€ âœ… CHILDREN PROP
â”‚       <Container>{anything}</Container>
â”‚
â”œâ”€ Layout vá»›i nhiá»u vÃ¹ng rÃµ rÃ ng?
â”‚   â”œâ”€ 2-3 slots cá»‘ Ä‘á»‹nh?
â”‚   â”‚   â””â”€ âœ… NAMED SLOTS (Props)
â”‚   â”‚       <Modal title={...} content={...} actions={...} />
â”‚   â”‚
â”‚   â””â”€ Flexible structure, nhiá»u sub-components?
â”‚       â””â”€ âœ… COMPOUND COMPONENTS
â”‚           <Tabs><Tabs.Tab /><Tabs.Panel /></Tabs>
â”‚
â”œâ”€ Cáº§n share logic (khÃ´ng pháº£i UI)?
â”‚   â”œâ”€ Modern codebase?
â”‚   â”‚   â””â”€ âœ… CUSTOM HOOKS (Day 24)
â”‚   â”‚
â”‚   â””â”€ Legacy/Library code?
â”‚       â””â”€ âš ï¸ Render Props hoáº·c HOC
â”‚
â””â”€ TÃ¡ch logic khá»i presentation?
    â””â”€ âœ… CONTAINER/PRESENTATIONAL
        Container (logic) + View (UI)
```

---

## ğŸ§ª PHáº¦N 5: DEBUG LAB (20 phÃºt)

### Bug 1: Props Drilling Hell âŒ

```jsx
// ğŸ› CODE Bá»Š Lá»–I:
function App() {
  const user = { name: 'John', role: 'admin' };

  return <Dashboard user={user} />;
}

function Dashboard({ user }) {
  return (
    <div>
      <Header user={user} />
      <Sidebar user={user} />
      <Content user={user} />
    </div>
  );
}

function Header({ user }) {
  return <TopBar user={user} />;
}

function TopBar({ user }) {
  return <UserMenu user={user} />;
}

function UserMenu({ user }) {
  return <div>{user.name}</div>; // Finally used here!
}

// Props drill qua 4 levels chá»‰ Ä‘á»ƒ Ä‘áº¿n UserMenu!
```

**â“ CÃ¢u há»i:**

1. Váº¥n Ä‘á» gÃ¬ vá»›i code nÃ y?
2. Náº¿u thÃªm prop má»›i, pháº£i sá»­a á»Ÿ Ä‘Ã¢u?
3. Giáº£i phÃ¡p?

<details>
<summary>ğŸ’¡ Giáº£i Ä‘Ã¡p</summary>

**1. Váº¥n Ä‘á»:**

- **Props drilling** - truyá»n props qua nhiá»u levels
- Intermediate components (Dashboard, Header, TopBar) khÃ´ng dÃ¹ng `user` nhÆ°ng pháº£i nháº­n vÃ  forward
- Hard to maintain - thÃªm prop = sá»­a nhiá»u chá»—
- Tight coupling - táº¥t cáº£ components biáº¿t vá» user structure

**2. Náº¿u thÃªm prop:**

```jsx
// Pháº£i sá»­a 5 chá»—!
<Dashboard user={user} theme={theme} />
function Dashboard({ user, theme }) { ... }
<Header user={user} theme={theme} />
function Header({ user, theme }) { ... }
...
```

**3. Giáº£i phÃ¡p:**

**Solution 1: Composition (Di chuyá»ƒn UserMenu lÃªn)**

```jsx
function App() {
  const user = { name: 'John', role: 'admin' };

  return (
    <Dashboard>
      <Header>
        <UserMenu user={user} /> {/* Trá»±c tiáº¿p! */}
      </Header>
      <Sidebar />
      <Content />
    </Dashboard>
  );
}

// KhÃ´ng cÃ²n props drilling!
```

**Solution 2: Context API (Day 36)**

```jsx
// Sáº½ há»c sau - share data without drilling
<UserContext.Provider value={user}>
  <Dashboard /> {/* user available á»Ÿ má»i nÆ¡i */}
</UserContext.Provider>
```

**Solution 3: Specialized Components**

```jsx
// Pre-configure components
function AdminDashboard() {
  const user = { name: 'John', role: 'admin' };

  return (
    <Dashboard
      header={<AdminHeader user={user} />}
      sidebar={<AdminSidebar user={user} />}
      content={<AdminContent user={user} />}
    />
  );
}
```

</details>

---

### Bug 2: Children Overwrite âŒ

```jsx
// ğŸ› CODE Bá»Š Lá»–I:
function Card({ children, title }) {
  return (
    <div className='card'>
      <h3>{title}</h3>
      {/* Always overwrite children */}
      <div className='card-body'>
        <p>Fixed content here</p>
      </div>
    </div>
  );
}

// Usage - children bá»‹ ignore!
<Card title='My Card'>
  <p>This content is LOST!</p>
  <button>Click me</button>
</Card>;

// Output: chá»‰ tháº¥y "Fixed content here"
```

**â“ CÃ¢u há»i:**

1. Táº¡i sao children khÃ´ng hiá»ƒn thá»‹?
2. LÃ m sao fix?

<details>
<summary>ğŸ’¡ Giáº£i Ä‘Ã¡p</summary>

**1. Táº¡i sao:**

- Component nháº­n `children` prop nhÆ°ng khÃ´ng render nÃ³!
- Hard-coded content `<p>Fixed content here</p>` thay tháº¿ children

**2. Fix:**

```jsx
// âœ… CORRECT: Render children
function Card({ children, title }) {
  return (
    <div className='card'>
      <h3>{title}</h3>
      <div className='card-body'>
        {children} {/* Render children! */}
      </div>
    </div>
  );
}

// âœ… ALTERNATIVE: Combine fixed + dynamic content
function Card({ children, title }) {
  return (
    <div className='card'>
      <h3>{title}</h3>
      <div className='card-body'>
        <p className='card-description'>Welcome to the card!</p>
        {children} {/* Add children sau fixed content */}
      </div>
    </div>
  );
}
```

</details>

---

### Bug 3: Compound Components Without Shared State âŒ

```jsx
// ğŸ› CODE Bá»Š Lá»–I:
function Tabs({ children }) {
  return <div className="tabs">{children}</div>;
}

Tabs.Tab = function Tab({ id, children }) {
  // Má»—i Tab cÃ³ state riÃªng!
  let isActive = false;

  return (
    <button
      className={isActive ? 'active' : ''}
      onClick={() => { isActive = true; }}
    >
      {children}
    </button>
  );
}

Tabs.Panel = function Panel({ id, children }) {
  // Panel khÃ´ng biáº¿t Tab nÃ o active!
  let isActive = false;

  return isActive ? <div>{children}</div> : null;
}

// Usage - khÃ´ng hoáº¡t Ä‘á»™ng!
<Tabs>
  <Tabs.Tab id="1">Tab 1</Tabs.Tab>
  <Tabs.Tab id="2">Tab 2</Tabs.Tab>

  <Tabs.Panel id="1">Content 1</Tabs.Panel>
  <Tabs.Panel id="2">Content 2</Tabs.Panel>
</Tabs>
```

**â“ CÃ¢u há»i:**

1. Váº¥n Ä‘á» gÃ¬?
2. Tab vÃ  Panel cáº§n gÃ¬ Ä‘á»ƒ "communicate"?
3. Giáº£i phÃ¡p?

<details>
<summary>ğŸ’¡ Giáº£i Ä‘Ã¡p</summary>

**1. Váº¥n Ä‘á»:**

- Tab vÃ  Panel khÃ´ng share state
- Click Tab khÃ´ng update Panel
- Má»—i component isolated, khÃ´ng biáº¿t vá» nhau

**2. Cáº§n gÃ¬:**

- **Shared state** - biáº¿t tab nÃ o Ä‘ang active
- **Communication** - Tab click â†’ Panel update

**3. Giáº£i phÃ¡p:**

**Temporary (without state):**

```jsx
// Pass active state qua props
<Tabs activeId='1'>
  <Tabs.Tab id='1'>Tab 1</Tabs.Tab>
  <Tabs.Tab id='2'>Tab 2</Tabs.Tab>

  <Tabs.Panel
    id='1'
    activeId='1'
  >
    Content 1
  </Tabs.Panel>
  <Tabs.Panel
    id='2'
    activeId='1'
  >
    Content 2
  </Tabs.Panel>
</Tabs>
```

**Proper solution (Day 11 - useState):**

```jsx
function Tabs({ children }) {
  // Shared state for all Tabs/Panels
  const [activeTab, setActiveTab] = useState('1');

  // Pass state to children via Context (Day 36)
  return (
    <TabsContext.Provider value={{ activeTab, setActiveTab }}>
      <div className='tabs'>{children}</div>
    </TabsContext.Provider>
  );
}
```

**For now:** Accept that compound components need state management (coming soon!)

</details>

---

## âœ… PHáº¦N 6: Tá»° ÄÃNH GIÃ (15 phÃºt)

### Knowledge Check

- [ ] TÃ´i hiá»ƒu Composition vs Inheritance
- [ ] TÃ´i biáº¿t khi nÃ o dÃ¹ng Children prop
- [ ] TÃ´i biáº¿t khi nÃ o dÃ¹ng Named Slots (props)
- [ ] TÃ´i hiá»ƒu Compound Components pattern
- [ ] TÃ´i biáº¿t Container vs Presentational separation
- [ ] TÃ´i hiá»ƒu Render Props (legacy pattern)
- [ ] TÃ´i biáº¿t HOC lÃ  gÃ¬ (legacy)
- [ ] TÃ´i biáº¿t trÃ¡nh Props Drilling
- [ ] TÃ´i cÃ³ thá»ƒ chá»n pattern phÃ¹ há»£p cho tá»«ng use case
- [ ] TÃ´i hiá»ƒu trade-offs cá»§a má»—i pattern

### Code Review Checklist

Khi design components:

**Composition:**

- [ ] Favor composition over inheritance
- [ ] Components nháº­n children khi ná»™i dung dynamic
- [ ] DÃ¹ng named props cho structured layouts
- [ ] Consider compound components cho complex UIs

**Props:**

- [ ] KhÃ´ng props drilling quÃ¡ 2-3 levels
- [ ] DÃ¹ng composition Ä‘á»ƒ avoid drilling
- [ ] Props cÃ³ meaningful names
- [ ] Optional props cÃ³ default values

**Structure:**

- [ ] TÃ¡ch Container (logic) vÃ  Presentational (UI)
- [ ] Components single responsibility
- [ ] Reusable vÃ  flexible
- [ ] Easy to test vÃ  maintain

---

## ğŸ  BÃ€I Táº¬P Vá»€ NHÃ€

### Báº¯t buá»™c (30 phÃºt)

**1. Dropdown Menu Component**

Táº¡o Dropdown vá»›i compound components:

- Dropdown container
- Dropdown.Trigger (button Ä‘á»ƒ open/close)
- Dropdown.Menu (danh sÃ¡ch options)
- Dropdown.Item (má»—i option)

```jsx
// Expected usage:
<Dropdown>
  <Dropdown.Trigger>
    <button>Options â–¼</button>
  </Dropdown.Trigger>
  <Dropdown.Menu>
    <Dropdown.Item>Edit</Dropdown.Item>
    <Dropdown.Item>Delete</Dropdown.Item>
    <Dropdown.Item>Share</Dropdown.Item>
  </Dropdown.Menu>
</Dropdown>
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Dropdown - Compound Component vá»›i menu tháº£ xuá»‘ng
 * Sá»­ dá»¥ng let Ä‘á»ƒ mÃ´ phá»ng "state" (chá»‰ Ä‘á»ƒ demo vÃ  tá»± thay Ä‘á»•i giÃ¡ trá»‹ thá»§ cÃ´ng)
 * @param {ReactNode} children - Dropdown.Trigger, Dropdown.Menu, Dropdown.Item
 */
function Dropdown({ children }) {
  // MÃ´ phá»ng state báº±ng biáº¿n let
  // Báº¡n cÃ³ thá»ƒ tá»± thay Ä‘á»•i giÃ¡ trá»‹ true/false á»Ÿ Ä‘Ã¢y Ä‘á»ƒ xem UI thay Ä‘á»•i
  let isOpen = false; // â† thay thÃ nh true Ä‘á»ƒ xem menu má»Ÿ

  // Trong thá»±c táº¿, khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ nÃ y báº±ng cÃ¡ch click
  // vÃ¬ React khÃ´ng biáº¿t giÃ¡ trá»‹ Ä‘Ã£ thay Ä‘á»•i â†’ khÃ´ng re-render
  const toggle = () => {
    isOpen = !isOpen;
    console.log('isOpen bÃ¢y giá» lÃ :', isOpen);
    // UI KHÃ”NG cáº­p nháº­t dÃ¹ console log thay Ä‘á»•i
    // ÄÃ¢y chÃ­nh lÃ  lÃ½ do cáº§n useState
  };

  return (
    <div className='dropdown'>
      {/* Truyá»n toggle vÃ  isOpen xuá»‘ng cÃ¡c pháº§n tá»­ con */}
      {React.Children.map(children, (child) => {
        if (child.type === Dropdown.Trigger) {
          return React.cloneElement(child, { onToggle: toggle });
        }
        if (child.type === Dropdown.Menu) {
          return React.cloneElement(child, { isOpen });
        }
        return child;
      })}
    </div>
  );
}

/**
 * Trigger - NÃºt má»Ÿ/Ä‘Ã³ng dropdown
 * @param {function} onToggle - HÃ m toggle (chá»‰ log, khÃ´ng thá»±c sá»± re-render)
 */
Dropdown.Trigger = function DropdownTrigger({ children, onToggle }) {
  return (
    <div
      className='dropdown-trigger'
      onClick={onToggle}
      style={{
        cursor: 'pointer',
        padding: '8px 16px',
        border: '1px solid #ccc',
        borderRadius: '4px',
        display: 'inline-block',
      }}
    >
      {children || 'TÃ¹y chá»n'}
      <span style={{ marginLeft: '8px' }}>â–¼</span>
    </div>
  );
};

/**
 * Menu - Danh sÃ¡ch cÃ¡c má»¥c (chá»‰ hiá»ƒn thá»‹ khi isOpen = true)
 * @param {boolean} isOpen - Tráº¡ng thÃ¡i mÃ´ phá»ng
 * @param {ReactNode} children - CÃ¡c Dropdown.Item
 */
Dropdown.Menu = function DropdownMenu({ isOpen, children }) {
  if (!isOpen) return null;

  return (
    <div
      className='dropdown-menu'
      style={{
        position: 'absolute',
        background: 'white',
        border: '1px solid #ccc',
        borderRadius: '4px',
        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
        minWidth: '160px',
        marginTop: '4px',
        zIndex: 10,
      }}
    >
      {children}
    </div>
  );
};

/**
 * Item - Má»™t má»¥c trong menu
 * @param {ReactNode} children - Ná»™i dung má»¥c
 * @param {function} [onClick] - HÃ nh Ä‘á»™ng khi click
 */
Dropdown.Item = function DropdownItem({ children, onClick }) {
  return (
    <div
      className='dropdown-item'
      onClick={onClick}
      style={{
        padding: '8px 16px',
        cursor: 'pointer',
      }}
      onMouseEnter={(e) => (e.currentTarget.style.background = '#f0f0f0')}
      onMouseLeave={(e) => (e.currentTarget.style.background = 'white')}
    >
      {children}
    </div>
  );
};
```

**VÃ­ dá»¥ sá»­ dá»¥ng (cÃ¡ch test báº±ng tay):**

```jsx
function App() {
  const handleEdit = () => console.log('Chá»n sá»­a');
  const handleDelete = () => console.log('Chá»n xÃ³a');

  return (
    <div style={{ padding: '80px 20px', position: 'relative' }}>
      <h3>Dropdown vá»›i let mÃ´ phá»ng state</h3>
      <p>
        Má»Ÿ code vÃ  thay Ä‘á»•i dÃ²ng "let isOpen = false" thÃ nh true â†’ xem menu xuáº¥t
        hiá»‡n
      </p>

      <Dropdown>
        <Dropdown.Trigger>Chá»n hÃ nh Ä‘á»™ng</Dropdown.Trigger>

        <Dropdown.Menu>
          <Dropdown.Item onClick={handleEdit}>âœï¸ Sá»­a</Dropdown.Item>
          <Dropdown.Item onClick={handleDelete}>ğŸ—‘ï¸ XÃ³a</Dropdown.Item>
          <Dropdown.Item>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</Dropdown.Item>
          <Dropdown.Item>ğŸšª ThoÃ¡t</Dropdown.Item>
        </Dropdown.Menu>
      </Dropdown>
    </div>
  );
}
```

**ğŸ“š Key Learnings:**

1. **Compound Components Pattern** - Parent vÃ  sub-components hoáº¡t Ä‘á»™ng nhÆ° má»™t unit
2. **Shared State** - isOpen state Ä‘Æ°á»£c share giá»¯a Trigger vÃ  Menu
3. **Flexible API** - Developer tá»± control structure vÃ  content cá»§a dropdown
4. **Clear Hierarchy** - Dropdown.Trigger, Dropdown.Menu, Dropdown.Item rÃµ rÃ ng vai trÃ² tá»«ng pháº§n

</details>

---

**2. Alert Component vá»›i Variants**

Táº¡o Alert component vá»›i named slots vÃ  variants:

- Variants: success, error, warning, info
- Slots: icon, title, message, actions
- Close button optional

```jsx
<Alert
  variant='success'
  icon={<span>âœ“</span>}
  title='Success!'
  message='Your changes have been saved.'
  onClose={() => console.log('Closed')}
/>
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Alert - Component thÃ´ng bÃ¡o vá»›i cÃ¡c variant khÃ¡c nhau
 * Sá»­ dá»¥ng let Ä‘á»ƒ mÃ´ phá»ng "state" cho viá»‡c Ä‘Ã³ng alert (chá»‰ Ä‘á»ƒ demo)
 * Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ let isVisible = true/false Ä‘á»ƒ xem alert áº©n/hiá»‡n
 * @param {('success'|'error'|'warning'|'info')} [variant='info'] - Loáº¡i thÃ´ng bÃ¡o
 * @param {ReactNode} [icon] - Icon tÃ¹y chá»n
 * @param {ReactNode} [title] - TiÃªu Ä‘á»
 * @param {ReactNode} message - Ná»™i dung chÃ­nh
 * @param {function} [onClose] - Callback khi Ä‘Ã³ng (á»Ÿ Ä‘Ã¢y chá»‰ log)
 */
function Alert({ variant = 'info', icon, title, message, onClose }) {
  // MÃ´ phá»ng state báº±ng biáº¿n let
  // Báº¡n tá»± thay Ä‘á»•i giÃ¡ trá»‹ true/false á»Ÿ Ä‘Ã¢y Ä‘á»ƒ xem alert biáº¿n máº¥t
  let isVisible = true; // â† thay thÃ nh false Ä‘á»ƒ áº©n alert

  const handleClose = () => {
    isVisible = false;
    console.log('Alert Ä‘Ã£ Ä‘Æ°á»£c Ä‘Ã³ng (nhÆ°ng UI khÃ´ng cáº­p nháº­t)');
    if (onClose) onClose();
    // LÆ°u Ã½: thay Ä‘á»•i let khÃ´ng gÃ¢y re-render â†’ UI váº«n hiá»ƒn thá»‹ nhÆ° cÅ©
  };

  // CÃ¡c style theo variant
  const styles = {
    success: { borderColor: '#4caf50', bg: '#e8f5e9', text: '#2e7d32' },
    error: { borderColor: '#f44336', bg: '#ffebee', text: '#c62828' },
    warning: { borderColor: '#ff9800', bg: '#fff3e0', text: '#e65100' },
    info: { borderColor: '#2196f3', bg: '#e3f2fd', text: '#1565c0' },
  };

  const current = styles[variant] || styles.info;

  if (!isVisible) return null;

  return (
    <div
      style={{
        border: `1px solid ${current.borderColor}`,
        backgroundColor: current.bg,
        color: current.text,
        padding: '16px',
        borderRadius: '6px',
        margin: '16px 0',
        position: 'relative',
        maxWidth: '500px',
      }}
    >
      {icon && (
        <div style={{ fontSize: '24px', marginBottom: '8px' }}>{icon}</div>
      )}

      {title && (
        <div
          style={{
            fontWeight: 'bold',
            fontSize: '1.2rem',
            marginBottom: '8px',
          }}
        >
          {title}
        </div>
      )}

      <div style={{ marginBottom: onClose ? '24px' : '0' }}>{message}</div>

      {onClose && (
        <button
          onClick={handleClose}
          style={{
            position: 'absolute',
            top: '12px',
            right: '12px',
            background: 'none',
            border: 'none',
            fontSize: '20px',
            cursor: 'pointer',
            color: 'inherit',
            opacity: 0.7,
          }}
          aria-label='ÄÃ³ng thÃ´ng bÃ¡o'
        >
          Ã—
        </button>
      )}
    </div>
  );
}
```

**VÃ­ dá»¥ sá»­ dá»¥ng:**

```jsx
function App() {
  const handleCloseSuccess = () => console.log('ÄÃ£ Ä‘Ã³ng alert success');

  return (
    <div style={{ padding: '40px', maxWidth: '600px', margin: '0 auto' }}>
      <h3>Demo Alert - Thay Ä‘á»•i let isVisible Ä‘á»ƒ test</h3>

      {/* Alert 1: Success */}
      <Alert
        variant='success'
        icon={<span>âœ“</span>}
        title='ThÃ nh cÃ´ng!'
        message='Dá»¯ liá»‡u cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c lÆ°u thÃ nh cÃ´ng.'
        onClose={handleCloseSuccess}
      />

      {/* Alert 2: Error - khÃ´ng cÃ³ nÃºt Ä‘Ã³ng */}
      <Alert
        variant='error'
        icon={<span>!</span>}
        title='Lá»—i káº¿t ná»‘i'
        message='KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n server. Vui lÃ²ng kiá»ƒm tra máº¡ng.'
      />

      {/* Alert 3: Warning - chá»‰ message */}
      <Alert
        variant='warning'
        message='Báº¡n cÃ²n 10% dung lÆ°á»£ng lÆ°u trá»¯. HÃ£y xÃ³a bá»›t file khÃ´ng cáº§n thiáº¿t.'
      />
    </div>
  );
}
```

**HÆ°á»›ng dáº«n test thá»§ cÃ´ng:**

1. Ban Ä‘áº§u `let isVisible = true` â†’ tháº¥y táº¥t cáº£ alert
2. Thay thÃ nh `let isVisible = false` â†’ save â†’ táº¥t cáº£ alert biáº¿n máº¥t ngay
3. Click nÃºt Ã— â†’ console log "Alert Ä‘Ã£ Ä‘Æ°á»£c Ä‘Ã³ng", nhÆ°ng UI **khÃ´ng thay Ä‘á»•i**  
   â†’ ÄÃ¢y chÃ­nh lÃ  minh chá»©ng rÃµ rÃ ng ráº±ng biáº¿n `let` khÃ´ng thá»ƒ Ä‘iá»u khiá»ƒn UI trong React  
   â†’ Cáº§n `useState` Ä‘á»ƒ thay Ä‘á»•i giÃ¡ trá»‹ vÃ  React tá»± Ä‘á»™ng re-render

Khi há»c `useState`, báº¡n sáº½ thay pháº§n nÃ y báº±ng:

```jsx
const [isVisible, setIsVisible] = useState(true);
// vÃ  dÃ¹ng setIsVisible(false) trong handleClose
```

</details>

---

### NÃ¢ng cao (60 phÃºt)

**3. Stepper Component**

Táº¡o multi-step wizard vá»›i compound components:

- Stepper container (track current step)
- Stepper.Step (má»—i step)
- Visual progress indicator
- Next/Previous buttons

```jsx
<Stepper currentStep={2}>
  <Stepper.Step
    number={1}
    title='Account'
  >
    <p>Step 1 content...</p>
  </Stepper.Step>
  <Stepper.Step
    number={2}
    title='Profile'
  >
    <p>Step 2 content...</p>
  </Stepper.Step>
  <Stepper.Step
    number={3}
    title='Confirm'
  >
    <p>Step 3 content...</p>
  </Stepper.Step>
</Stepper>
```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * Stepper - Component wizard Ä‘a bÆ°á»›c vá»›i progress bar
 * @param {number} currentStep - BÆ°á»›c hiá»‡n táº¡i (tá»« 1 trá»Ÿ lÃªn)
 * @param {ReactNode} children - CÃ¡c <Stepper.Step> component
 */
function Stepper({ currentStep = 1, children }) {
  // MÃ´ phá»ng state báº±ng let - báº¡n cÃ³ thá»ƒ thay Ä‘á»•i sá»‘ nÃ y Ä‘á»ƒ test
  // let currentStep = 2; // â† uncomment náº¿u muá»‘n hard-code thay vÃ¬ dÃ¹ng prop

  // Láº¥y táº¥t cáº£ Step vÃ  sáº¯p xáº¿p theo number
  const steps = React.Children.toArray(children)
    .filter((child) => child.type === Stepper.Step)
    .sort((a, b) => (a.props.number || 0) - (b.props.number || 0));

  const totalSteps = steps.length;

  // TÃ¬m step Ä‘ang active dá»±a trÃªn number
  const activeStep = steps.find((step) => step.props.number === currentStep);

  return (
    <div
      style={{
        maxWidth: '800px',
        margin: '40px auto',
        padding: '24px',
        border: '1px solid #ddd',
        borderRadius: '12px',
        background: '#fff',
        boxShadow: '0 4px 12px rgba(0,0,0,0.1)',
      }}
    >
      {/* Progress Bar */}
      <div
        style={{
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'space-between',
          position: 'relative',
          marginBottom: '48px',
        }}
      >
        {/* Thanh ná»n ná»‘i cÃ¡c bÆ°á»›c */}
        <div
          style={{
            position: 'absolute',
            top: '22px',
            left: '24px',
            right: '24px',
            height: '4px',
            background: '#e0e0e0',
            zIndex: 1,
          }}
        />

        {/* CÃ¡c bÆ°á»›c (vÃ²ng trÃ²n) */}
        {steps.map((step) => {
          const stepNum = step.props.number;
          const isActive = stepNum === currentStep;
          const isCompleted = stepNum < currentStep;

          return (
            <div
              key={stepNum}
              style={{
                width: '52px',
                height: '52px',
                borderRadius: '50%',
                background: isCompleted
                  ? '#28a745'
                  : isActive
                    ? '#007bff'
                    : '#e9ecef',
                color: isCompleted || isActive ? '#fff' : '#6c757d',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '20px',
                fontWeight: 'bold',
                position: 'relative',
                zIndex: 2,
                boxShadow: isActive ? '0 0 0 4px rgba(0,123,255,0.25)' : 'none',
                transition: 'all 0.3s',
              }}
            >
              {isCompleted ? 'âœ“' : stepNum}
            </div>
          );
        })}
      </div>

      {/* TiÃªu Ä‘á» cÃ¡c bÆ°á»›c */}
      <div
        style={{
          display: 'flex',
          justifyContent: 'space-between',
          marginBottom: '32px',
          padding: '0 24px',
        }}
      >
        {steps.map((step) => {
          const stepNum = step.props.number;
          const isActive = stepNum === currentStep;

          return (
            <div
              key={stepNum}
              style={{
                flex: 1,
                textAlign: 'center',
                fontSize: '15px',
                fontWeight: isActive ? '600' : '500',
                color: isActive
                  ? '#007bff'
                  : stepNum < currentStep
                    ? '#28a745'
                    : '#6c757d',
              }}
            >
              {step.props.title || `Step ${stepNum}`}
            </div>
          );
        })}
      </div>

      {/* Ná»™i dung bÆ°á»›c hiá»‡n táº¡i */}
      <div
        style={{
          padding: '24px',
          background: '#f8f9fa',
          borderRadius: '8px',
          minHeight: '180px',
        }}
      >
        {activeStep ? (
          activeStep
        ) : (
          <p style={{ color: '#dc3545', textAlign: 'center' }}>
            KhÃ´ng tÃ¬m tháº¥y bÆ°á»›c cÃ³ number = {currentStep}
            <br />
            CÃ¡c bÆ°á»›c hiá»‡n cÃ³:{' '}
            {steps.map((s) => s.props.number).join(', ') || 'khÃ´ng cÃ³'}
          </p>
        )}
      </div>

      {/* HÆ°á»›ng dáº«n test */}
      <div
        style={{
          marginTop: '24px',
          fontSize: '13px',
          color: '#6c757d',
          textAlign: 'center',
        }}
      >
        <strong>Demo mode:</strong> Thay Ä‘á»•i prop <code>currentStep</code> trÃªn
        &lt;Stepper&gt; Ä‘á»ƒ xem cÃ¡c bÆ°á»›c khÃ¡c nhau
      </div>
    </div>
  );
}

/**
 * Step - Má»™t bÆ°á»›c trong Stepper
 * @param {number} number - Sá»‘ thá»© tá»± bÆ°á»›c (báº¯t buá»™c, dÃ¹ng Ä‘á»ƒ khá»›p vá»›i currentStep)
 * @param {string} title - TiÃªu Ä‘á» hiá»ƒn thá»‹ trÃªn progress bar
 * @param {ReactNode} children - Ná»™i dung cá»§a bÆ°á»›c
 */
Stepper.Step = function Step({ number, title, children }) {
  return <div data-step={number}>{children}</div>;
};
```

**VÃ­ dá»¥ sá»­ dá»¥ng (Ä‘Ãºng nhÆ° yÃªu cáº§u trong bÃ i táº­p):**

```jsx
<Stepper currentStep={2}>
  <Stepper.Step
    number={1}
    title='Account'
  >
    <p>Step 1 content...</p>
    <p>Nháº­p thÃ´ng tin tÃ i khoáº£n cá»§a báº¡n</p>
  </Stepper.Step>

  <Stepper.Step
    number={2}
    title='Profile'
  >
    <p>Step 2 content...</p>
    <p>Cáº­p nháº­t há»“ sÆ¡ cÃ¡ nhÃ¢n</p>
  </Stepper.Step>

  <Stepper.Step
    number={3}
    title='Confirm'
  >
    <p>Step 3 content...</p>
    <p>XÃ¡c nháº­n thÃ´ng tin trÆ°á»›c khi hoÃ n táº¥t</p>
  </Stepper.Step>
</Stepper>
```

**Káº¿t quáº£ khi test:**

- `currentStep={1}` â†’ hiá»ƒn thá»‹ bÆ°á»›c Account (number=1), vÃ²ng Ä‘áº§u mÃ u xanh dÆ°Æ¡ng
- `currentStep={2}` â†’ hiá»ƒn thá»‹ bÆ°á»›c Profile (number=2), bÆ°á»›c 1 hoÃ n thÃ nh (checkmark xanh lÃ¡)
- `currentStep={3}` â†’ hiá»ƒn thá»‹ bÆ°á»›c Confirm (number=3), hai bÆ°á»›c trÆ°á»›c hoÃ n thÃ nh

</details>

---

**4. Split Pane Layout**

Táº¡o resizable split pane:

- SplitPane container
- SplitPane.Left (left panel)
- SplitPane.Right (right panel)
- Draggable divider giá»¯a 2 panels
- Support vertical/horizontal split

**Hint:** DÃ¹ng composition + event handlers (khÃ´ng cáº§n resize logic tháº­t, chá»‰ log events)

```jsx
<SplitPane direction="horizontal">
  <SplitPane.Left>Left Children</SplitPane.Left>
  <SplitPane.Right>Right Children</SplitPane.Right>
</SplitPane>

<SplitPane direction="vertical">
  <SplitPane.Left>Top Children</SplitPane.Left>
  <SplitPane.Right>Bottom Children</SplitPane.Right>
</SplitPane>

```

<details>
<summary>ğŸ’¡ Solution</summary>

```jsx
/**
 * SplitPane - Component chia mÃ n hÃ¬nh thÃ nh 2 pháº§n (Left / Right)
 * Sá»­ dá»¥ng React.Children API Ä‘á»ƒ xá»­ lÃ½ children má»™t cÃ¡ch an toÃ n vÃ  linh hoáº¡t
 * @param {'horizontal' | 'vertical'} [direction='horizontal'] - HÆ°á»›ng chia
 * @param {ReactNode} children - CÃ¡c pháº§n con: SplitPane.Left vÃ  SplitPane.Right
 */
function SplitPane({ direction = 'horizontal', children }) {
  // MÃ´ phá»ng state báº±ng let - báº¡n thay Ä‘á»•i Ä‘á»ƒ test
  let splitPosition = 50; // â† Thay sá»‘ nÃ y (30, 60, 20...) Ä‘á»ƒ xem chia mÃ n hÃ¬nh khÃ¡c nhau

  // CÃ¡ch 1: DÃ¹ng React.Children.toArray() + kiá»ƒm tra type (cÃ¡ch hiá»‡n táº¡i trong code cÅ©)
  const parts = React.Children.toArray(children);

  // TÃ¬m Left vÃ  Right theo type (linh hoáº¡t hÆ¡n, khÃ´ng phá»¥ thuá»™c thá»© tá»±)
  let leftPart = null;
  let rightPart = null;

  React.Children.forEach(children, (child) => {
    if (child.type === SplitPane.Left) {
      leftPart = child;
    }
    if (child.type === SplitPane.Right) {
      rightPart = child;
    }
  });

  // Náº¿u khÃ´ng tÃ¬m tháº¥y Ä‘á»§ 2 pháº§n â†’ bÃ¡o lá»—i
  if (!leftPart || !rightPart) {
    return (
      <div style={{ color: 'red', padding: '20px', border: '2px solid red' }}>
        SplitPane cáº§n Ä‘Ãºng 2 pháº§n con: <strong>SplitPane.Left</strong> vÃ {' '}
        <strong>SplitPane.Right</strong>
        <br />
        <br />
        ÄÃ£ tÃ¬m tháº¥y: {React.Children.count(children)} pháº§n con
      </div>
    );
  }

  const isHorizontal = direction === 'horizontal';

  return (
    <div
      style={{
        display: 'flex',
        flexDirection: isHorizontal ? 'row' : 'column',
        height: '500px',
        width: '100%',
        border: '1px solid #ccc',
        borderRadius: '8px',
        overflow: 'hidden',
        background: '#f8f9fa',
      }}
    >
      {/* Pháº§n Left (trÃ¡i hoáº·c trÃªn) */}
      <div
        style={{
          flex: `${splitPosition} 1 0%`,
          padding: '24px',
          overflow: 'auto',
          background: '#ffffff',
          borderRight: isHorizontal ? '1px solid #ddd' : 'none',
          borderBottom: isHorizontal ? 'none' : '1px solid #ddd',
        }}
      >
        {leftPart}
      </div>

      {/* Thanh kÃ©o (Divider) */}
      <div
        style={{
          width: isHorizontal ? '10px' : '100%',
          height: isHorizontal ? '100%' : '10px',
          background: '#ced4da',
          cursor: isHorizontal ? 'col-resize' : 'row-resize',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          transition: 'background 0.2s',
        }}
        title='Thay splitPosition trong code Ä‘á»ƒ thay Ä‘á»•i kÃ­ch thÆ°á»›c'
      >
        <div
          style={{
            width: isHorizontal ? '4px' : '80px',
            height: isHorizontal ? '80px' : '4px',
            background: '#6c757d',
            borderRadius: '4px',
          }}
        />
      </div>

      {/* Pháº§n Right (pháº£i hoáº·c dÆ°á»›i) */}
      <div
        style={{
          flex: `${100 - splitPosition} 1 0%`,
          padding: '24px',
          overflow: 'auto',
          background: '#f1f3f5',
        }}
      >
        {rightPart}
      </div>
    </div>
  );
}

/**
 * Left - Pháº§n bÃªn trÃ¡i hoáº·c pháº§n trÃªn (vertical)
 * @param {ReactNode} children - Ná»™i dung
 */
SplitPane.Left = function SplitPaneLeft({ children }) {
  return <>{children}</>;
};

/**
 * Right - Pháº§n bÃªn pháº£i hoáº·c pháº§n dÆ°á»›i (vertical)
 * @param {ReactNode} children - Ná»™i dung
 */
SplitPane.Right = function SplitPaneRight({ children }) {
  return <>{children}</>;
};
```

**VÃ­ dá»¥ sá»­ dá»¥ng (thá»© tá»± Left/Right khÃ´ng quan trá»ng)**

```jsx
function App() {
  return (
    <div style={{ padding: '40px' }}>
      <h2>SplitPane - Thá»© tá»± Left/Right linh hoáº¡t</h2>

      {/* VÃ­ dá»¥ 1: Horizontal - Left trÆ°á»›c Right */}
      <SplitPane direction='horizontal'>
        <SplitPane.Left>
          <h3>Editor (Left)</h3>
          <p>Viáº¿t code á»Ÿ Ä‘Ã¢y...</p>
          <pre
            style={{
              background: '#f4f4f4',
              padding: '12px',
              borderRadius: '6px',
            }}
          >
            console.log("Hello SplitPane");
          </pre>
        </SplitPane.Left>

        <SplitPane.Right>
          <h3>Preview (Right)</h3>
          <div
            style={{
              background: '#fff',
              padding: '16px',
              border: '1px solid #ddd',
            }}
          >
            Káº¿t quáº£ render á»Ÿ Ä‘Ã¢y
          </div>
        </SplitPane.Right>
      </SplitPane>

      {/* VÃ­ dá»¥ 2: Vertical - Right trÆ°á»›c Left (váº«n hoáº¡t Ä‘á»™ng) */}
      <div style={{ marginTop: '60px' }}>
        <SplitPane direction='vertical'>
          <SplitPane.Right>
            <h3>Pháº§n DÆ°á»›i (Right)</h3>
            <p>Danh sÃ¡ch log hoáº·c káº¿t quáº£</p>
          </SplitPane.Right>

          <SplitPane.Left>
            <h3>Pháº§n TrÃªn (Left)</h3>
            <p>Báº£n Ä‘á»“ hoáº·c hÃ¬nh áº£nh lá»›n</p>
          </SplitPane.Left>
        </SplitPane>
      </div>

      <p style={{ marginTop: '40px', color: '#666' }}>
        <strong>Demo:</strong> Thay <code>let splitPosition = 50;</code> thÃ nh
        30, 70... Ä‘á»ƒ xem panel thay Ä‘á»•i kÃ­ch thÆ°á»›c
      </p>
    </div>
  );
}
```

**Giáº£i thÃ­ch cÃ¡c React.Children API Ä‘Æ°á»£c sá»­ dá»¥ng:**

- `React.Children.toArray(children)`: Chuyá»ƒn children thÃ nh array tháº­t Ä‘á»ƒ dá»… thao tÃ¡c
- `React.Children.forEach(children, fn)`: Duyá»‡t qua tá»«ng child Ä‘á»ƒ kiá»ƒm tra type vÃ  gÃ¡n vÃ o biáº¿n (an toÃ n hÆ¡n map khi chá»‰ cáº§n side-effect)
- `React.Children.count(children)`: Äáº¿m sá»‘ lÆ°á»£ng children (dÃ¹ng Ä‘á»ƒ bÃ¡o lá»—i náº¿u thiáº¿u)
- KhÃ´ng dÃ¹ng `React.Children.map` á»Ÿ Ä‘Ã¢y vÃ¬ ta khÃ´ng cáº§n bá»c láº¡i child, chá»‰ cáº§n tÃ¬m vÃ  tham chiáº¿u

**Æ¯u Ä‘iá»ƒm cá»§a cÃ¡ch nÃ y:**

- KhÃ´ng phá»¥ thuá»™c thá»© tá»± Left/Right trong markup
- BÃ¡o lá»—i rÃµ rÃ ng náº¿u thiáº¿u má»™t trong hai pháº§n
- Dá»… má»Ÿ rá»™ng sau nÃ y (vÃ­ dá»¥: thÃªm prop `minSize`, `maxSize`,...)

Khi há»c `useState` + event handling, báº¡n sáº½ thÃªm logic kÃ©o chuá»™t tháº­t sá»± Ä‘á»ƒ thay Ä‘á»•i `splitPosition` Ä‘á»™ng.

</details>

## ğŸ“š TÃ€I LIá»†U THAM KHáº¢O

### Báº¯t buá»™c Ä‘á»c

1. **React Docs - Composition vs Inheritance**
   https://react.dev/learn/passing-props-to-a-component#passing-jsx-as-children

2. **Compound Components Pattern**
   https://kentcdodds.com/blog/compound-components-with-react-hooks

### Äá»c thÃªm

3. **Container/Presentational Pattern**
   https://www.patterns.dev/posts/presentational-container-pattern

4. **React Component Patterns**
   https://www.robinwieruch.de/react-component-composition/

---

## ğŸ”— Káº¾T Ná»I KIáº¾N THá»¨C

### Kiáº¿n thá»©c ná»n (ÄÃ£ há»c)

- **NgÃ y 4:** Props & Children (ná»n táº£ng cho composition)
- **NgÃ y 5:** Events (pass handlers through composition)
- **NgÃ y 6:** Lists (render composed components)

### HÆ°á»›ng tá»›i (Sáº½ há»c)

- **NgÃ y 11:** useState (shared state trong compound components)
- **NgÃ y 24:** Custom Hooks (alternative cho Render Props/HOC)
- **NgÃ y 36:** Context API (solve Props Drilling)
- **NgÃ y 39:** Advanced Patterns (composition patterns nÃ¢ng cao)

---

## ğŸ’¡ SENIOR INSIGHTS

### CÃ¢n Nháº¯c Production

**1. Component API Design:**

```jsx
// âŒ BAD: Too many props
<Button
  text="Click"
  icon="check"
  iconPosition="left"
  variant="primary"
  size="large"
  loading={false}
  disabled={false}
  onClick={...}
  // ... 20 more props
/>

// âœ… GOOD: Composition
<Button variant="primary" size="large" onClick={...}>
  <Icon name="check" />
  Click Me
</Button>
```

**2. Over-engineering Warning:**

```jsx
// âŒ Over-abstracted
<SuperFlexibleComponent
  renderHeader={(props) => ...}
  renderBody={(props) => ...}
  headerProps={{...}}
  bodyProps={{...}}
  // Too complex!
/>

// âœ… KISS Principle
<Card>
  <h3>Title</h3>
  <p>Content</p>
</Card>
```

**3. Accessibility:**

```jsx
// âœ… Compound components vá»›i a11y
<Tabs>
  <Tabs.List role='tablist'>
    <Tabs.Tab
      role='tab'
      aria-selected={true}
    >
      Tab 1
    </Tabs.Tab>
  </Tabs.List>
  <Tabs.Panel role='tabpanel'>Content</Tabs.Panel>
</Tabs>
```

---

### CÃ¢u Há»i Phá»ng Váº¥n

**Junior Level:**

Q1: "Composition vÃ  Inheritance khÃ¡c nhau nhÆ° tháº¿ nÃ o trong React?"  
A: React khuyáº¿n khÃ­ch composition (láº¯p ghÃ©p components) thay vÃ¬ inheritance (káº¿ thá»«a classes). Composition linh hoáº¡t hÆ¡n, dá»… reuse vÃ  maintain hÆ¡n.

Q2: "Children prop lÃ  gÃ¬?"  
A: Children lÃ  prop Ä‘áº·c biá»‡t chá»©a ná»™i dung bÃªn trong component tags. GiÃºp component linh hoáº¡t, cÃ³ thá»ƒ nháº­n báº¥t ká»³ content nÃ o.

**Mid Level:**

Q3: "Compound Components lÃ  gÃ¬? Cho vÃ­ dá»¥."  
A: Pattern mÃ  nhiá»u components hoáº¡t Ä‘á»™ng cÃ¹ng nhau nhÆ° má»™t unit. VD: `<Select>`, `<Select.Option>`. Lá»£i Ã­ch: API rÃµ rÃ ng, shared state, flexible structure.

Q4: "LÃ m sao trÃ¡nh Props Drilling?"  
A:

1. Composition (vÃ­ dá»¥: Ä‘Æ°a component con vÃ o trá»±c tiáº¿p component cáº§n data thay vÃ¬ truyá»n qua nhiá»u táº§ng) - di chuyá»ƒn component láº¡i gáº§n nÆ¡i sá»­ dá»¥ng data
2. Context API (vÃ­ dá»¥: AuthContext, ThemeContext) - chia sáº» data á»Ÿ pháº¡m vi toÃ n cá»¥c
3. State management libraries (Redux, Zustand) (vÃ­ dá»¥: lÆ°u user, cart á»Ÿ store chung)
4. Component specialization (vÃ­ dá»¥: táº¡o <UserProfile /> tá»± láº¥y user tá»« context/store thay vÃ¬ nháº­n nhiá»u props tá»« component cha)

**Senior Level:**

Q5: "Trade-offs giá»¯a Compound Components vÃ  Render Props?"
A:

- **Compound:** API rÃµ rÃ ng, dá»… sá»­ dá»¥ng, DX tá»‘t hÆ¡n _(DX = Developer Experience: dá»… Ä‘á»c, dá»… hiá»ƒu, autocomplete tá»‘t, Ã­t bug khi dÃ¹ng)_. NhÆ°ng cáº§n shared state (Context).
- **Render Props:** Linh hoáº¡t tá»‘i Ä‘a, khÃ´ng cáº§n setup. NhÆ°ng syntax phá»©c táº¡p, khÃ³ Ä‘á»c, DX kÃ©m hÆ¡n _(nhiá»u function lá»“ng nhau, khÃ³ maintain)_.
- Modern: Æ¯u tiÃªn Custom Hooks Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng logic.

---

### War Stories

**Story 1: The Props Drilling Nightmare**

> "Refactor má»™t form lá»›n: user prop drill qua 8 levels! ThÃªm 1 field má»›i = sá»­a 15 files. Team quyáº¿t Ä‘á»‹nh: restructure vá»›i composition. Di chuyá»ƒn UserContext lÃªn top, cÃ¡c components con dÃ¹ng Context. Refactor 2 ngÃ y nhÆ°ng maintain sau Ä‘Ã³ EZ. Lesson: Detect props drilling sá»›m!"

**Story 2: Over-abstraction Hell**

> "Junior dev táº¡o 'universal component' - component siÃªu cáº¥p vÅ© trá»¥, cÃ³ thá»ƒ lÃ m Má»ŒI THá»¨: 50+ props, 10+ render props, config object khá»•ng lá»“. KhÃ´ng ai hiá»ƒu cÃ¡ch dÃ¹ng! Code review: Break down thÃ nh smaller, specific components. Lesson: KISS > Clever abstractions!"

**Story 3: The Compound Components Win**

> "Thiáº¿t káº¿ láº¡i Table component: ban Ä‘áº§u dÃ¹ng má»™t props object khá»•ng lá»“. Chuyá»ƒn sang compound pattern: `<Table><Table.Header /><Table.Row /></Table>`. Code dá»… Ä‘á»c hÆ¡n gáº¥p 10 láº§n, custom dá»… hÆ¡n, bugs giáº£m. Team lead: 'This is the way!' BÃ i há»c: Chá»n Ä‘Ãºng pattern = DX tá»‘t hÆ¡n!"

---

## ğŸ¯ PREVIEW NGÃ€Y MAI

**NgÃ y 8: Mini Project - Static Product Catalog**

Tomorrow chÃºng ta sáº½:

- Tá»•ng há»£p kiáº¿n thá»©c NgÃ y 1-7
- Build má»™t project thá»±c táº¿
- KhÃ´ng cÃ³ concepts má»›i
- Focus vÃ o best practices
- Component architecture
- Code organization

Chuáº©n bá»‹:

- Review táº¥t cáº£ concepts Ä‘Ã£ há»c (JSX â†’ Composition)
- NghÄ© vá» structure cá»§a má»™t e-commerce product page
- Ready Ä‘á»ƒ code má»™t project hoÃ n chá»‰nh!

**Sneak peek:**

```
Project: Product Catalog
â”œâ”€â”€ ProductGrid (container)
â”œâ”€â”€ ProductCard (item)
â”‚   â”œâ”€â”€ ProductImage
â”‚   â”œâ”€â”€ ProductInfo
â”‚   â””â”€â”€ ProductActions
â”œâ”€â”€ FilterBar (sidebar)
â””â”€â”€ Layout (composition)
```

---

## ğŸŠ CHÃšC Má»ªNG!

Báº¡n Ä‘Ã£ hoÃ n thÃ nh **NgÃ y 7: Component Composition**!

**HÃ´m nay báº¡n Ä‘Ã£ há»c:**
âœ… Composition vs Inheritance philosophy  
âœ… Children prop patterns (basic â†’ advanced)  
âœ… Named Slots (props) cho structured layouts  
âœ… Compound Components cho complex UIs  
âœ… Container/Presentational separation  
âœ… Render Props & HOC (legacy patterns)  
âœ… Real-world composition patterns

**Key Takeaways:**

- **Composition > Inheritance** trong React
- **Children prop** cho flexibility
- **Compound Components** cho clear APIs
- **Avoid Props Drilling** báº±ng composition
- **KISS Principle** - Ä‘á»«ng over-abstract

**Next steps:**

1. HoÃ n thÃ nh bÃ i táº­p vá» nhÃ 
2. Practice táº¡o compound components
3. Refactor old code dÃ¹ng composition
4. Chuáº©n bá»‹ cho NgÃ y 8: Mini Project!

**Remember:** Good component design = Reusable + Flexible + Maintainable! ğŸ¯

**Keep coding! ğŸ’ª Tomorrow: Hands-on Project Time!** ğŸš€
